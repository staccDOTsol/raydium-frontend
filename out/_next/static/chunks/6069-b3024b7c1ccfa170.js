(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6069],{6262:function(e,t,n){"use strict";n.d(t,{Ek:function(){return l},TL:function(){return p},vt:function(){return m},yc:function(){return d}});var i=n(13550),r=n(27713),o=n(4465),a=n(51523),s=n(84207),c=n(97042);function u(e){let t=c.jsJ.getPriceAndTick(e);return(0,r.JS)(t)}function l(e){let t=c.jsJ.getTickPrice(e),n=t.tickSqrtPriceX64,r=n.div(new i.BN(2).pow(new i.BN(64)));return{price:new c.iAi(r),tick:t.tick}}function m(e){let{coin1:t,coin2:n,reverse:i,ammPool:o,maxDecimals:c}=e;if(o)try{var l,m;let e=c||(t||n?Math.max(null!==(l=null==t?void 0:t.decimals)&&void 0!==l?l:0,null!==(m=null==n?void 0:n.decimals)&&void 0!==m?m:0):6),d=100===o.ammConfig.tradeFeeRate,p=d?.01:.2,S=(0,r.eZ)(null==o?void 0:o.state.currentPrice),g=(0,a.kg)(S?(0,a.dC)(S,1-p):0,1/10**e),w=(0,a.kg)(S?(0,a.dC)(S,1+p):0,1/10**e),{price:A,tick:f}=u({poolInfo:o.state,baseIn:!0,price:(0,r.I2)((0,s.Z)(g))}),{price:y,tick:k}=u({poolInfo:o.state,baseIn:!0,price:(0,r.I2)((0,s.Z)(w))});if(i)return{priceLowerTick:k,priceLower:(0,a.hi)(1,y),priceUpperTick:f,priceUpper:(0,a.hi)(1,A)};return{priceLowerTick:f,priceLower:A,priceUpperTick:k,priceUpper:y}}catch(e){return}}function d(e){let{p:t,coin1:n,coin2:i,reverse:a,ammPool:c,maxDecimals:l}=e,m=a?i:n;try{let{price:e,tick:n}=u({poolInfo:c.state,baseIn:(0,o.aT)(c.state.mintA.mint,null==m?void 0:m.mint),price:(0,r.I2)((0,s.Z)(Math.max(Number(t),1/10**(null!=l?l:6))))});return{price:e,tick:n}}catch(e){return}}function p(e){let{min:t,max:n,coin1:i,coin2:r,reverse:o,ammPool:a,maxDecimals:s}=e,c=d({p:t,coin1:i,coin2:r,ammPool:a,reverse:o,maxDecimals:s}),u=d({p:n,coin1:i,coin2:r,ammPool:a,reverse:o,maxDecimals:s});return{priceLower:c.price,priceLowerTick:c.tick,priceUpper:u.price,priceUpperTick:u.tick}}},17607:function(e,t,n){"use strict";let i;n.d(t,{Z:function(){return iL},B:function(){return iD}});var r,o,a,s,c,u,l,m,d,p,S,g,w,A,f,y=n(79938),k=n(53002),b=n(34003),T=n(62952),I=n(71375),h=n(72573),C=n(49329),P=n(79721),L=n(79838),D=n(84989),v=n(2069),R=n(44234),U=n.n(R);let O="1.1.0-beta.6",q=!1,V=!1,B={debug:1,default:2,info:2,warning:3,error:4,off:5},E={},_=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw Error("bad normalize")}catch(n){e.push(t)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(e){if(e instanceof Error)return e.message}return""}();(r=m||(m={})).DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF",(o=d||(d={})).UNKNOWN_ERROR="UNKNOWN_ERROR",o.NOT_IMPLEMENTED="NOT_IMPLEMENTED",o.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",o.NETWORK_ERROR="NETWORK_ERROR",o.RPC_ERROR="RPC_ERROR",o.TIMEOUT="TIMEOUT",o.BUFFER_OVERRUN="BUFFER_OVERRUN",o.NUMERIC_FAULT="NUMERIC_FAULT",o.MISSING_NEW="MISSING_NEW",o.INVALID_ARGUMENT="INVALID_ARGUMENT",o.MISSING_ARGUMENT="MISSING_ARGUMENT",o.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",o.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS";let x="0123456789abcdef";class M{constructor(e){this.version=O,this.moduleName=e}_log(e,t){let n=e.toLowerCase();null==B[n]&&this.throwArgumentError("invalid log level name","logLevel",e);let i=E[this.moduleName]||B.default;i>B[n]||console.log(...t)}debug(...e){this._log(M.levels.DEBUG,["[DEBUG]",...e])}info(...e){this._log(M.levels.INFO,["[INFO]",...e])}warn(...e){this._log(M.levels.WARNING,["[WARN]",...e])}makeError(e,t,n){if(V)return this.makeError("censored error",t,{});t||(t=M.errors.UNKNOWN_ERROR),n||(n={});let i=[];Object.entries(n).forEach(([e,t])=>{i.push(`${e}=${function e(t,n=!1){let i=t;try{if(t instanceof Uint8Array){let e="";for(let n=0;n<t.length;n++)e+=x[t[n]>>4]+x[15&t[n]];i=`Uint8Array(0x${e})`}else if(t instanceof D.nh)i=`PublicKey(${t.toBase58()})`;else if(t instanceof Object&&!n){let n={};Object.entries(t).forEach(([t,i])=>{n[t]=e(i,!0)}),i=JSON.stringify(n)}else n||(i=JSON.stringify(t))}catch(e){i=JSON.stringify(t.toString())}return i}(t)})`)}),i.push(`code=${t}`),i.push(`module=${this.moduleName}`),i.push(`version=${this.version}`);let r=e;i.length&&(e+=" ("+i.join(", ")+")");let o=Error(e);return o.reason=r,o.code=t,Object.entries(n).forEach(([e,t])=>{o[e]=t}),o}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,M.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),_&&this.throwError("platform missing String.prototype.normalize",M.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,M.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,M.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n=n?": "+n:"",e<t&&this.throwError("missing argument"+n,M.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,M.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||null==e)&&this.throwError("missing new",M.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",M.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",M.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return i||(i=new M(O)),i}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",M.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),q){if(!e)return;this.globalLogger().throwError("error censorship permanent",M.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}V=!!e,q=!!t}static setLogLevel(e,t){let n=B[t.toLowerCase()];if(null==n){M.globalLogger().warn("invalid log level - "+t);return}E[e]=n}static from(e){return new M(e)}}M.errors=d,M.levels=m;let N=M.from("common/pubkey"),W=D.yc.programId,F=new D.nh("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),K=new D.nh("SysvarRent111111111111111111111111111111111"),Y=new D.nh("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),X=new D.nh("Sysvar1nstructions1111111111111111111111111");function H(e){if(e instanceof D.nh)return e;if("string"==typeof e)try{let t=new D.nh(e);return t}catch{}return N.throwArgumentError("invalid public key","publicKey",e)}function G(e,t){let[n,i]=D.nh.findProgramAddressSync(e,t);return{publicKey:n,nonce:i}}function Z(e,t){return{pubkey:e,isWritable:!0,isSigner:t}}function z(e,t){return{pubkey:e,isWritable:!1,isSigner:t}}function Q(e,t=1,n=[]){let i=[...e];if(t<=0)return n;for(;i.length;)n.push(i.splice(0,t));return n}var j=n(37407).Buffer;let J=M.from("common/web3");async function $(e,t,n){let{batchRequest:i,commitment:r}={batchRequest:!1,...n},o=Q(t,100),a=Array(o.length).fill([]);if(i){let t=o.map(t=>{let n=e._buildArgs([t.map(e=>e.toBase58())],r,"base64");return{methodName:"getMultipleAccounts",args:n}}),n=Q(t,10),i=await (await Promise.all(n.map(async t=>await e._rpcBatchRequest(t)))).flat();a=i.map(e=>e.error?J.throwError("failed to get info for multiple accounts",M.errors.RPC_ERROR,{message:e.error.message}):e.result.value.map(e=>{if(!e)return null;{let{data:t,executable:n,lamports:i,owner:r,rentEpoch:o}=e;return 2!==t.length&&"base64"!==t[1]?J.throwError("info must be base64 encoded",M.errors.RPC_ERROR):{data:j.from(t[0],"base64"),executable:n,lamports:i,owner:new D.nh(r),rentEpoch:o}}}))}else try{a=await Promise.all(o.map(t=>e.getMultipleAccountsInfo(t,r)))}catch(e){if(e instanceof Error)return J.throwError("failed to get info for multiple accounts",M.errors.RPC_ERROR,{message:e.message})}return a.flat()}async function ee(e,t,n){let i=await $(e,t.map(e=>e.pubkey),n);return t.map((e,t)=>({...e,accountInfo:i[t]}))}function et(e,t){if(e.length<1)return J.throwArgumentError("no instructions provided","instructions",e);if(t.length<1)return J.throwArgumentError("no signers provided","signers",t);let n=new D.YW({recentBlockhash:"11111111111111111111111111111111",feePayer:t[0]});n.add(...e);try{return j.from(n.serialize({verifySignatures:!1})).toString("base64").length<es}catch(e){return!1}}async function en(e,t,n,i=!0){let r=new D.nh("RaydiumSimuLateTransaction11111111111111111"),o=[],a=new D.YW;for(let e of(a.feePayer=r,t))et([...a.instructions,e],[r])||(o.push(a),(a=new D.YW).feePayer=r),a.add(e);a.instructions.length>0&&o.push(a);let s=[];try{if((s=await er(e,o,i)).find(e=>null!==e.err))throw Error("rpc simulateTransaction error")}catch(e){if(e instanceof Error)return J.throwError("failed to simulate for instructions",M.errors.RPC_ERROR,{message:e.message})}let c=[];for(let e of s)if(J.debug("simulate result:",e),e.logs){let t=e.logs.filter(e=>e&&e.includes(n));J.debug("filteredLog:",c),J.assertArgument(0!==t.length,"simulate log not match keyword","keyword",n),c.push(...t)}return c}function ei(e,t){let n=RegExp(`"${t}":(\\d+)`,"g"),i=n.exec(e);return i&&2===i.length?i[1]:J.throwArgumentError("simulate log fail to match key","key",t)}async function er(e,t,n){let i=[];if(n){let n=await e.getLatestBlockhash(),r=[];for(let e of t){e.recentBlockhash=n.blockhash,e.lastValidBlockHeight=n.lastValidBlockHeight;let t=e._compile(),i=t.serialize(),o=e._serialize(i),a=o.toString("base64");r.push(a)}let o=r.map(t=>{let n=e._buildArgs([t],void 0,"base64");return{methodName:"simulateTransaction",args:n}}),a=[];for(let e=0;e<Math.ceil(o.length/20);e++)a.push(o.slice(20*e,(e+1)*20));i=await (await Promise.all(a.map(async t=>{let n=await e._rpcBatchRequest(t);return n.map(e=>e.result.value)}))).flat()}else try{i=await Promise.all(t.map(async t=>await (await e.simulateTransaction(t)).value))}catch(e){if(e instanceof Error)return J.throwError("failed to get info for multiple accounts",M.errors.RPC_ERROR,{message:e.message})}return i}async function eo({connection:e,makeTxVersion:t,innerTransaction:n,lookupTableCache:i,computeBudgetConfig:r,payer:o}){let a=i??{},s=[...new Set(n.map(e=>(e.lookupTableAddress??[]).map(e=>e.toString())).flat())],c=[];for(let e of s)void 0===a[e]&&c.push(new D.nh(e));let u=await ec({connection:e,address:c});for(let[e,t]of Object.entries(u))a[e]=t;let l=r?function(e){let t=[],n=[];return e.microLamports&&(t.push(D.Lb.setComputeUnitPrice({microLamports:e.microLamports})),n.push(g.setComputeUnitPrice)),e.units&&(t.push(D.Lb.setComputeUnitLimit({units:e.units})),n.push(g.setComputeUnitLimit)),{address:{},innerTransaction:{instructions:t,signers:[],instructionTypes:n}}}(r).innerTransaction:void 0,m=[],d=[];for(let e of n){if(0===e.instructions.length)continue;let n=[...d,e],i=l?[l,...n]:n;if(d.length<12&&(ea({makeTxVersion:t,innerIns:i,payer:o,lookupTableAddressAccount:a})||ea({makeTxVersion:t,innerIns:n,payer:o,lookupTableAddressAccount:a})))d.push(e);else{let n;if(0===d.length)throw Error(" item ins too big ");if(t===S.V0)for(let e of(n={},[...new Set(d.map(e=>e.lookupTableAddress??[]).flat().map(e=>e.toString()))]))void 0!==a[e]&&(n[e]=a[e]);if(ea({makeTxVersion:t,innerIns:l?[l,...d]:d,payer:o,lookupTableAddressAccount:a})){let e=l?[l,...d]:d;m.push({instructionTypes:e.map(e=>e.instructionTypes).flat(),instructions:e.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:n})}else m.push({instructionTypes:d.map(e=>e.instructionTypes).flat(),instructions:d.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:n});d=[e]}}if(d.length>0){let e;if(t===S.V0)for(let t of(e={},[...new Set(d.map(e=>e.lookupTableAddress??[]).flat().map(e=>e.toString()))]))void 0!==a[t]&&(e[t]=a[t]);if(ea({makeTxVersion:t,innerIns:l?[l,...d]:d,payer:o,lookupTableAddressAccount:a})){let t=l?[l,...d]:d;m.push({instructionTypes:t.map(e=>e.instructionTypes).flat(),instructions:t.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:e})}else m.push({instructionTypes:d.map(e=>e.instructionTypes).flat(),instructions:d.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:e})}return m}function ea({makeTxVersion:e,innerIns:t,payer:n,lookupTableAddressAccount:i}){let r=t.map(e=>e.instructions).flat(),o=[...new Set(t.map(e=>e.signers).flat().map(e=>e.publicKey.toString()))].map(e=>new D.nh(e)),a=t.map(e=>e.lookupTableAddress??[]).flat().map(e=>e.toString()),s={},c=i??{};for(let e of a)void 0!==c[e]&&(s[e]=c[e]);return e===S.V0?function({instructions:e,payer:t,lookupTableAddressAccount:n}){let i=new D.$Z({payerKey:t,recentBlockhash:D.RG.generate().publicKey.toString(),instructions:e}),r=i.compileToV0Message(Object.values(n??{}));try{return j.from(r.serialize()).toString("base64").length<es}catch(e){return!1}}({instructions:r,payer:n,lookupTableAddressAccount:s}):function({instructions:e,payer:t,signers:n}){return et(e,[t,...n])}({instructions:r,payer:n,signers:o})}let es=1644;async function ec({connection:e,address:t}){let n=await $(e,[...new Set(t.map(e=>e.toString()))].map(e=>new D.nh(e))),i={};for(let e=0;e<t.length;e++){let r=n[e],o=t[e];r&&(i[o.toString()]=new D.gw({key:o,state:D.gw.deserialize(r.data)}))}return i}(a=p||(p={}))[a.ROUND_DOWN=0]="ROUND_DOWN",a[a.ROUND_HALF_UP=1]="ROUND_HALF_UP",a[a.ROUND_UP=2]="ROUND_UP";let eu=new(U())(0),el=new(U())(1);new(U())(2),new(U())(3),new(U())(5);let em=new(U())(10),ed=new(U())(100);new(U())(1e3),new(U())(1e4);let ep=M.from("entity/bignumber");function eS(e){return e instanceof U()?e:"string"==typeof e?e.match(/^-?[0-9]+$/)?new(U())(e):ep.throwArgumentError("invalid BigNumberish string","value",e):"number"==typeof e?e%1?ep.throwArgumentError("BigNumberish number underflow","value",e):e>=9007199254740991||e<=-9007199254740991?ep.throwArgumentError("BigNumberish number overflow","value",e):new(U())(String(e)):"bigint"==typeof e?new(U())(e.toString()):ep.throwArgumentError("invalid BigNumberish value","value",e)}function eg(e,t){let n=e.divmod(t);return n.mod.isZero()?n.div:n.div.isNeg()?n.div.isubn(1):n.div.iaddn(1)}let ew={symbol:"SOL",name:"Solana",decimals:9},eA={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}};({...eA});let ef={WSOL:{...eA},BTC:{symbol:"BTC",name:"Bitcoin",mint:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E",decimals:6,extensions:{coingeckoId:"bitcoin"}},ETH:{symbol:"ETH",name:"Ethereum",mint:"2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk",decimals:6,extensions:{coingeckoId:"ethereum"}},USDT:{symbol:"USDT",name:"Tether",mint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",decimals:6,extensions:{coingeckoId:"tether"}},WUSDT:{symbol:"WUSDT",name:"Wrapped USDT",mint:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4",decimals:6,extensions:{coingeckoId:"tether"}},USDC:{symbol:"USDC",name:"USD Coin",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6,extensions:{coingeckoId:"usd-coin"}},WUSDC:{symbol:"WUSDC",name:"Wrapped USDC",mint:"BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW",decimals:6,extensions:{coingeckoId:"usd-coin"}},YFI:{symbol:"YFI",name:"YFI",mint:"3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB",decimals:6,extensions:{coingeckoId:"yearn-finance"}},LINK:{symbol:"LINK",name:"Chainlink",mint:"CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG",decimals:6,extensions:{coingeckoId:"chainlink"}},XRP:{symbol:"XRP",name:"XRP",mint:"Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8",decimals:6,extensions:{coingeckoId:"ripple"}},SUSHI:{symbol:"SUSHI",name:"SUSHI",mint:"AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy",decimals:6,extensions:{coingeckoId:"sushi"}},ALEPH:{symbol:"ALEPH",name:"ALEPH",mint:"CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K",decimals:6,extensions:{coingeckoId:"aleph"}},SXP:{symbol:"SXP",name:"SXP",mint:"SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX",decimals:6,extensions:{coingeckoId:"swipe"}},HGET:{symbol:"HGET",name:"HGET",mint:"BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN",decimals:6,extensions:{coingeckoId:"hedget"}},CREAM:{symbol:"CREAM",name:"CREAM",mint:"5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv",decimals:6,extensions:{coingeckoId:"cream-2"}},UNI:{symbol:"UNI",name:"UNI",mint:"DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw",decimals:6,extensions:{coingeckoId:"uniswap"}},SRM:{symbol:"SRM",name:"Serum",mint:"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",decimals:6,extensions:{coingeckoId:"serum"}},FTT:{symbol:"FTT",name:"FTX Token",mint:"AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3",decimals:6,extensions:{coingeckoId:"ftx-token"}},MSRM:{symbol:"MSRM",name:"MegaSerum",mint:"MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L",decimals:0,extensions:{coingeckoId:"megaserum"}},TOMO:{symbol:"TOMO",name:"TOMO",mint:"GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd",decimals:6,extensions:{coingeckoId:"tomochain"}},KARMA:{symbol:"KARMA",name:"KARMA",mint:"EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX",decimals:4,extensions:{coingeckoId:"karma-dao"}},LUA:{symbol:"LUA",name:"LUA",mint:"EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX",decimals:6,extensions:{coingeckoId:"lua-token"}},MATH:{symbol:"MATH",name:"MATH",mint:"GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza",decimals:6,extensions:{coingeckoId:"math"}},KEEP:{symbol:"KEEP",name:"KEEP",mint:"GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht",decimals:6,extensions:{coingeckoId:"keep-network"}},SWAG:{symbol:"SWAG",name:"SWAG",mint:"9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy",decimals:6,extensions:{coingeckoId:"swag-finance"}},FIDA:{symbol:"FIDA",name:"Bonfida",mint:"EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp",decimals:6,extensions:{coingeckoId:"bonfida"}},KIN:{symbol:"KIN",name:"Kin",mint:"kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6",decimals:5,extensions:{coingeckoId:"kin"}},MAPS:{symbol:"MAPS",name:"MAPS",mint:"MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb",decimals:6,extensions:{coingeckoId:"maps"}},OXY:{symbol:"OXY",name:"Oxygen",mint:"z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M",decimals:6,extensions:{coingeckoId:"oxygen"}},RAY:{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,extensions:{coingeckoId:"raydium"}},xCOPE:{symbol:"xCOPE",name:"xCOPE",mint:"3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE",decimals:0,extensions:{coingeckoId:"cope"}},COPE:{symbol:"COPE",name:"Cope",mint:"8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh",decimals:6,extensions:{coingeckoId:"cope"}},STEP:{symbol:"STEP",name:"Step Finance",mint:"StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT",decimals:9,extensions:{coingeckoId:"step-finance"}},MEDIA:{symbol:"MEDIA",name:"Media Network",mint:"ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs",decimals:6,extensions:{coingeckoId:"media-network"}},ROPE:{symbol:"ROPE",name:"Rope Token",mint:"8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo",decimals:9,extensions:{coingeckoId:"rope-token"}},MER:{symbol:"MER",name:"Mercurial",mint:"MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K",decimals:6,extensions:{coingeckoId:"mercurial"}},TULIP:{symbol:"TULIP",name:"Tulip Protocol",mint:"TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs",decimals:6,extensions:{coingeckoId:"solfarm"}},SNY:{symbol:"SNY",name:"SNY",mint:"4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y",decimals:6,extensions:{coingeckoId:"synthetify-token"}},SLRS:{symbol:"SLRS",name:"SLRS",mint:"SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr",decimals:6,extensions:{coingeckoId:"solrise-finance"}},WOO:{symbol:"WOO",name:"WOO Network",mint:"E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy",decimals:6,extensions:{coingeckoId:"woo-network"}},BOP:{symbol:"BOP",name:"Boring Protocol",mint:"BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3",decimals:8,extensions:{coingeckoId:"boring-protocol"}},SAMO:{symbol:"SAMO",name:"Samoyedcoin",mint:"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",decimals:9,extensions:{coingeckoId:"samoyedcoin"}},renBTC:{symbol:"renBTC",name:"renBTC",mint:"CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5",decimals:8,extensions:{coingeckoId:"renbtc"}},renDOGE:{symbol:"renDOGE",name:"renDOGE",mint:"ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU",decimals:8,extensions:{coingeckoId:"rendoge"}},LIKE:{symbol:"LIKE",name:"Only1",mint:"3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR",decimals:9,extensions:{coingeckoId:"only1"}},DXL:{symbol:"DXL",name:"Dexlab",mint:"GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z",decimals:6,extensions:{coingeckoId:"dexlab"}},mSOL:{symbol:"mSOL",name:"Marinade staked SOL",mint:"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So",decimals:9,extensions:{coingeckoId:"msol"}},PAI:{symbol:"PAI",name:"Parrot USD",mint:"Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS",decimals:6,extensions:{coingeckoId:"parrot-usd"}},PORT:{symbol:"PORT",name:"Port Finance",mint:"PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y",decimals:6,extensions:{coingeckoId:"port-finance"}},MNGO:{symbol:"MNGO",name:"Mango",mint:"MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac",decimals:6,extensions:{coingeckoId:"mango-markets"}},CRP:{symbol:"CRP",name:"CropperFinance",mint:"DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz",decimals:9,extensions:{coingeckoId:"cropperfinance"}},ATLAS:{symbol:"ATLAS",name:"Star Atlas",mint:"ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",decimals:8,extensions:{coingeckoId:"star-atlas"}},POLIS:{symbol:"POLIS",name:"Star Atlas DAO",mint:"poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",decimals:8,extensions:{coingeckoId:"star-atlas-dao"}},GRAPE:{symbol:"GRAPE",name:"Grape Protocol",mint:"8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA",decimals:6,extensions:{coingeckoId:"grape-2"}},GENE:{symbol:"GENE",name:"Genopets",mint:"GENEtH5amGSi8kHAtQoezp1XEXwZJ8vcuePYnXdKrMYz",decimals:9,extensions:{coingeckoId:"genopets"}},DFL:{symbol:"DFL",name:"DeFi Land",mint:"DFL1zNkaGPWm1BqAVqRjCZvHmwTFrEaJtbzJWgseoNJh",decimals:9,extensions:{coingeckoId:"defi-land"}},CHEEMS:{symbol:"CHEEMS",name:"Cheems",mint:"3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc",decimals:4,extensions:{coingeckoId:"cheems"}},stSOL:{symbol:"stSOL",name:"Lido Staked SOL",mint:"7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj",decimals:9,extensions:{coingeckoId:"lido-staked-sol"}},LARIX:{symbol:"LARIX",name:"Larix",mint:"Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC",decimals:6,extensions:{coingeckoId:"larix"}},RIN:{symbol:"RIN",name:"Aldrin",mint:"E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp",decimals:9,extensions:{coingeckoId:"aldrin"}},APEX:{symbol:"APEX",name:"ApeXit Finance",mint:"51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg",decimals:9,extensions:{coingeckoId:"apexit-finance"}},MNDE:{symbol:"MNDE",name:"Marinade",mint:"MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey",decimals:9,extensions:{coingeckoId:"marinade"}},LIQ:{symbol:"LIQ",name:"LIQ Protocol",mint:"4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj",decimals:6,extensions:{coingeckoId:"liq-protocol"}},WAG:{symbol:"WAG",name:"Waggle Network",mint:"5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E",decimals:9,extensions:{coingeckoId:"waggle-network"}},wLDO:{symbol:"wLDO",name:"wLDO",mint:"HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p",decimals:8,extensions:{}},SLIM:{symbol:"SLIM",name:"Solanium",mint:"xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW",decimals:6,extensions:{coingeckoId:"solanium"}},PRT:{symbol:"PRT",name:"Parrot Protocol",mint:"PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44",decimals:6,extensions:{coingeckoId:"parrot-protocol"}},SBR:{symbol:"SBR",name:"SBR",mint:"Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1",decimals:6,extensions:{}},FAB:{symbol:"FAB",name:"Fabric",mint:"EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96",decimals:9,extensions:{coingeckoId:"fabric"}},ABR:{symbol:"ABR",name:"Allbridge",mint:"a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp",decimals:9,extensions:{coingeckoId:"allbridge"}},IVN:{symbol:"IVN",name:"Investin",mint:"iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a",decimals:6,extensions:{coingeckoId:"investin"}},CYS:{symbol:"CYS",name:"Cyclos",mint:"BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg",decimals:6,extensions:{coingeckoId:"cyclos"}},FRKT:{symbol:"FRKT",name:"FRAKT Token",mint:"ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj",decimals:8,extensions:{coingeckoId:"frakt-token"}},AURY:{symbol:"AURY",name:"Aurory",mint:"AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP",decimals:9,extensions:{coingeckoId:"aurory"}},SYP:{symbol:"SYP",name:"Sypool",mint:"FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ",decimals:9,extensions:{coingeckoId:"sypool"}},WOOF:{symbol:"WOOF",name:"WOOF",mint:"9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE",decimals:6,extensions:{coingeckoId:"woof-token"}},ORCA:{symbol:"ORCA",name:"Orca",mint:"orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE",decimals:6,extensions:{coingeckoId:"orca"}},SLND:{symbol:"SLND",name:"Solend",mint:"SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp",decimals:6,extensions:{coingeckoId:"solend"}},weWETH:{symbol:"weWETH",name:"weWETH",mint:"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs",decimals:8,extensions:{}},weUNI:{symbol:"weUNI",name:"weUNI",mint:"8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36",decimals:8,extensions:{}},weSUSHI:{symbol:"weSUSHI",name:"weSUSHI",mint:"ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj",decimals:8,extensions:{}},GOFX:{symbol:"GOFX",name:"GooseFX",mint:"GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD",decimals:9,extensions:{coingeckoId:"goosefx"}},IN:{symbol:"IN",name:"Invictus",mint:"inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY",decimals:9,extensions:{coingeckoId:"invictus"}},weDYDX:{symbol:"weDYDX",name:"weDYDX",mint:"4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU",decimals:8,extensions:{}},STARS:{symbol:"STARS",name:"StarLaunch",mint:"HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW",decimals:6,extensions:{coingeckoId:"starlaunch"}},weAXS:{symbol:"weAXS",name:"weAXS",mint:"HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5",decimals:8,extensions:{}},weSHIB:{symbol:"weSHIB",name:"weSHIB",mint:"CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z",decimals:8,extensions:{}},OXS:{symbol:"OXS",name:"Oxbull Solana",mint:"4TGxgCSJQx2GQk9oHZ8dC5m3JNXTYZHjXumKAW3vLnNx",decimals:9,extensions:{coingeckoId:"oxbull-solana"}},CWAR:{symbol:"CWAR",name:"Cryowar",mint:"HfYFjMKNZygfMC8LsQ8LtpPsPxEJoXJx4M6tqi75Hajo",decimals:9,extensions:{coingeckoId:"cryowar-token"}},UPS:{symbol:"UPS",name:"UPFI Network",mint:"EwJN2GqUGXXzYmoAciwuABtorHczTA5LqbukKXV1viH7",decimals:6,extensions:{coingeckoId:"upfi-network"}},weSAND:{symbol:"weSAND",name:"weSAND",mint:"49c7WuCZkQgc3M4qH8WuEUNXfgwupZf1xqWkDQ7gjRGt",decimals:8,extensions:{}},weMANA:{symbol:"weMANA",name:"weMANA",mint:"7dgHoN8wBZCc5wbnQ2C47TDnBMAxG4Q5L3KjP67z8kNi",decimals:8,extensions:{}},CAVE:{symbol:"CAVE",name:"Crypto Cavemen",mint:"4SZjjNABoqhbd4hnapbvoEPEqT8mnNkfbEoAwALf1V8t",decimals:6,extensions:{coingeckoId:"cave"}},JSOL:{symbol:"JSOL",name:"JPool",mint:"7Q2afV64in6N6SeZsAAB81TJzwDoD6zpqmHkzi9Dcavn",decimals:9,extensions:{coingeckoId:"jpool"}},APT:{symbol:"APT",name:"Apricot",mint:"APTtJyaRX5yGTsJU522N4VYWg3vCvSb65eam5GrPT5Rt",decimals:6,extensions:{coingeckoId:"apricot"}},SONAR:{symbol:"SONAR",name:"SonarWatch",mint:"sonarX4VtVkQemriJeLm6CKeW3GDMyiBnnAEMw1MRAE",decimals:9,extensions:{coingeckoId:"sonarwatch"}},SHILL:{symbol:"SHILL",name:"SHILL Token",mint:"6cVgJUqo4nmvQpbgrDZwyfd6RwWw5bfnCamS3M9N1fd",decimals:6,extensions:{coingeckoId:"shill-token"}},TTT:{symbol:"TTT",name:"TabTrader",mint:"FNFKRV3V8DtA3gVJN6UshMiLGYA8izxFwkNWmJbFjmRj",decimals:6,extensions:{coingeckoId:"tabtrader"}},BOKU:{symbol:"BOKU",name:"Boryoku Dragonz",mint:"CN7qFa5iYkHz99PTctvT4xXUHnxwjQ5MHxCuTJtPN5uS",decimals:9,extensions:{coingeckoId:"boku"}},MIMO:{symbol:"MIMO",name:"Million Monke",mint:"9TE7ebz1dsFo1uQ2T4oYAKSm39Y6fWuHrd6Uk6XaiD16",decimals:9,extensions:{coingeckoId:"million-monke"}},wbWBNB:{symbol:"wbWBNB",name:"wbWBNB",mint:"9gP2kCy3wA1ctvYWQk75guqXuHfrEomqydHLtcTCqiLa",decimals:8,extensions:{}},wePEOPLE:{symbol:"wePEOPLE",name:"wePEOPLE",mint:"CobcsUrt3p91FwvULYKorQejgsm5HoQdv5T8RUZ6PnLA",decimals:8,extensions:{}},XTAG:{symbol:"XTAG",name:"xHashtag",mint:"5gs8nf4wojB5EXgDUWNLwXpknzgV2YWDhveAeBZpVLbp",decimals:6,extensions:{coingeckoId:"xhashtag"}},KKO:{symbol:"KKO",name:"Kineko",mint:"kiNeKo77w1WBEzFFCXrTDRWGRWGP8yHvKC9rX6dqjQh",decimals:9,extensions:{coingeckoId:"kineko"}},VI:{symbol:"VI",name:"Vybit",mint:"7zBWymxbZt7PVHQzfi3i85frc1YRiQc23K7bh3gos8ZC",decimals:9,extensions:{coingeckoId:"vybit"}},SOLC:{symbol:"SOLC",name:"Solcubator",mint:"Bx1fDtvTN6NvE4kjdPHQXtmGSg582bZx9fGy4DQNMmAT",decimals:9,extensions:{coingeckoId:"solcubator"}},STR:{symbol:"STR",name:"Solster",mint:"9zoqdwEBKWEi9G5Ze8BSkdmppxGgVv1Kw4LuigDiNr9m",decimals:9,extensions:{coingeckoId:"solster"}},SPWN:{symbol:"SPWN",name:"Bitspawn",mint:"5U9QqCPhqXAJcEv9uyzFJd5zhN93vuPk1aNNkXnUfPnt",decimals:9,extensions:{coingeckoId:"bitspawn"}},ISOLA:{symbol:"ISOLA",name:"Intersola",mint:"333iHoRM2Awhf9uVZtSyTfU8AekdGrgQePZsKMFPgKmS",decimals:6,extensions:{coingeckoId:"intersola"}},RUN:{symbol:"RUN",name:"Run",mint:"6F9XriABHfWhit6zmMUYAQBSy6XK5VF1cHXuW5LDpRtC",decimals:9,extensions:{coingeckoId:"run"}},REAL:{symbol:"REAL",name:"Realy Metaverse",mint:"AD27ov5fVU2XzwsbvnFvb1JpCBaCB5dRXrczV9CqSVGb",decimals:9,extensions:{coingeckoId:"realy-metaverse"}},CRWNY:{symbol:"CRWNY",name:"CRWNY",mint:"CRWNYkqdgvhGGae9CKfNka58j6QQkaD5bLhKXvUYqnc1",decimals:6,extensions:{}},BLOCK:{symbol:"BLOCK",name:"Blockasset",mint:"NFTUkR4u7wKxy9QLaX2TGvd9oZSWoMo4jqSJqdMb7Nk",decimals:6,extensions:{coingeckoId:"blockasset"}},SOLAR:{symbol:"SOLAR",name:"Solar",mint:"2wmKXX1xsxLfrvjEPrt2UHiqj8Gbzwxvffr9qmNjsw8g",decimals:9,extensions:{coingeckoId:"solar"}},BASIS:{symbol:"BASIS",name:"basis.markets",mint:"Basis9oJw9j8cw53oMV7iqsgo6ihi9ALw4QR31rcjUJa",decimals:6,extensions:{coingeckoId:"basis-markets"}},SOLX:{symbol:"SOLX",name:"Soldex",mint:"CH74tuRLTYcxG7qNJCsV9rghfLXJCQJbsu7i52a8F1Gn",decimals:9,extensions:{coingeckoId:"soldex"}},CHICKS:{symbol:"CHICKS",name:"SolChicks Token",mint:"cxxShYRVcepDudXhe7U62QHvw8uBJoKFifmzggGKVC2",decimals:9,extensions:{coingeckoId:"solchicks-token"}},GST:{symbol:"GST",name:"GST",mint:"AFbX8oGjGpmVFywbVouvhQSRmiW2aR1mohfahi4Y2AdB",decimals:9,extensions:{coingeckoId:"gst"}},MBS:{symbol:"MBS",name:"MonkeyBall",mint:"Fm9rHUTF5v3hwMLbStjZXqNBBoZyGriQaFM6sTFz3K8A",decimals:6,extensions:{coingeckoId:"monkeyball"}},PRISM:{symbol:"PRISM",name:"Prism",mint:"PRSMNsEPqhGVCH1TtWiJqPjJyh2cKrLostPZTNy1o5x",decimals:6,extensions:{coingeckoId:"prism"}},MEAN:{symbol:"MEAN",name:"Meanfi",mint:"MEANeD3XDdUmNMsRGjASkSWdC8prLYsoRJ61pPeHctD",decimals:6,extensions:{coingeckoId:"meanfi"}},TINY:{symbol:"TINY",name:"Tiny Colony",mint:"HKfs24UEDQpHS5hUyKYkHd9q7GY5UQ679q2bokeL2whu",decimals:6,extensions:{coingeckoId:"tiny-colony"}},SHDW:{symbol:"SHDW",name:"GenesysGo Shadow",mint:"SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y",decimals:9,extensions:{coingeckoId:"genesysgo-shadow"}},SCY:{symbol:"SCY",name:"Synchrony",mint:"SCYfrGCw8aDiqdgcpdGjV6jp4UVVQLuphxTDLNWu36f",decimals:9,extensions:{coingeckoId:"synchrony"}},SLC:{symbol:"SLC",name:"Solice",mint:"METAmTMXwdb8gYzyCPfXXFmZZw4rUsXX58PNsDg7zjL",decimals:6,extensions:{coingeckoId:"solice"}}},ey={FIDA_RAY_V4:{symbol:"FIDA-RAY",name:"FIDA-RAY V4 LP",mint:"DsBuznXRTmzvEdb36Dx3aVLVo1XmH7r1PRZUFugLPTFv",base:ef.FIDA,quote:ef.RAY,decimals:ef.FIDA.decimals,version:4},OXY_RAY_V4:{symbol:"OXY-RAY",name:"OXY-RAY V4 LP",mint:"FwaX9W7iThTZH5MFeasxdLpxTVxRcM7ZHieTCnYog8Yb",base:ef.OXY,quote:ef.RAY,decimals:ef.OXY.decimals,version:4},MAPS_RAY_V4:{symbol:"MAPS-RAY",name:"MAPS-RAY V4 LP",mint:"CcKK8srfVdTSsFGV3VLBb2YDbzF4T4NM2C3UEjC39RLP",base:ef.MAPS,quote:ef.RAY,decimals:ef.MAPS.decimals,version:4},KIN_RAY_V4:{symbol:"KIN-RAY",name:"KIN-RAY V4 LP",mint:"CHT8sft3h3gpLYbCcZ9o27mT5s3Z6VifBVbUiDvprHPW",base:ef.KIN,quote:ef.RAY,decimals:6,version:4},RAY_USDT_V4:{symbol:"RAY-USDT",name:"RAY-USDT V4 LP",mint:"C3sT1R3nsw4AVdepvLTLKr5Gvszr7jufyBWUCvy4TUvT",base:ef.RAY,quote:ef.USDT,decimals:ef.RAY.decimals,version:4},SOL_USDC_V4:{symbol:"SOL-USDC",name:"SOL-USDC V4 LP",mint:"8HoQnePLqPj4M7PUDzfw8e3Ymdwgc7NLGnaTUapubyvu",base:ef.WSOL,quote:ef.USDC,decimals:ef.WSOL.decimals,version:4},YFI_USDC_V4:{symbol:"YFI-USDC",name:"YFI-USDC V4 LP",mint:"865j7iMmRRycSYUXzJ33ZcvLiX9JHvaLidasCyUyKaRE",base:ef.YFI,quote:ef.USDC,decimals:ef.YFI.decimals,version:4},SRM_USDC_V4:{symbol:"SRM-USDC",name:"SRM-USDC V4 LP",mint:"9XnZd82j34KxNLgQfz29jGbYdxsYznTWRpvZE3SRE7JG",base:ef.SRM,quote:ef.USDC,decimals:ef.SRM.decimals,version:4},FTT_USDC_V4:{symbol:"FTT-USDC",name:"FTT-USDC V4 LP",mint:"75dCoKfUHLUuZ4qEh46ovsxfgWhB4icc3SintzWRedT9",base:ef.FTT,quote:ef.USDC,decimals:ef.FTT.decimals,version:4},BTC_USDC_V4:{symbol:"BTC-USDC",name:"BTC-USDC V4 LP",mint:"2hMdRdVWZqetQsaHG8kQjdZinEMBz75vsoWTCob1ijXu",base:ef.BTC,quote:ef.USDC,decimals:ef.BTC.decimals,version:4},SUSHI_USDC_V4:{symbol:"SUSHI-USDC",name:"SUSHI-USDC V4 LP",mint:"2QVjeR9d2PbSf8em8NE8zWd8RYHjFtucDUdDgdbDD2h2",base:ef.SUSHI,quote:ef.USDC,decimals:ef.SUSHI.decimals,version:4},TOMO_USDC_V4:{symbol:"TOMO-USDC",name:"TOMO-USDC V4 LP",mint:"CHyUpQFeW456zcr5XEh4RZiibH8Dzocs6Wbgz9aWpXnQ",base:ef.TOMO,quote:ef.USDC,decimals:ef.TOMO.decimals,version:4},LINK_USDC_V4:{symbol:"LINK-USDC",name:"LINK-USDC V4 LP",mint:"BqjoYjqKrXtfBKXeaWeAT5sYCy7wsAYf3XjgDWsHSBRs",base:ef.LINK,quote:ef.USDC,decimals:ef.LINK.decimals,version:4},ETH_USDC_V4:{symbol:"ETH-USDC",name:"ETH-USDC V4 LP",mint:"13PoKid6cZop4sj2GfoBeujnGfthUbTERdE5tpLCDLEY",base:ef.ETH,quote:ef.USDC,decimals:ef.ETH.decimals,version:4},xCOPE_USDC_V4:{symbol:"xCOPE-USDC",name:"xCOPE-USDC V4 LP",mint:"2Vyyeuyd15Gp8aH6uKE72c4hxc8TVSLibxDP9vzspQWG",base:ef.xCOPE,quote:ef.USDC,decimals:ef.xCOPE.decimals,version:4},SOL_USDT_V4:{symbol:"SOL-USDT",name:"SOL-USDT V4 LP",mint:"Epm4KfTj4DMrvqn6Bwg2Tr2N8vhQuNbuK8bESFp4k33K",base:ef.WSOL,quote:ef.USDT,decimals:ef.WSOL.decimals,version:4},YFI_USDT_V4:{symbol:"YFI-USDT",name:"YFI-USDT V4 LP",mint:"FA1i7fej1pAbQbnY8NbyYUsTrWcasTyipKreDgy1Mgku",base:ef.YFI,quote:ef.USDT,decimals:ef.YFI.decimals,version:4},SRM_USDT_V4:{symbol:"SRM-USDT",name:"SRM-USDT V4 LP",mint:"HYSAu42BFejBS77jZAZdNAWa3iVcbSRJSzp3wtqCbWwv",base:ef.SRM,quote:ef.USDT,decimals:ef.SRM.decimals,version:4},FTT_USDT_V4:{symbol:"FTT-USDT",name:"FTT-USDT V4 LP",mint:"2cTCiUnect5Lap2sk19xLby7aajNDYseFhC9Pigou11z",base:ef.FTT,quote:ef.USDT,decimals:ef.FTT.decimals,version:4},BTC_USDT_V4:{symbol:"BTC-USDT",name:"BTC-USDT V4 LP",mint:"DgGuvR9GSHimopo3Gc7gfkbKamLKrdyzWkq5yqA6LqYS",base:ef.BTC,quote:ef.USDT,decimals:ef.BTC.decimals,version:4},SUSHI_USDT_V4:{symbol:"SUSHI-USDT",name:"SUSHI-USDT V4 LP",mint:"Ba26poEYDy6P2o95AJUsewXgZ8DM9BCsmnU9hmC9i4Ki",base:ef.SUSHI,quote:ef.USDT,decimals:ef.SUSHI.decimals,version:4},TOMO_USDT_V4:{symbol:"TOMO-USDT",name:"TOMO-USDT V4 LP",mint:"D3iGro1vn6PWJXo9QAPj3dfta6dKkHHnmiiym2EfsAmi",base:ef.TOMO,quote:ef.USDT,decimals:ef.TOMO.decimals,version:4},LINK_USDT_V4:{symbol:"LINK-USDT",name:"LINK-USDT V4 LP",mint:"Dr12Sgt9gkY8WU5tRkgZf1TkVWJbvjYuPAhR3aDCwiiX",base:ef.LINK,quote:ef.USDT,decimals:ef.LINK.decimals,version:4},ETH_USDT_V4:{symbol:"ETH-USDT",name:"ETH-USDT V4 LP",mint:"nPrB78ETY8661fUgohpuVusNCZnedYCgghzRJzxWnVb",base:ef.ETH,quote:ef.USDT,decimals:ef.ETH.decimals,version:4},YFI_SRM_V4:{symbol:"YFI-SRM",name:"YFI-SRM V4 LP",mint:"EGJht91R7dKpCj8wzALkjmNdUUUcQgodqWCYweyKcRcV",base:ef.YFI,quote:ef.SRM,decimals:ef.YFI.decimals,version:4},FTT_SRM_V4:{symbol:"FTT-SRM",name:"FTT-SRM V4 LP",mint:"AsDuPg9MgPtt3jfoyctUCUgsvwqAN6RZPftqoeiPDefM",base:ef.FTT,quote:ef.SRM,decimals:ef.FTT.decimals,version:4},BTC_SRM_V4:{symbol:"BTC-SRM",name:"BTC-SRM V4 LP",mint:"AGHQxXb3GSzeiLTcLtXMS2D5GGDZxsB2fZYZxSB5weqB",base:ef.BTC,quote:ef.SRM,decimals:ef.BTC.decimals,version:4},SUSHI_SRM_V4:{symbol:"SUSHI-SRM",name:"SUSHI-SRM V4 LP",mint:"3HYhUnUdV67j1vn8fu7ExuVGy5dJozHEyWvqEstDbWwE",base:ef.SUSHI,quote:ef.SRM,decimals:ef.SUSHI.decimals,version:4},TOMO_SRM_V4:{symbol:"TOMO-SRM",name:"TOMO-SRM V4 LP",mint:"GgH9RnKrQpaMQeqmdbMvs5oo1A24hERQ9wuY2pSkeG7x",base:ef.TOMO,quote:ef.SRM,decimals:ef.TOMO.decimals,version:4},LINK_SRM_V4:{symbol:"LINK-SRM",name:"LINK-SRM V4 LP",mint:"GXN6yJv12o18skTmJXaeFXZVY1iqR18CHsmCT8VVCmDD",base:ef.LINK,quote:ef.SRM,decimals:ef.LINK.decimals,version:4},ETH_SRM_V4:{symbol:"ETH-SRM",name:"ETH-SRM V4 LP",mint:"9VoY3VERETuc2FoadMSYYizF26mJinY514ZpEzkHMtwG",base:ef.ETH,quote:ef.SRM,decimals:ef.ETH.decimals,version:4},SRM_SOL_V4:{symbol:"SRM-SOL",name:"SRM-SOL V4 LP",mint:"AKJHspCwDhABucCxNLXUSfEzb7Ny62RqFtC9uNjJi4fq",base:ef.SRM,quote:ef.WSOL,decimals:ef.SRM.decimals,version:4},STEP_USDC_V4:{symbol:"STEP-USDC",name:"STEP-USDC V4 LP",mint:"3k8BDobgihmk72jVmXYLE168bxxQUhqqyESW4dQVktqC",base:ef.STEP,quote:ef.USDC,decimals:ef.STEP.decimals,version:4},MEDIA_USDC_V4:{symbol:"MEDIA-USDC",name:"MEDIA-USDC V4 LP",mint:"A5zanvgtioZGiJMdEyaKN4XQmJsp1p7uVxaq2696REvQ",base:ef.MEDIA,quote:ef.USDC,decimals:ef.MEDIA.decimals,version:4},ROPE_USDC_V4:{symbol:"ROPE-USDC",name:"ROPE-USDC V4 LP",mint:"Cq4HyW5xia37tKejPF2XfZeXQoPYW6KfbPvxvw5eRoUE",base:ef.ROPE,quote:ef.USDC,decimals:ef.ROPE.decimals,version:4},MER_USDC_V4:{symbol:"MER-USDC",name:"MER-USDC V4 LP",mint:"3H9NxvaZoxMZZDZcbBDdWMKbrfNj7PCF5sbRwDr7SdDW",base:ef.MER,quote:ef.USDC,decimals:ef.MER.decimals,version:4},COPE_USDC_V4:{symbol:"COPE-USDC",name:"COPE-USDC V4 LP",mint:"Cz1kUvHw98imKkrqqu95GQB9h1frY8RikxPojMwWKGXf",base:ef.COPE,quote:ef.USDC,decimals:ef.COPE.decimals,version:4},ALEPH_USDC_V4:{symbol:"ALEPH-USDC",name:"ALEPH-USDC V4 LP",mint:"iUDasAP2nXm5wvTukAHEKSdSXn8vQkRtaiShs9ceGB7",base:ef.ALEPH,quote:ef.USDC,decimals:ef.ALEPH.decimals,version:4},TULIP_USDC_V4:{symbol:"TULIP-USDC",name:"TULIP-USDC V4 LP",mint:"2doeZGLJyACtaG9DCUyqMLtswesfje1hjNA11hMdj6YU",base:ef.TULIP,quote:ef.USDC,decimals:ef.TULIP.decimals,version:4},WOO_USDC_V4:{symbol:"WOO-USDC",name:"WOO-USDC V4 LP",mint:"7cu42ao8Jgrd5A3y3bNQsCxq5poyGZNmTydkGfJYQfzh",base:ef.WOO,quote:ef.USDC,decimals:ef.WOO.decimals,version:4},SNY_USDC_V4:{symbol:"SNY-USDC",name:"SNY-USDC V4 LP",mint:"G8qcfeFqxwbCqpxv5LpLWxUCd1PyMB5nWb5e5YyxLMKg",base:ef.SNY,quote:ef.USDC,decimals:ef.SNY.decimals,version:4},BOP_RAY_V4:{symbol:"BOP-RAY",name:"BOP-RAY V4 LP",mint:"9nQPYJvysyfnXhQ6nkK5V7sZG26hmDgusfdNQijRk5LD",base:ef.BOP,quote:ef.RAY,decimals:ef.BOP.decimals,version:4},SLRS_USDC_V4:{symbol:"SLRS-USDC",name:"SLRS-USDC V4 LP",mint:"2Xxbm1hdv5wPeen5ponDSMT3VqhGMTQ7mH9stNXm9shU",base:ef.SLRS,quote:ef.USDC,decimals:ef.SLRS.decimals,version:4},SAMO_RAY_V4:{symbol:"SAMO-RAY",name:"SAMO-RAY V4 LP",mint:"HwzkXyX8B45LsaHXwY8su92NoRBS5GQC32HzjQRDqPnr",base:ef.SAMO,quote:ef.RAY,decimals:ef.SAMO.decimals,version:4},renBTC_USDC_V4:{symbol:"renBTC-USDC",name:"renBTC-USDC V4 LP",mint:"CTEpsih91ZLo5gunvryLpJ3pzMjmt5jbS6AnSQrzYw7V",base:ef.renBTC,quote:ef.USDC,decimals:ef.renBTC.decimals,version:4},renDOGE_USDC_V4:{symbol:"renDOGE-USDC",name:"renDOGE-USDC V4 LP",mint:"Hb8KnZNKvRxu7pgMRWJgoMSMcepfvNiBFFDDrdf9o3wA",base:ef.renDOGE,quote:ef.USDC,decimals:ef.renDOGE.decimals,version:4},RAY_USDC_V4:{symbol:"RAY-USDC",name:"RAY-USDC V4 LP",mint:"FbC6K13MzHvN42bXrtGaWsvZY9fxrackRSZcBGfjPc7m",base:ef.RAY,quote:ef.USDC,decimals:ef.RAY.decimals,version:4},RAY_SRM_V4:{symbol:"RAY-SRM",name:"RAY-SRM V4 LP",mint:"7P5Thr9Egi2rvMmEuQkLn8x8e8Qro7u2U7yLD2tU2Hbe",base:ef.RAY,quote:ef.SRM,decimals:ef.RAY.decimals,version:4},RAY_ETH_V4:{symbol:"RAY-ETH",name:"RAY-ETH V4 LP",mint:"mjQH33MqZv5aKAbKHi8dG3g3qXeRQqq1GFcXceZkNSr",base:ef.RAY,quote:ef.ETH,decimals:ef.RAY.decimals,version:4},RAY_SOL_V4:{symbol:"RAY-SOL",name:"RAY-SOL V4 LP",mint:"89ZKE4aoyfLBe2RuV6jM3JGNhaV18Nxh8eNtjRcndBip",base:ef.RAY,quote:ef.WSOL,decimals:ef.RAY.decimals,version:4},DXL_USDC_V4:{symbol:"DXL-USDC",name:"DXL-USDC V4 LP",mint:"4HFaSvfgskipvrzT1exoVKsUZ174JyExEsA8bDfsAdY5",base:ef.DXL,quote:ef.USDC,decimals:ef.DXL.decimals,version:4},LIKE_USDC_V4:{symbol:"LIKE-USDC",name:"LIKE-USDC V4 LP",mint:"cjZmbt8sJgaoyWYUttomAu5LJYU44ZrcKTbzTSEPDVw",base:ef.LIKE,quote:ef.USDC,decimals:ef.LIKE.decimals,version:4},mSOL_USDC_V4:{symbol:"mSOL-USDC",name:"mSOL-USDC V4 LP",mint:"4xTpJ4p76bAeggXoYywpCCNKfJspbuRzZ79R7pRhbqSf",base:ef.mSOL,quote:ef.USDC,decimals:ef.mSOL.decimals,version:4},mSOL_SOL_V4:{symbol:"mSOL-SOL",name:"mSOL-SOL V4 LP",mint:"5ijRoAHVgd5T5CNtK5KDRUBZ7Bffb69nktMj5n6ks6m4",base:ef.mSOL,quote:ef.WSOL,decimals:ef.mSOL.decimals,version:4},MER_PAI_V4:{symbol:"MER-PAI",name:"MER-PAI V4 LP",mint:"DU5RT2D9EviaSmX6Ta8MZwMm85HwSEqGMRdqUiuCGfmD",base:ef.MER,quote:ef.PAI,decimals:ef.MER.decimals,version:4},PORT_USDC_V4:{symbol:"PORT-USDC",name:"PORT-USDC V4 LP",mint:"9tmNtbUCrLS15qC4tEfr5NNeqcqpZ4uiGgi2vS5CLQBS",base:ef.PORT,quote:ef.USDC,decimals:ef.PORT.decimals,version:4},MNGO_USDC_V4:{symbol:"MNGO-USDC",name:"MNGO-USDC V4 LP",mint:"DkiqCQ792n743xjWQVCbBUaVtkdiuvQeYndM53ReWnCC",base:ef.MNGO,quote:ef.USDC,decimals:ef.MNGO.decimals,version:4},ATLAS_USDC_V4:{symbol:"ATLAS-USDC",name:"ATLAS-USDC V4 LP",mint:"9shGU9f1EsxAbiR567MYZ78WUiS6ZNCYbHe53WUULQ7n",base:ef.ATLAS,quote:ef.USDC,decimals:ef.ATLAS.decimals,version:4},POLIS_USDC_V4:{symbol:"POLIS-USDC",name:"POLIS-USDC V4 LP",mint:"8MbKSBpyXs8fVneKgt71jfHrn5SWtX8n4wMLpiVfF9So",base:ef.POLIS,quote:ef.USDC,decimals:ef.POLIS.decimals,version:4},ATLAS_RAY_V4:{symbol:"ATLAS-RAY",name:"ATLAS-RAY V4 LP",mint:"418MFhkaYQtbn529wmjLLqL6uKxDz7j4eZBaV1cobkyd",base:ef.ATLAS,quote:ef.RAY,decimals:ef.ATLAS.decimals,version:4},POLIS_RAY_V4:{symbol:"POLIS-RAY",name:"POLIS-RAY V4 LP",mint:"9ysGKUH6WqzjQEUT4dxqYCUaFNVK9QFEa24pGzjFq8xg",base:ef.POLIS,quote:ef.RAY,decimals:ef.POLIS.decimals,version:4},ALEPH_RAY_V4:{symbol:"ALEPH-RAY",name:"ALEPH-RAY V4 LP",mint:"n76skjqv4LirhdLok2zJELXNLdRpYDgVJQuQFbamscy",base:ef.ALEPH,quote:ef.RAY,decimals:ef.ALEPH.decimals,version:4},TULIP_RAY_V4:{symbol:"TULIP-RAY",name:"TULIP-RAY V4 LP",mint:"3AZTviji5qduMG2s4FfWGR3SSQmNUCyx8ao6UKCPg3oJ",base:ef.TULIP,quote:ef.RAY,decimals:ef.TULIP.decimals,version:4},SLRS_RAY_V4:{symbol:"SLRS-RAY",name:"SLRS-RAY V4 LP",mint:"2pk78vsKT3jfJAcN2zbpMUnrR57SZrxHqaZYyFgp92mM",base:ef.SLRS,quote:ef.RAY,decimals:ef.SLRS.decimals,version:4},MER_RAY_V4:{symbol:"MER-RAY",name:"MER-RAY V4 LP",mint:"214hxy3AbKoaEKgqcg2aC1cP5R67cGGAyDEg5GDwC7Ub",base:ef.MER,quote:ef.RAY,decimals:ef.MER.decimals,version:4},MEDIA_RAY_V4:{symbol:"MEDIA-RAY",name:"MEDIA-RAY V4 LP",mint:"9Aseg5A1JD1yCiFFdDaNNxCiJ7XzrpZFmcEmLjXFdPaH",base:ef.MEDIA,quote:ef.RAY,decimals:ef.MEDIA.decimals,version:4},SNY_RAY_V4:{symbol:"SNY-RAY",name:"SNY-RAY V4 LP",mint:"2k4quTuuLUxrSEhFH99qcoZzvgvVEc3b5sz3xz3qstfS",base:ef.SNY,quote:ef.RAY,decimals:ef.SNY.decimals,version:4},LIKE_RAY_V4:{symbol:"LIKE-RAY",name:"LIKE-RAY V4 LP",mint:"7xqDycbFSCpUpzkYapFeyPJWPwEpV7zdWbYf2MVHTNjv",base:ef.LIKE,quote:ef.RAY,decimals:ef.LIKE.decimals,version:4},COPE_RAY_V4:{symbol:"COPE-RAY",name:"COPE-RAY V4 LP",mint:"A7GCVHA8NSsbdFscHdoNU41tL1TRKNmCH4K94CgcLK9F",base:ef.COPE,quote:ef.RAY,decimals:ef.COPE.decimals,version:4},ETH_SOL_V4:{symbol:"ETH-SOL",name:"ETH-SOL V4 LP",mint:"GKfgC86iJoMjwAtcyiLu6nWnjggqUXsDQihXkP14fDez",base:ef.ETH,quote:ef.WSOL,decimals:ef.ETH.decimals,version:4},stSOL_USDC_V4:{symbol:"stSOL-USDC",name:"stSOL-USDC V4 LP",mint:"HDUJMwYZkjUZre63xUeDhdCi8c6LgUDiBqxmP3QC3VPX",base:ef.stSOL,quote:ef.USDC,decimals:ef.stSOL.decimals,version:4},GRAPE_USDC_V4:{symbol:"GRAPE-USDC",name:"GRAPE-USDC V4 LP",mint:"A8ZYmnZ1vwxUa4wpJVUaJgegsuTEz5TKy5CiJXffvmpt",base:ef.GRAPE,quote:ef.USDC,decimals:ef.GRAPE.decimals,version:4},LARIX_USDC_V4:{symbol:"LARIX-USDC",name:"LARIX-USDC V4 LP",mint:"7yieit4YsNsZ9CAK8H5ZEMvvk35kPEHHeXwp6naoWU9V",base:ef.LARIX,quote:ef.USDC,decimals:ef.LARIX.decimals,version:4},RIN_USDC_V4:{symbol:"RIN-USDC",name:"RIN-USDC V4 LP",mint:"GfCWfrZez7BDmCSEeMERVDVUaaM2TEreyYUgb2cpuS3w",base:ef.RIN,quote:ef.USDC,decimals:ef.RIN.decimals,version:4},APEX_USDC_V4:{symbol:"APEX-USDC",name:"APEX-USDC V4 LP",mint:"444cVqYyDxJNo6FqiMb9qQWFUd7tYzFRdDuJRFrSAGnU",base:ef.APEX,quote:ef.USDC,decimals:ef.APEX.decimals,version:4},mSOL_RAY_V4:{symbol:"mSOL-RAY",name:"mSOL-RAY V4 LP",mint:"De2EHBAdkgfc72DpShqDGG42cV3iDWh8wvvZdPsiEcqP",base:ef.mSOL,quote:ef.RAY,decimals:ef.mSOL.decimals,version:4},MNDE_mSOL_V4:{symbol:"MNDE-mSOL",name:"MNDE-mSOL V4 LP",mint:"4bh8XCzTHSbqbWN8o1Jn4ueBdz1LvJFoEasN6K6CQ8Ny",base:ef.MNDE,quote:ef.mSOL,decimals:ef.MNDE.decimals,version:4},LARIX_RAY_V4:{symbol:"LARIX-RAY",name:"LARIX-RAY V4 LP",mint:"ZRDfSLgWGeaYSmhdPvFNKQQhDcYdZQaue2N8YDmHX4q",base:ef.LARIX,quote:ef.RAY,decimals:ef.LARIX.decimals,version:4},LIQ_USDC_V4:{symbol:"LIQ-USDC",name:"LIQ-USDC V4 LP",mint:"GWpD3eTfhJB5KDCcnE85dBQrjAk2CsrgDF9b52R9CrjV",base:ef.LIQ,quote:ef.USDC,decimals:ef.LIQ.decimals,version:4},WAG_USDC_V4:{symbol:"WAG-USDC",name:"WAG-USDC V4 LP",mint:"4yykyPugitUVRewNPXXCviRvxGfsfsRMoP32z3b6FmUC",base:ef.WAG,quote:ef.USDC,decimals:ef.WAG.decimals,version:4},ETH_mSOL_V4:{symbol:"ETH-mSOL",name:"ETH-mSOL V4 LP",mint:"HYv3grQfi8QbV7nG7EFgNK1aJSrsJ7HynXJKJVPLL2Uh",base:ef.ETH,quote:ef.mSOL,decimals:ef.ETH.decimals,version:4},mSOL_USDT_V4:{symbol:"mSOL-USDT",name:"mSOL-USDT V4 LP",mint:"69NCmEW9mGpiWLjAcAWHq51k4ionJZmzgRfRT3wQaCCf",base:ef.mSOL,quote:ef.USDT,decimals:ef.mSOL.decimals,version:4},BTC_mSOL_V4:{symbol:"BTC-mSOL",name:"BTC-mSOL V4 LP",mint:"92bcERNtUmuaJ6mwLSxYHZYSph37jdKxRdoYNxpcYNPp",base:ef.BTC,quote:ef.mSOL,decimals:ef.BTC.decimals,version:4},SLIM_SOL_V4:{symbol:"SLIM-SOL",name:"SLIM-SOL V4 LP",mint:"9X4EK8E59VAVi6ChnNvvd39m6Yg9RtkBbAPq1mDVJT57",base:ef.SLIM,quote:ef.WSOL,decimals:ef.SLIM.decimals,version:4},AURY_USDC_V4:{symbol:"AURY-USDC",name:"AURY-USDC V4 LP",mint:"Gub5dvTy4nzP82qpmpNkBxmRqjtqRddBTBqHSdNcf2oS",base:ef.AURY,quote:ef.USDC,decimals:ef.AURY.decimals,version:4},PRT_SOL_V4:{symbol:"PRT-SOL",name:"PRT-SOL V4 LP",mint:"EcJ8Wgwt1AzSPiDpVr6aaSur8TKAsNTPmmzRACeqT68Z",base:ef.PRT,quote:ef.WSOL,decimals:ef.PRT.decimals,version:4},LIQ_RAY_V4:{symbol:"LIQ-RAY",name:"LIQ-RAY V4 LP",mint:"49YUsDrThJosHSagCn1F59Uc9NRxbr9thVrZikUnQDXy",base:ef.LIQ,quote:ef.RAY,decimals:ef.LIQ.decimals,version:4},SYP_SOL_V4:{symbol:"SYP-SOL",name:"SYP-SOL V4 LP",mint:"KHV6dfj2bDntzJ9z1S26cDfqWfUZdJRFmteLR6LxHwW",base:ef.SYP,quote:ef.WSOL,decimals:ef.SYP.decimals,version:4},SYP_RAY_V4:{symbol:"SYP-RAY",name:"SYP-RAY V4 LP",mint:"FT2KZqxxM8F2h9pZtTF4PyjK88bM4YbuBzd7ZPwQ5wMB",base:ef.SYP,quote:ef.RAY,decimals:ef.SYP.decimals,version:4},SYP_USDC_V4:{symbol:"SYP-USDC",name:"SYP-USDC V4 LP",mint:"2xJGuLAivAR1WkARRA6zP1v4jaA9jV2Qis8JfMNvrVyZ",base:ef.SYP,quote:ef.USDC,decimals:ef.SYP.decimals,version:4},FAB_USDC_V4:{symbol:"FAB-USDC",name:"FAB-USDC V4 LP",mint:"5rTCvZq6BcApsC3VV1EEUuTJfaVd8uYhcGjwTy1By6P8",base:ef.FAB,quote:ef.USDC,decimals:ef.FAB.decimals,version:4},WOOF_RAY_V4:{symbol:"WOOF-RAY",name:"WOOF-RAY V4 LP",mint:"H2FAnazDaGFutcmnrwDxhmdncR1Bd7GG4mhPCSUiamDX",base:ef.WOOF,quote:ef.RAY,decimals:ef.WOOF.decimals,version:4},WOOF_USDC_V4:{symbol:"WOOF-USDC",name:"WOOF-USDC V4 LP",mint:"EFSu5TMc1ijRevaYCxUkS7uGvbhsymDHEaTK3UVdNE3q",base:ef.WOOF,quote:ef.USDC,decimals:ef.WOOF.decimals,version:4},SLND_USDC_V4:{symbol:"SLND-USDC",name:"SLND-USDC V4 LP",mint:"EunE9uDh2cGsyJcsGuGKc6wte7kBn8iye2gzC4w2ePHn",base:ef.SLND,quote:ef.USDC,decimals:ef.SLND.decimals,version:4},FRKT_SOL_V4:{symbol:"FRKT-SOL",name:"FRKT-SOL V4 LP",mint:"HYUKXgpjaxMXHttyrFYtv3z2rdhZ1U9QDH8zEc8BooQC",base:ef.FRKT,quote:ef.WSOL,decimals:ef.FRKT.decimals,version:4},weWETH_SOL_V4:{symbol:"weWETH-SOL",name:"weWETH-SOL V4 LP",mint:"3hbozt2Por7bcrGod8N7kEeJNMocFFjCJrQR16TQGBrE",base:ef.weWETH,quote:ef.WSOL,decimals:ef.weWETH.decimals,version:4},weWETH_USDC_V4:{symbol:"weWETH-USDC",name:"weWETH-USDC V4 LP",mint:"3529SBnMCDW3S3xQ52aABbRHo7PcHvpQA4no8J12L5eK",base:ef.weWETH,quote:ef.USDC,decimals:ef.weWETH.decimals,version:4},weUNI_USDC_V4:{symbol:"weUNI-USDC",name:"weUNI-USDC V4 LP",mint:"EEC4QnT41py39QaYnzQnoYQEtDUDNa6Se8SBDgfPSN2a",base:ef.weUNI,quote:ef.USDC,decimals:ef.weUNI.decimals,version:4},weSUSHI_USDC_V4:{symbol:"weSUSHI-USDC",name:"weSUSHI-USDC V4 LP",mint:"3wVrtQZsiDNp5yTPyfEzQHPU6iuJoMmpnWg6CTt4V8sR",base:ef.weSUSHI,quote:ef.USDC,decimals:ef.weSUSHI.decimals,version:4},CYS_USDC_V4:{symbol:"CYS-USDC",name:"CYS-USDC V4 LP",mint:"GfV3QDzzdVUwCNSdfn6PjhmyJvjw18tn51RingWZYwk3",base:ef.CYS,quote:ef.USDC,decimals:ef.CYS.decimals,version:4},SAMO_USDC_V4:{symbol:"SAMO-USDC",name:"SAMO-USDC V4 LP",mint:"B2PjGEP3vPf1999fUD14pYdxvSDRVBk43hxB2rgthwEY",base:ef.SAMO,quote:ef.USDC,decimals:ef.SAMO.decimals,version:4},ABR_USDC_V4:{symbol:"ABR-USDC",name:"ABR-USDC V4 LP",mint:"ECHfxkf5zjjZFTX95QfFahNyzG7feyEKcfTdjsdrMSGU",base:ef.ABR,quote:ef.USDC,decimals:ef.ABR.decimals,version:4},IN_USDC_V4:{symbol:"IN-USDC",name:"IN-USDC V4 LP",mint:"GbmJtVgg9fRmmmjKUYGMZeSt8wZ47cDDXasg5Y3iF4kz",base:ef.IN,quote:ef.USDC,decimals:ef.IN.decimals,version:4},weDYDX_USDC_V4:{symbol:"weDYDX-USDC",name:"weDYDX-USDC V4 LP",mint:"BjkkMZnnzmgLqzGErzDbkk15ozv48iVKQuunpeM2Hqnk",base:ef.weDYDX,quote:ef.USDC,decimals:ef.weDYDX.decimals,version:4},STARS_USDC_V4:{symbol:"STARS-USDC",name:"STARS-USDC V4 LP",mint:"FJ68q7NChhETcGVdinMbM2FF1Cy79dpmUi6HC83K55Hv",base:ef.STARS,quote:ef.USDC,decimals:ef.STARS.decimals,version:4},weAXS_USDC_V4:{symbol:"weAXS-USDC",name:"weAXS-USDC V4 LP",mint:"6PSoJQ7myQ1BJtbQC6oiWR8HSecQGyoWsPYTZRJo2ci3",base:ef.weAXS,quote:ef.USDC,decimals:ef.weAXS.decimals,version:4},weSHIB_USDC_V4:{symbol:"weSHIB-USDC",name:"weSHIB-USDC V4 LP",mint:"AcjX5pmTMGSgxkdxc3r82r6WMKBvS6eQXXFz5ck5KKUa",base:ef.weSHIB,quote:ef.USDC,decimals:ef.weSHIB.decimals,version:4},SBR_USDC_V4:{symbol:"SBR-USDC",name:"SBR-USDC V4 LP",mint:"9FC8xTFRbgTpuZZYAYnZLxgnQ8r7FwfSBM1SWvGwgF7s",base:ef.SBR,quote:ef.USDC,decimals:ef.SBR.decimals,version:4},OXS_USDC_V4:{symbol:"OXS-USDC",name:"OXS-USDC V4 LP",mint:"et9pdjWm97rbmsJoN183GkFV5qzTGru79GE1Zhe7NTU",base:ef.OXS,quote:ef.USDC,decimals:ef.OXS.decimals,version:4},CWAR_USDC_V4:{symbol:"CWAR-USDC",name:"CWAR-USDC V4 LP",mint:"HjR23bxn2gtRDB2P1Tm3DLepAPPZgazsWJpLG9wqjnYR",base:ef.CWAR,quote:ef.USDC,decimals:ef.CWAR.decimals,version:4},UPS_USDC_V4:{symbol:"UPS-USDC",name:"UPS-USDC V4 LP",mint:"9hSUZdREEsbaYaKY4FouvXr7xyAqtpdHRDoYCb6Mb28a",base:ef.UPS,quote:ef.USDC,decimals:ef.UPS.decimals,version:4},weSAND_USDC_V4:{symbol:"weSAND-USDC",name:"weSAND-USDC V4 LP",mint:"3dADrQa7utyiCsaFeVk9r7oebW1WheowhKo5soBYKBVT",base:ef.weSAND,quote:ef.USDC,decimals:ef.weSAND.decimals,version:4},weMANA_USDC_V4:{symbol:"weMANA-USDC",name:"weMANA-USDC V4 LP",mint:"HpUkVAPRJ5zNRuJ1ZwMXEhbMHL3gSuPb2QuSER9YUd3a",base:ef.weMANA,quote:ef.USDC,decimals:ef.weMANA.decimals,version:4},CAVE_USDC_V4:{symbol:"CAVE-USDC",name:"CAVE-USDC V4 LP",mint:"5Gba1k3fU7Vh7UtAiBmie9vhQNNq1JfEwgn1DPGZ7NKQ",base:ef.CAVE,quote:ef.USDC,decimals:ef.CAVE.decimals,version:4},GENE_USDC_V4:{symbol:"GENE-USDC",name:"GENE-USDC V4 LP",mint:"7GKvfHEXenNiWYbJBKae89mdaMPr5gGMYwZmyC8gBNVG",base:ef.GENE,quote:ef.USDC,decimals:ef.GENE.decimals,version:4},GENE_RAY_V4:{symbol:"GENE-RAY",name:"GENE-RAY V4 LP",mint:"3HzXnc1qZ8mGqun18Ck3KA616XnZNqF1RWbgYE2nGRMA",base:ef.GENE,quote:ef.RAY,decimals:ef.GENE.decimals,version:4},APT_USDC_V4:{symbol:"APT-USDC",name:"APT-USDC V4 LP",mint:"Hk8mDAJFq4E9kF3DtNgPFwzbo5kbeiusNFJgWmo3LoQ5",base:ef.APT,quote:ef.USDC,decimals:ef.APT.decimals,version:4},GOFX_USDC_V4:{symbol:"GOFX-USDC",name:"GOFX-USDC V4 LP",mint:"4svqAwrLPGRDCQuuieYTmtLXF75wiahjeK2rEN9tY1YL",base:ef.GOFX,quote:ef.USDC,decimals:ef.GOFX.decimals,version:4},SONAR_USDC_V4:{symbol:"SONAR-USDC",name:"SONAR-USDC V4 LP",mint:"2tAcfqJ1YYjpGLqwh76kyNt9VaNFDd4fJySfH6SmWfKt",base:ef.SONAR,quote:ef.USDC,decimals:ef.SONAR.decimals,version:4},JSOL_SOL_V4:{symbol:"JSOL-SOL",name:"JSOL-SOL V4 LP",mint:"61z37rpHsU6d3Fq5sUjJ85K6tXGzkoYKDAG3kPJQNDRo",base:ef.JSOL,quote:ef.WSOL,decimals:ef.JSOL.decimals,version:4},JSOL_USDC_V4:{symbol:"JSOL-USDC",name:"JSOL-USDC V4 LP",mint:"3JZqf2VPNxj1kDZQsfzC7myM6spsGQbGuFv1gVfdYosN",base:ef.JSOL,quote:ef.USDC,decimals:ef.JSOL.decimals,version:4},SHILL_USDC_V4:{symbol:"SHILL-USDC",name:"SHILL-USDC V4 LP",mint:"CnUhYBtQEbSBZ76bgxAouVCTCb8rofZzwerVF5z5LREJ",base:ef.SHILL,quote:ef.USDC,decimals:ef.SHILL.decimals,version:4},DFL_USDC_V4:{symbol:"DFL-USDC",name:"DFL-USDC V4 LP",mint:"Fffijd6UVJdQeLVXhenS8YcsnMUdWJqpbBeH42LFkXgS",base:ef.DFL,quote:ef.USDC,decimals:ef.DFL.decimals,version:4},BOKU_USDC_V4:{symbol:"BOKU-USDC",name:"BOKU-USDC V4 LP",mint:"8jjQn5Yagb6Nm2WGAxPW1bcGqrTWpg5adf6QukXEarcP",base:ef.BOKU,quote:ef.USDC,decimals:ef.BOKU.decimals,version:4},MIMO_SOL_V4:{symbol:"MIMO-SOL",name:"MIMO-SOL V4 LP",mint:"HUJ1opSk8AiPfDT47r7n4hTiK2EXgrR3Msy7T8q1BywS",base:ef.MIMO,quote:ef.WSOL,decimals:ef.MIMO.decimals,version:4},wbWBNB_USDC_V4:{symbol:"wbWBNB-USDC",name:"wbWBNB-USDC V4 LP",mint:"FEsEfEJJSfiMQcshUgZ5UigfytfGRQ3z5puyF6DXDp9C",base:ef.wbWBNB,quote:ef.USDC,decimals:ef.wbWBNB.decimals,version:4},wePEOPLE_USDC_V4:{symbol:"wePEOPLE-USDC",name:"wePEOPLE-USDC V4 LP",mint:"3e5ZCKi4etorpV4pv1fSckP5iJD67xcUkx3RtFCZhbzD",base:ef.wePEOPLE,quote:ef.USDC,decimals:ef.wePEOPLE.decimals,version:4},ISOLA_USDT_V4:{symbol:"ISOLA-USDT",name:"ISOLA-USDT V4 LP",mint:"H8s1wQsZpRK61pyLF3XwyQc6E8vNUnwRDhy3TBDCDENQ",base:ef.ISOLA,quote:ef.USDT,decimals:ef.ISOLA.decimals,version:4},SPWN_USDC_V4:{symbol:"SPWN-USDC",name:"SPWN-USDC V4 LP",mint:"B5uyCAQcX6nAjZypLgiivbEKabSptgUb8JK9tkaSnqdW",base:ef.SPWN,quote:ef.USDC,decimals:ef.SPWN.decimals,version:4},STR_USDC_V4:{symbol:"STR-USDC",name:"STR-USDC V4 LP",mint:"8uDVKmVwNmbXHDB7rNKqtpcT9VAsFHTJ5pPYxjyoBbNg",base:ef.STR,quote:ef.USDC,decimals:ef.STR.decimals,version:4},SOLC_USDT_V4:{symbol:"SOLC-USDT",name:"SOLC-USDT V4 LP",mint:"2g9JzTWycLzK4KEBBHsponAtZRee2ii63bRrJ8tefEyt",base:ef.SOLC,quote:ef.USDT,decimals:ef.SOLC.decimals,version:4},VI_USDC_V4:{symbol:"VI-USDC",name:"VI-USDC V4 LP",mint:"3MwHyHCRfVqtH3ABFtdKXdY9dwemr9GGxQFaBkeq6NjY",base:ef.VI,quote:ef.USDC,decimals:ef.VI.decimals,version:4},KKO_USDC_V4:{symbol:"KKO-USDC",name:"KKO-USDC V4 LP",mint:"7xr1Doc1NiMWbUg99YVFqQSLfYXNzo6YvacXUsSgBMNW",base:ef.KKO,quote:ef.USDC,decimals:ef.KKO.decimals,version:4},XTAG_USDC_V4:{symbol:"XTAG-USDC",name:"XTAG-USDC V4 LP",mint:"GCEQbLg4ik5YJ4CMcbtuVqEc4sjLdSGy34rFk1CtGjdg",base:ef.XTAG,quote:ef.USDC,decimals:ef.XTAG.decimals,version:4},TTT_USDC_V4:{symbol:"TTT-USDC",name:"TTT-USDC V4 LP",mint:"84fmrerHGohoRf4iLPDQ1KG4CjSjCRksYWGzjWfCRM8a",base:ef.TTT,quote:ef.USDC,decimals:ef.TTT.decimals,version:4},RUN_USDC_V4:{symbol:"RUN-USDC",name:"RUN-USDC V4 LP",mint:"CjTLvvKSQdEujcSzeZRYgk4w1DpuXBbMppLHaxZyz11Y",base:ef.RUN,quote:ef.USDC,decimals:ef.RUN.decimals,version:4},CRWNY_USDC_V4:{symbol:"CRWNY-USDC",name:"CRWNY-USDC V4 LP",mint:"H3D9Gyi4frRLW6bS9vBthDVDJyzyRJ6XhhpP6PJGWaDC",base:ef.CRWNY,quote:ef.USDC,decimals:ef.CRWNY.decimals,version:4},CRWNY_RAY_V4:{symbol:"CRWNY-RAY",name:"CRWNY-RAY V4 LP",mint:"5Cz9wGStNjiUg81q8t6sJJeckuT2C14CYSfyQbtYirSX",base:ef.CRWNY,quote:ef.RAY,decimals:ef.CRWNY.decimals,version:4},BLOCK_USDC_V4:{symbol:"BLOCK-USDC",name:"BLOCK-USDC V4 LP",mint:"8i44Y23GkkwDYZ5iSkVEqmrXUfwNmwo9grguTDWKM8wg",base:ef.BLOCK,quote:ef.USDC,decimals:ef.BLOCK.decimals,version:4},REAL_USDC_V4:{symbol:"REAL-USDC",name:"REAL-USDC V4 LP",mint:"EN43tp8xdkcM8RYSJ4msFHMPTJRXKhUteVYBDJLwTvr3",base:ef.REAL,quote:ef.USDC,decimals:ef.REAL.decimals,version:4},FRKT_USDC_V4:{symbol:"FRKT-USDC",name:"FRKT-USDC V4 LP",mint:"7MgzqVTGeA4wENme81QPTrPy45NJMKVL9XGwxmNT87cG",base:ef.FRKT,quote:ef.USDC,decimals:ef.FRKT.decimals,version:4},MBS_USDC_V4:{symbol:"MBS-USDC",name:"MBS-USDC V4 LP",mint:"BAgSWaPZpsQKyZJdvB5KyvmCNj6hzczzentt5FhDCVHb",base:ef.MBS,quote:ef.USDC,decimals:ef.MBS.decimals,version:4},PRISM_USDC_V4:{symbol:"PRISM-USDC",name:"PRISM-USDC V4 LP",mint:"3baYkTcudvSFMe25UpZcBfdp4FA5kL2E4pfaeJ8AiYJB",base:ef.PRISM,quote:ef.USDC,decimals:ef.PRISM.decimals,version:4},CHICKS_USDC_V4:{symbol:"CHICKS-USDC",name:"CHICKS-USDC V4 LP",mint:"CPzmcw81a6PDasSXhVLfDRKuTJXZPUqocS9VFf5zCFhs",base:ef.CHICKS,quote:ef.USDC,decimals:ef.CHICKS.decimals,version:4},MEAN_RAY_V4:{symbol:"MEAN-RAY",name:"MEAN-RAY V4 LP",mint:"H9wUyrxpAErmdNVPitpHSXgwoomoh91ggJKPWtQQoCn1",base:ef.MEAN,quote:ef.RAY,decimals:ef.MEAN.decimals,version:4},TINY_USDC_V4:{symbol:"TINY-USDC",name:"TINY-USDC V4 LP",mint:"Hho6ZzRDj49L4z6zog8nQZFaxMSz6FX6wNzVpMeAMen",base:ef.TINY,quote:ef.USDC,decimals:ef.TINY.decimals,version:4},SCY_USDC_V4:{symbol:"SCY-USDC",name:"SCY-USDC V4 LP",mint:"EcYk7t6Vw59HDnY2u6H1KDPkk8juMeA1NpGpHiGk1LDf",base:ef.SCY,quote:ef.USDC,decimals:ef.SCY.decimals,version:4}};M.from("token/util");class ek{constructor(e,t="UNKNOWN",n="UNKNOWN"){this.decimals=e,this.symbol=t,this.name=n}}ek.SOL=new ek(ew.decimals,ew.symbol,ew.name);class eb extends ek{constructor(e,t,n,i="UNKNOWN",r="UNKNOWN"){super(n,i,r),this.programId=H(e),this.mint=H(t)}equals(e){return this===e||this.mint.equals(e.mint)}}function eT(e,t){return e instanceof eb&&t instanceof eb?e.equals(t):!(e instanceof eb)&&!(t instanceof eb)&&e===t}eb.WSOL=new eb(P.H_,eA.mint,eA.decimals,ew.symbol,ew.name);var eI=n(78182),eh=n.n(eI),eC=n(74964),eP=n.n(eC);let eL=eP(),eD=M.from("entity/fraction"),ev=eL(v.Z),eR=eL(eh()),eU={[p.ROUND_DOWN]:eR.ROUND_DOWN,[p.ROUND_HALF_UP]:eR.ROUND_HALF_UP,[p.ROUND_UP]:eR.ROUND_UP},eO={[p.ROUND_DOWN]:ev.roundDown,[p.ROUND_HALF_UP]:ev.roundHalfUp,[p.ROUND_UP]:ev.roundUp};class eq{constructor(e,t=el){this.numerator=eS(e),this.denominator=eS(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new eq(this.denominator,this.numerator)}add(e){let t=e instanceof eq?e:new eq(eS(e));return this.denominator.eq(t.denominator)?new eq(this.numerator.add(t.numerator),this.denominator):new eq(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof eq?e:new eq(eS(e));return this.denominator.eq(t.denominator)?new eq(this.numerator.sub(t.numerator),this.denominator):new eq(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof eq?e:new eq(eS(e));return new eq(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof eq?e:new eq(eS(e));return new eq(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=p.ROUND_HALF_UP){eD.assert(Number.isInteger(e),`${e} is not an integer.`),eD.assert(e>0,`${e} is not positive.`),eR.set({precision:e+1,rounding:eU[n]});let i=new eR(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=p.ROUND_HALF_UP){return eD.assert(Number.isInteger(e),`${e} is not an integer.`),eD.assert(e>=0,`${e} is negative.`),ev.DP=e,ev.RM=eO[n],new ev(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}}let eV=M.from("entity/amount"),eB=eL(v.Z);class eE extends eq{constructor(e,t,n=!0){let i=new(U())(0),r=em.pow(new(U())(e.decimals));if(n)i=eS(t);else{let n=new(U())(0),o=new(U())(0);if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){let[i,r]=function(e,t){let n="0",i="0";if(e.includes(".")){let r=e.split(".");if(2!==r.length)return eV.throwArgumentError("invalid number string","num",e);[n,i]=r,i=i.padEnd(t,"0")}else n=e;return[n,i.slice(0,t)||i]}(t.toString(),e.decimals);n=eS(i),o=eS(r)}i=(n=n.mul(r)).add(o)}super(i,r),this.currency=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return eV.assert(eT(this.currency,e.currency),"gt currency not equals"),this.raw.gt(e.raw)}lt(e){return eV.assert(eT(this.currency,e.currency),"lt currency not equals"),this.raw.lt(e.raw)}add(e){return eV.assert(eT(this.currency,e.currency),"add currency not equals"),new eE(this.currency,this.raw.add(e.raw))}sub(e){return eV.assert(eT(this.currency,e.currency),"sub currency not equals"),new eE(this.currency,this.raw.sub(e.raw))}toSignificant(e=this.currency.decimals,t,n=p.ROUND_DOWN){return super.toSignificant(e,t,n)}toFixed(e=this.currency.decimals,t,n=p.ROUND_DOWN){return eV.assert(e<=this.currency.decimals,"decimals overflow"),super.toFixed(e,t,n)}toExact(e={groupSeparator:""}){return eB.DP=this.currency.decimals,new eB(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}}class e_ extends eE{constructor(e,t,n=!0){super(e,t,n),this.token=e}add(e){return eV.assert(eT(this.token,e.token),"add token not equals"),new e_(this.token,this.raw.add(e.raw))}subtract(e){return eV.assert(eT(this.token,e.token),"sub token not equals"),new e_(this.token,this.raw.sub(e.raw))}}let ex=new eq(ed);class eM extends eq{toSignificant(e=5,t,n){return this.mul(ex).toSignificant(e,t,n)}toFixed(e=2,t,n){return this.mul(ex).toFixed(e,t,n)}}let eN=M.from("entity/price");class eW extends eq{constructor(e,t,n,i){var r,o;super(i,t),this.baseCurrency=e,this.quoteCurrency=n,this.scalar=new eq((r=e.decimals,em.pow(eS(r))),(o=n.decimals,em.pow(eS(o))))}get raw(){return new eq(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new eW(this.quoteCurrency,this.numerator,this.baseCurrency,this.denominator)}mul(e){eN.assert(eT(this.quoteCurrency,e.baseCurrency),"mul currency not equals");let t=super.mul(e);return new eW(this.baseCurrency,t.denominator,e.quoteCurrency,t.numerator)}toSignificant(e=this.quoteCurrency.decimals,t,n){return this.adjusted.toSignificant(e,t,n)}toFixed(e=this.quoteCurrency.decimals,t,n){return this.adjusted.toFixed(e,t,n)}}var eF=n(82657);let eK=eF.Ar,eY=eF.vA,eX=eF.fP,eH=eF.u8,eG=eF.KB,eZ=eF.Jq,ez=eF.Xo,eQ=eF.A9,ej=eF.Ik,eJ=eF.pc;var e$=n(37407).Buffer;class e1 extends eK{constructor(e,t,n){super(e,n),this.blob=ej(e),this.signed=t}decode(e,t=0){let n=new(U())(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,n=0){return"number"==typeof e&&(e=new(U())(e)),this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(e$,"le",this.span),t,n)}}class e0 extends eK{constructor(e){super(8,e),this._lower=eJ(eZ(),!1),this._upper=eJ(eZ(),!1)}addBoolean(e){this._lower.fields.length<32?this._lower.addBoolean(e):this._upper.addBoolean(e)}decode(e,t=0){let n=this._lower.decode(e,t),i=this._upper.decode(e,t+this._lower.span);return{...n,...i}}encode(e,t,n=0){return this._lower.encode(e,t,n)+this._upper.encode(e,t,n+this._lower.span)}}function e4(e){return new eX(1,e)}function e6(e){return new eX(4,e)}function e2(e){return new e1(8,!1,e)}function e5(e){return new e1(16,!1,e)}function e3(e){return new e1(8,!0,e)}class e8 extends eK{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function e9(e){return new e8(ej(32),e=>new D.nh(e),e=>e.toBuffer(),e)}function e7(e){return new e8(eH(),te,tt,e)}function te(e){if(0===e)return!1;if(1===e)return!0;throw Error("Invalid bool: "+e)}function tt(e){return e?1:0}class tn extends eY{decode(e,t){return super.decode(e,t)}}function ti(e,t,n){return new tn(e,t,n)}function tr(e,t,n){let i;let r="number"==typeof t?t:(0,R.isBN)(t)?t.toNumber():new Proxy(t,{get(e,t){if(!i){let t=Reflect.get(e,"count");i=(0,R.isBN)(t)?t.toNumber():t,Reflect.set(e,"count",i)}return Reflect.get(e,t)},set:(e,t,n)=>("count"===t&&(i=n),Reflect.set(e,t,n))});return eQ(e,r,n)}ti([e6("mintAuthorityOption"),e9("mintAuthority"),e2("supply"),e4("decimals"),e4("isInitialized"),e6("freezeAuthorityOption"),e9("freezeAuthority")]);let to=ti([e9("mint"),e9("owner"),e2("amount"),e6("delegateOption"),e9("delegate"),e4("state"),e6("isNativeOption"),e2("isNative"),e2("delegatedAmount"),e6("closeAuthorityOption"),e9("closeAuthority")]);var ta=n(69405),ts=n(95009),tc=n(50874),tu=n(66215),tl=n(24365),tm=n(97137);function td(e,t,n){return G([e.toBuffer(),n.toBuffer(),t.toBuffer()],new D.nh("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}var tp=n(37407).Buffer;class tS{static getAssociatedTokenAccount({mint:e,owner:t,programId:n}){return td(t,e,n).publicKey}static makeCreateAssociatedTokenAccountInstruction({programId:e,mint:t,associatedAccount:n,owner:i,payer:r,instructionsType:o}){return o.push(g.createATA),(0,ta.Ek)(r,n,i,t,e)}static async makeCreateWrappedNativeAccountInstructions({connection:e,owner:t,payer:n,amount:i,commitment:r}){let o=[],a=[],s=await e.getMinimumBalanceForRentExemption(to.span,r),c=eS(i).add(new(U())(s)),u=tA({fromPublicKey:n,programId:P.H_});return o.push(D.yc.createAccountWithSeed({fromPubkey:n,basePubkey:n,seed:u.seed,newAccountPubkey:u.publicKey,lamports:c.toNumber(),space:to.span,programId:P.H_})),a.push(g.createAccount),o.push(this.makeInitAccountInstruction({programId:P.H_,mint:H(eA.mint),tokenAccount:u.publicKey,owner:t,instructionTypes:a})),{address:{newAccount:u.publicKey},innerTransaction:{instructions:o,signers:[],lookupTableAddress:[],instructionTypes:a}}}static async insertCreateWrappedNativeAccount({connection:e,owner:t,payer:n,amount:i,instructions:r,instructionsType:o,signers:a,commitment:s}){let c=await this.makeCreateWrappedNativeAccountInstructions({connection:e,owner:t,payer:n,amount:i,commitment:s});return r.push(...c.innerTransaction.instructions),a.push(...c.innerTransaction.signers),o.push(...c.innerTransaction.instructionTypes),c.address.newAccount}static makeInitMintInstruction({programId:e,mint:t,decimals:n,mintAuthority:i,freezeAuthority:r=null,instructionTypes:o}){return o.push(g.initMint),(0,ts.I0)(t,n,i,r,e)}static makeMintToInstruction({programId:e,mint:t,dest:n,authority:i,amount:r,multiSigners:o=[],instructionTypes:a}){return a.push(g.mintTo),(0,tc.G7)(t,n,i,BigInt(String(r)),o,e)}static makeInitAccountInstruction({programId:e,mint:t,tokenAccount:n,owner:i,instructionTypes:r}){return r.push(g.initAccount),(0,tu.FJ)(n,t,i,e)}static makeTransferInstruction({programId:e,source:t,destination:n,owner:i,amount:r,multiSigners:o=[],instructionsType:a}){return a.push(g.transferAmount),(0,tl.$B)(t,n,i,BigInt(String(r)),o,e)}static makeCloseAccountInstruction({programId:e,tokenAccount:t,owner:n,payer:i,multiSigners:r=[],instructionsType:o}){return o.push(g.closeAccount),(0,tm.Zu)(t,i,n,r,e)}static createInitAccountInstruction(e,t,n,i){let r=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:D.ze,isSigner:!1,isWritable:!1}],o=e4("instruction"),a=tp.alloc(o.span);return o.encode(1,a),new D.Sl({keys:r,programId:e,data:a})}}(s=S||(S={}))[s.V0=0]="V0",s[s.LEGACY=1]="LEGACY",(c=g||(g={}))[c.createAccount=0]="createAccount",c[c.initAccount=1]="initAccount",c[c.createATA=2]="createATA",c[c.closeAccount=3]="closeAccount",c[c.transferAmount=4]="transferAmount",c[c.initMint=5]="initMint",c[c.mintTo=6]="mintTo",c[c.initMarket=7]="initMarket",c[c.util1216OwnerClaim=8]="util1216OwnerClaim",c[c.setComputeUnitPrice=9]="setComputeUnitPrice",c[c.setComputeUnitLimit=10]="setComputeUnitLimit",c[c.clmmCreatePool=11]="clmmCreatePool",c[c.clmmOpenPosition=12]="clmmOpenPosition",c[c.clmmIncreasePosition=13]="clmmIncreasePosition",c[c.clmmDecreasePosition=14]="clmmDecreasePosition",c[c.clmmClosePosition=15]="clmmClosePosition",c[c.clmmSwapBaseIn=16]="clmmSwapBaseIn",c[c.clmmSwapBaseOut=17]="clmmSwapBaseOut",c[c.clmmInitReward=18]="clmmInitReward",c[c.clmmSetReward=19]="clmmSetReward",c[c.clmmCollectReward=20]="clmmCollectReward",c[c.ammV4Swap=21]="ammV4Swap",c[c.ammV4AddLiquidity=22]="ammV4AddLiquidity",c[c.ammV4RemoveLiquidity=23]="ammV4RemoveLiquidity",c[c.ammV4SimulatePoolInfo=24]="ammV4SimulatePoolInfo",c[c.ammV4SwapBaseIn=25]="ammV4SwapBaseIn",c[c.ammV4SwapBaseOut=26]="ammV4SwapBaseOut",c[c.ammV4CreatePool=27]="ammV4CreatePool",c[c.ammV4InitPool=28]="ammV4InitPool",c[c.ammV4CreatePoolV2=29]="ammV4CreatePoolV2",c[c.ammV5AddLiquidity=30]="ammV5AddLiquidity",c[c.ammV5RemoveLiquidity=31]="ammV5RemoveLiquidity",c[c.ammV5SimulatePoolInfo=32]="ammV5SimulatePoolInfo",c[c.ammV5SwapBaseIn=33]="ammV5SwapBaseIn",c[c.ammV5SwapBaseOut=34]="ammV5SwapBaseOut",c[c.routeSwap=35]="routeSwap",c[c.routeSwap1=36]="routeSwap1",c[c.routeSwap2=37]="routeSwap2",c[c.farmV3Deposit=38]="farmV3Deposit",c[c.farmV3Withdraw=39]="farmV3Withdraw",c[c.farmV3CreateLedger=40]="farmV3CreateLedger",c[c.farmV5Deposit=41]="farmV5Deposit",c[c.farmV5Withdraw=42]="farmV5Withdraw",c[c.farmV5CreateLedger=43]="farmV5CreateLedger",c[c.farmV6Deposit=44]="farmV6Deposit",c[c.farmV6Withdraw=45]="farmV6Withdraw",c[c.farmV6Create=46]="farmV6Create",c[c.farmV6Restart=47]="farmV6Restart",c[c.farmV6CreatorAddReward=48]="farmV6CreatorAddReward",c[c.farmV6CreatorWithdraw=49]="farmV6CreatorWithdraw",c[c.test=50]="test";var tg=n(37407).Buffer;class tw{static _selectTokenAccount(e){let{tokenAccounts:t,programId:n,mint:i,owner:r,config:o}=e,{associatedOnly:a}={associatedOnly:!0,...o},s=t.filter(({accountInfo:e})=>e.mint.equals(i)).sort((e,t)=>e.accountInfo.amount.lt(t.accountInfo.amount)?1:-1),c=tS.getAssociatedTokenAccount({mint:i,owner:r,programId:n});for(let e of s){let{pubkey:t}=e;if(!a||c.equals(t))return t}return null}static async _handleTokenAccount(e){let{connection:t,side:n,amount:i,programId:r,mint:o,tokenAccount:a,owner:s,payer:c=s,frontInstructions:u,endInstructions:l,signers:m,bypassAssociatedCheck:d,frontInstructionsType:p,endInstructionsType:S,checkCreateATAOwner:g}=e,w=tS.getAssociatedTokenAccount({mint:o,owner:s,programId:r});if(eb.WSOL.mint.equals(o)){let e=await tS.insertCreateWrappedNativeAccount({connection:t,owner:s,payer:c,instructions:u,instructionsType:p,signers:m,amount:i});return l&&l.push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:e,owner:s,payer:c,instructionsType:S??[]})),e}if(!a||"out"===n&&!w.equals(a)&&!d){let e=tS.makeCreateAssociatedTokenAccountInstruction({programId:r,mint:o,associatedAccount:w,owner:s,payer:c,instructionsType:p});if(g){let n=await t.getAccountInfo(w);if(null===n)u.push(e);else if(n.owner.equals(P.H_)&&L.p0.decode(n.data).mint.equals(o)&&L.p0.decode(n.data).owner.equals(s));else throw Error(`create ata check error -> mint: ${o.toString()}, ata: ${w.toString()}`)}else u.push(e);return w}return a}static async _selectOrCreateTokenAccount(e){let{mint:t,tokenAccounts:n,createInfo:i,associatedOnly:r,owner:o,checkCreateATAOwner:a,programId:s}=e,c=tS.getAssociatedTokenAccount({mint:t,owner:o,programId:s}),u=n.filter(e=>e.accountInfo.mint.equals(t)&&(!r||e.pubkey.equals(c))).sort((e,t)=>e.accountInfo.amount.lt(t.accountInfo.amount)?1:-1);if(void 0===i||u.length>0)return u.length>0?u[0].pubkey:void 0;if(r){let e=tS.makeCreateAssociatedTokenAccountInstruction({programId:s,mint:t,associatedAccount:c,owner:o,payer:i.payer,instructionsType:i.frontInstructionsType});if(a){let n=await i.connection.getAccountInfo(c);if(null===n)i.frontInstructions.push(e);else if(n.owner.equals(s)&&L.p0.decode(n.data).mint.equals(t)&&L.p0.decode(n.data).owner.equals(o));else throw Error(`create ata check error -> mint: ${t.toString()}, ata: ${c.toString()}`)}else i.frontInstructions.push(e);if(t.equals(eb.WSOL.mint)&&i.amount){let e=await tS.insertCreateWrappedNativeAccount({connection:i.connection,owner:o,payer:i.payer,instructions:i.frontInstructions,instructionsType:i.frontInstructionsType,signers:i.signers,amount:i.amount.toString()??"0"});(i.endInstructions??[]).push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:e,owner:o,payer:i.payer,instructionsType:i.endInstructionsType??[]})),i.amount&&i.frontInstructions.push(tS.makeTransferInstruction({programId:P.H_,source:e,destination:c,owner:o,amount:i.amount,instructionsType:i.frontInstructionsType}))}return(i.endInstructions??[]).push(tS.makeCloseAccountInstruction({programId:s,tokenAccount:c,owner:o,payer:i.payer,instructionsType:i.endInstructionsType??[]})),c}if(t.equals(eb.WSOL.mint)){let e=await tS.insertCreateWrappedNativeAccount({connection:i.connection,owner:o,payer:i.payer,instructions:i.frontInstructions,instructionsType:i.frontInstructionsType,signers:i.signers,amount:void 0!=i.amount?i.amount.toString():"0"});return(i.endInstructions??[]).push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:e,owner:o,payer:i.payer,instructionsType:i.endInstructionsType??[]})),e}{let e=tA({fromPublicKey:o,programId:s}),n=await i.connection.getMinimumBalanceForRentExemption(L.p0.span),r=D.yc.createAccountWithSeed({fromPubkey:o,basePubkey:o,seed:e.seed,newAccountPubkey:e.publicKey,lamports:n,space:L.p0.span,programId:s}),a=tS.createInitAccountInstruction(s,t,e.publicKey,o);return i.frontInstructions.push(r,a),i.frontInstructionsType.push(g.createAccount,g.initAccount),(i.endInstructions??[]).push(tS.makeCloseAccountInstruction({programId:s,tokenAccount:e.publicKey,owner:o,payer:i.payer,instructionsType:i.endInstructionsType??[]})),e.publicKey}}}function tA({fromPublicKey:e,programId:t=P.H_}){let n=D.RG.generate().publicKey.toBase58().slice(0,32),i=function(e,t,n){let i=tg.concat([e.toBuffer(),tg.from(t),n.toBuffer()]),r=(0,C.J)(i);return new D.nh(r)}(e,n,t);return{publicKey:i,seed:n}}var tf=n(37407).Buffer;new D.gw({key:new D.nh("2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17"),state:D.gw.deserialize(tf.from("AQAAAP//////////d49+DAAAAAAAAQZMWvw7GUNJdaccNBVnb57OKakxL2BHLYvhRwVILRsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGRm/lIRcy/+ytunLDm+e8jOW7xfcSayxDmzpAAAAABt324ddloZPZy+FGzut5rBy0he1fWzeROoz1hX7/AKkG3fbh7nWP3hhCXbzkbM3athr8TYO5DSf+vfko2KGL/AVKU1D4XciC1hSlVnJ4iilt3x6rq9CmBniISTL07vagBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvDQdRqCgtphMF/imcN7mY5YRx2xE1A3MQ+L4QRaYK9u4GRfZP3LsAd00a+IkCpA22UNQMKdq5BFbJuwuOLqc8zxCTDlqxBG8J0HcxtfogQHDK06ukzfaXiNDKAob1MqBHS9lJxDYCwz8gd5DtFqNSTKG5l1zxIaKpDP/sffi2is1H9aKveyXSu5StXElYRl9SD5As0DHE4N0GLnf84/siiKXVyp4Ez121kLcUui/jLLFZEz/BwZK3Ilf9B9OcsEAeDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu9N9LMnrw/JNO0hqMVB4rk/2ou4AB1loQ7FZoPwut2o4KZB+0p9xnbrQKw038qjpHar+PyDwvxBRcu5hpHw3dguezeWv+IwvgW5icu8EGkhGa9AkFPPJT7VMSFb8xowveU=","base64"))});var ty=n(60922),tk=n(42455);function tb(e,t,n,i){if(void 0===t)return{amount:e,fee:void 0,expirationTime:void 0};let r=n.epoch<t.newerTransferFee.epoch?t.olderTransferFee:t.newerTransferFee,o=new(U())(r.maximumFee.toString()),a=n.epoch<t.newerTransferFee.epoch?(Number(t.newerTransferFee.epoch)*n.slotsInEpoch-n.absoluteSlot)*400/1e3:void 0;if(i){if(1e4===r.transferFeeBasisPoints){let t=new(U())(r.maximumFee.toString());return{amount:e.add(t),fee:t,expirationTime:a}}{let t=th(e.mul(new(U())(1e4)),new(U())(1e4-r.transferFeeBasisPoints)),n=new(U())(r.maximumFee.toString()),i=t.sub(e).gt(n)?e.add(n):t,s=th(i.mul(new(U())(r.transferFeeBasisPoints)),new(U())(1e4)),c=s.gt(o)?o:s;return{amount:i,fee:c,expirationTime:a}}}{let t=th(e.mul(new(U())(r.transferFeeBasisPoints)),new(U())(1e4)),n=t.gt(o)?o:t;return{amount:e,fee:n,expirationTime:a}}}function tT(e,t){return void 0===e?t:void 0===t?e:Math.min(e,t)}async function tI({connection:e,mints:t}){if(0===t.length)return{};let n=await ee(e,t.map(e=>({pubkey:e}))),i={};for(let e of n){let t=(0,ty.rs)(e.pubkey,e.accountInfo,e.accountInfo?.owner);i[e.pubkey.toString()]={...t,feeConfig:(0,tk.E0)(t)??void 0}}return i}function th(e,t){let{div:n,mod:i}=e.divmod(t);return i.gt(eu)?n.add(el):n}var tC=n(37407).Buffer;let tP={voterStakeRegistryCreateVoter:tC.from([6,24,245,52,243,255,148,25]),voterStakeRegistryCreateDepositEntry:tC.from([185,131,167,186,159,125,19,67]),voterStakeRegistryDeposit:tC.from([242,35,198,137,82,225,242,182]),voterStakeRegistryWithdraw:tC.from([183,18,70,156,148,109,161,34]),voterStakeRegistryUpdateVoterWeightRecord:tC.from([45,185,3,36,109,190,115,169])},tL=ti([e2("state"),e2("nonce"),e9("lpVault"),e9("rewardVault"),e9(),e9(),e2(),e2(),e2("totalReward"),e5("perShareReward"),e2("lastSlot"),e2("perSlotReward")]),tD=ti([e2("state"),e2("nonce"),e9("lpVault"),e9("rewardVaultA"),e2("totalRewardA"),e5("perShareRewardA"),e2("perSlotRewardA"),e4("option"),e9("rewardVaultB"),ej(7),e2("totalRewardB"),e5("perShareRewardB"),e2("perSlotRewardB"),e2("lastSlot"),e9()]),tv=ti([e2("rewardState"),e2("rewardOpenTime"),e2("rewardEndTime"),e2("rewardLastUpdateTime"),e2("totalReward"),e2("totalRewardEmissioned"),e2("rewardClaimed"),e2("rewardPerSecond"),e5("accRewardPerShare"),e9("rewardVault"),e9("rewardMint"),e9("rewardSender"),e2("rewardType"),tr(e2(),15,"padding")]),tR=ti([e2(),e2("state"),e2("nonce"),e2("validRewardTokenNum"),e5("rewardMultiplier"),e2("rewardPeriodMax"),e2("rewardPeriodMin"),e2("rewardPeriodExtend"),e9("lpMint"),e9("lpVault"),tr(tv,5,"rewardInfos"),e9("creator"),e9(),tr(e2(),32,"padding")]),tU=new Proxy(tL,{get:(e,t,n)=>"decode"===t?(...t)=>{let n=e.decode(...t);return{...n,version:3,rewardInfos:[{rewardVault:n.rewardVault,totalReward:n.totalReward,perSlotReward:n.perSlotReward,perShareReward:n.perShareReward}]}}:Reflect.get(e,t,n)}),tO=new Proxy(tD,{get:(e,t,n)=>"decode"===t?(...t)=>{let n=e.decode(...t);return{...n,version:5,rewardInfos:[{rewardVault:n.rewardVaultA,totalReward:n.totalRewardA,perSlotReward:n.perSlotRewardA,perShareReward:n.perShareRewardA},{rewardVault:n.rewardVaultB,totalReward:n.totalRewardB,perSlotReward:n.perSlotRewardB,perShareReward:n.perShareRewardB}]}}:Reflect.get(e,t,n)}),tq=new Proxy(tR,{get:(e,t,n)=>"decode"===t?(...t)=>{let n=e.decode(...t);return{...n,version:6,rewardInfos:n.rewardInfos.map(e=>({...e,rewardType:(Object.entries(t0).find(t=>String(t[1])===e.rewardType.toString())??["Standard SPL"])[0]}))}}:Reflect.get(e,t,n)}),tV=ti([e2("state"),e9("id"),e9("owner"),e2("deposited"),tr(e2(),1,"rewardDebts")]),tB=ti([e2("state"),e9("id"),e9("owner"),e2("deposited"),tr(e5(),1,"rewardDebts"),e2(""),e2("voteLockedBalance"),tr(e2(),15)]),tE=ti([e2("state"),e9("id"),e9("owner"),e2("deposited"),tr(e2(),2,"rewardDebts")]),t_=ti([e2("state"),e9("id"),e9("owner"),e2("deposited"),tr(e5(),2,"rewardDebts"),tr(e2(),17)]),tx=ti([e2(),e2("state"),e9("id"),e9("owner"),e2("deposited"),tr(e5(),5,"rewardDebts"),tr(e2(),16)]),tM={3:tU,5:tO,6:tq},tN={3:tB,5:t_,6:tx},tW=ti([e9("mint"),e9("grantAuthority"),e2("baselineVoteWeightScaledFactor"),e2("maxExtraLockupVoteWeightScaledFactor"),e2("lockupSaturationSecs"),new e1(1,!0,"digitShift"),tr(e4(),7,"reserved1"),tr(e2(),7,"reserved2")]),tF=ti([ej(8),e9("governanceProgramId"),e9("realm"),e9("realmGoverningTokenMint"),e9("realmAuthority"),tr(e4(),32,"reserved1"),tr(tW,4,"votingMints"),e3("timeOffset"),e4("bump"),tr(e4(),7,"reserved2"),tr(e2(),11,"reserved3")]),tK=ti([e3("startTime"),e3("endTime"),e4("kind"),tr(e4(),15,"reserved")]),tY=ti([tr(tK,1,"lockup"),e2("amountDeposited_native"),e2("amountInitiallyLockedNative"),e7("isUsed"),e7("allowClawback"),e4("votingMintConfigIdx"),tr(e4(),29,"reserved")]),tX=ti([ej(8),e9("voterAuthority"),e9("registrar"),tr(tY,32,"deposits"),e4("voterBump"),e4("voterWweightRecordBump"),tr(e4(),94,"reserved")]);var tH=n(37407).Buffer;function tG(e,t,n){return G([t.toBuffer(),tH.from("registrar","utf8"),n.toBuffer()],e)}function tZ(e,t){return G([t.toBuffer(),tH.from("voting_mint_seed","utf8")],e)}function tz(e,t){return G([t.toBuffer()],e)}function tQ(e,t,n){return G([t.toBuffer(),tH.from("voter","utf8"),n.toBuffer()],e)}function tj(e,t,n){return G([t.toBuffer(),tH.from("voter-weight-record","utf8"),n.toBuffer()],e)}function tJ(e,t,n,i){return G([tH.from("governance","utf8"),t.toBuffer(),n.toBuffer(),i.toBuffer()],e)}var t$=n(37407).Buffer;let t1=M.from("Farm"),t0={"Standard SPL":0,"Option tokens":1};class t4 extends tw{static getStateLayout(e){let t=tM[e];return t1.assertArgument(!!t,"invalid version","version",e),t}static getLedgerLayout(e){let t=tN[e];return t1.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e),ledger:this.getLedgerLayout(e)}}static getAssociatedAuthority({programId:e,poolId:t}){return G([t.toBuffer()],e)}static getAssociatedLedgerAccount({programId:e,poolId:t,owner:n,version:i}){let{publicKey:r}=G([t.toBuffer(),n.toBuffer(),t$.from(6===i?"farmer_info_associated_seed":"staker_info_v2_associated_seed","utf-8")],e);return r}static getAssociatedLedgerPoolAccount({programId:e,poolId:t,mint:n,type:i}){let{publicKey:r}=G([t.toBuffer(),n.toBuffer(),t$.from("lpVault"===i?"lp_vault_associated_seed":"rewardVault"===i?"reward_vault_associated_seed":"","utf-8")],e);return r}static makeDepositInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 3===n?this.makeDepositInstructionV3(e):5===n?this.makeDepositInstructionV5(e):6===n?this.makeDepositInstructionV6(e):t1.throwArgumentError("invalid version","poolKeys.version",n)}static makeDepositInstructionV3({poolKeys:e,userKeys:t,amount:n}){t1.assertArgument(1===e.rewardInfos.length,"lengths not equal 1","poolKeys.rewardInfos",e.rewardInfos),t1.assertArgument(1===t.rewardTokenAccounts.length,"lengths not equal 1","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let i=ti([e4("instruction"),e2("amount")]),r=t$.alloc(i.span);i.encode({instruction:10,amount:eS(n)},r);let o=[Z(e.id,!1),z(e.authority,!1),Z(t.ledger,!1),z(t.owner,!0),Z(t.lpTokenAccount,!1),Z(e.lpVault,!1),Z(t.rewardTokenAccounts[0],!1),Z(e.rewardInfos[0].rewardVault,!1),z(D.Am,!1),z(P.H_,!1)];if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(Z(e,!1));return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:o,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV3Deposit]}}}static makeDepositInstructionV5({poolKeys:e,userKeys:t,amount:n}){t1.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let i=ti([e4("instruction"),e2("amount")]),r=t$.alloc(i.span);i.encode({instruction:11,amount:eS(n)},r);let o=[Z(e.id,!1),z(e.authority,!1),Z(t.ledger,!1),z(t.owner,!0),Z(t.lpTokenAccount,!1),Z(e.lpVault,!1),Z(t.rewardTokenAccounts[0],!1),Z(e.rewardInfos[0].rewardVault,!1),z(D.Am,!1),z(P.H_,!1)];for(let n=1;n<e.rewardInfos.length;n++)o.push(Z(t.rewardTokenAccounts[n],!1)),o.push(Z(e.rewardInfos[n].rewardVault,!1));if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(Z(e,!1));return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:o,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV5Deposit]}}}static makeDepositInstructionV6({poolKeys:e,userKeys:t,amount:n}){t1.assertArgument(0!==t.rewardTokenAccounts.length,"lengths equal zero","userKeys.rewardTokenAccounts",t.rewardTokenAccounts),t1.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let i=ti([e4("instruction"),e2("amount")]),r=t$.alloc(i.span);i.encode({instruction:1,amount:eS(n)},r);let o=[z(P.H_,!1),z(W,!1),Z(e.id,!1),z(e.authority,!1),Z(e.lpVault,!1),Z(t.ledger,!1),z(t.owner,!0),Z(t.lpTokenAccount,!1)];for(let n=0;n<e.rewardInfos.length;n++)o.push(Z(e.rewardInfos[n].rewardVault,!1)),o.push(Z(t.rewardTokenAccounts[n],!1));return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:o,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV6Deposit]}}}static makeWithdrawInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 3===n?this.makeWithdrawInstructionV3(e):5===n?this.makeWithdrawInstructionV5(e):6===n?this.makeWithdrawInstructionV6(e):t1.throwArgumentError("invalid version","poolKeys.version",n)}static makeWithdrawInstructionV3({poolKeys:e,userKeys:t,amount:n}){t1.assertArgument(1===e.rewardInfos.length,"lengths not equal 1","poolKeys.rewardInfos",e.rewardInfos),t1.assertArgument(1===t.rewardTokenAccounts.length,"lengths not equal 1","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let i=ti([e4("instruction"),e2("amount")]),r=t$.alloc(i.span);i.encode({instruction:11,amount:eS(n)},r);let o=[Z(e.id,!1),z(e.authority,!1),Z(t.ledger,!1),z(t.owner,!0),Z(t.lpTokenAccount,!1),Z(e.lpVault,!1),Z(t.rewardTokenAccounts[0],!1),Z(e.rewardInfos[0].rewardVault,!1),z(D.Am,!1),z(P.H_,!1)];if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(Z(e,!1));return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:o,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV5Deposit]}}}static makeWithdrawInstructionV5({poolKeys:e,userKeys:t,amount:n}){t1.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with params.poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let i=ti([e4("instruction"),e2("amount")]),r=t$.alloc(i.span);i.encode({instruction:12,amount:eS(n)},r);let o=[Z(e.id,!1),z(e.authority,!1),Z(t.ledger,!1),z(t.owner,!0),Z(t.lpTokenAccount,!1),Z(e.lpVault,!1),Z(t.rewardTokenAccounts[0],!1),Z(e.rewardInfos[0].rewardVault,!1),z(D.Am,!1),z(P.H_,!1)];for(let n=1;n<e.rewardInfos.length;n++)o.push(Z(t.rewardTokenAccounts[n],!1)),o.push(Z(e.rewardInfos[n].rewardVault,!1));if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(Z(e,!1));return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:o,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV5Withdraw]}}}static makeWithdrawInstructionV6({poolKeys:e,userKeys:t,amount:n}){t1.assertArgument(0!==t.rewardTokenAccounts.length,"lengths equal zero","userKeys.rewardTokenAccounts",t.rewardTokenAccounts),t1.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with params.poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let i=ti([e4("instruction"),e2("amount")]),r=t$.alloc(i.span);i.encode({instruction:2,amount:eS(n)},r);let o=[z(P.H_,!1),Z(e.id,!1),z(e.authority,!1),Z(e.lpVault,!1),Z(t.ledger,!1),z(t.owner,!0),Z(t.lpTokenAccount,!1)];for(let n=0;n<e.rewardInfos.length;n++)o.push(Z(e.rewardInfos[n].rewardVault,!1)),o.push(Z(t.rewardTokenAccounts[n],!1));return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:o,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV6Withdraw]}}}static makeCreateAssociatedLedgerAccountInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 3===n?this.makeCreateAssociatedLedgerAccountInstructionV3(e):5===n?this.makeCreateAssociatedLedgerAccountInstructionV5(e):t1.throwArgumentError("invalid version","poolKeys.version",n)}static makeCreateAssociatedLedgerAccountInstructionV3({poolKeys:e,userKeys:t}){let n=ti([e4("instruction")]),i=t$.alloc(n.span);n.encode({instruction:9},i);let r=[Z(e.id,!1),Z(t.ledger,!1),z(t.owner,!0),z(W,!1),z(D.ze,!1)];return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:r,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV3CreateLedger]}}}static makeCreateAssociatedLedgerAccountInstructionV5({poolKeys:e,userKeys:t}){let n=ti([e4("instruction")]),i=t$.alloc(n.span);n.encode({instruction:10},i);let r=[Z(e.id,!1),Z(t.ledger,!1),z(t.owner,!0),z(W,!1),z(D.ze,!1)];return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:r,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV5CreateLedger]}}}static makeCreateFarmInstruction({connection:e,userKeys:t,poolInfo:n}){let{version:i}=n;return 6===i?this.makeCreateFarmInstructionV6({connection:e,userKeys:t,poolInfo:n}):t1.throwArgumentError("invalid version","version",i)}static async makeCreateFarmInstructionV6({connection:e,userKeys:t,poolInfo:n}){let i=t.payer??t.owner,r=tA({fromPublicKey:i,programId:n.programId}),o=await e.getMinimumBalanceForRentExemption(tq.span),a=[],s=[],c=[],u=[],l=[];a.push(D.yc.createAccountWithSeed({fromPubkey:i,basePubkey:i,seed:r.seed,newAccountPubkey:r.publicKey,lamports:o,space:tq.span,programId:n.programId}));let{publicKey:m,nonce:d}=t4.getAssociatedAuthority({programId:n.programId,poolId:r.publicKey}),p=t4.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:r.publicKey,mint:n.lpMint,type:"lpVault"}),S=[],w=[];for(let i of n.rewardInfos){let o;t1.assertArgument(i.rewardOpenTime<i.rewardEndTime,"start time error","rewardInfo.rewardOpenTime",i.rewardOpenTime),t1.assertArgument(void 0!==t0[i.rewardType],"reward type error","rewardInfo.rewardType",i.rewardType),t1.assertArgument(eS(i.rewardPerSecond).gt(eu),"rewardPerSecond error","rewardInfo.rewardPerSecond",i.rewardPerSecond),S.push({isSet:new(U())(1),rewardPerSecond:eS(i.rewardPerSecond),rewardOpenTime:eS(i.rewardOpenTime),rewardEndTime:eS(i.rewardEndTime),rewardType:eS(t0[i.rewardType])}),i.rewardMint.equals(D.nh.default)?(o=await tS.insertCreateWrappedNativeAccount({connection:e,owner:t.owner,payer:t.payer??t.owner,instructions:a,signers:l,amount:eS(i.rewardEndTime).sub(eS(i.rewardOpenTime)).mul(eS(i.rewardPerSecond)),instructionsType:c}),s.push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:o,owner:t.owner,payer:t.payer??t.owner,instructionsType:u}))):o=this._selectTokenAccount({programId:P.H_,tokenAccounts:t.tokenAccounts,mint:i.rewardMint,owner:t.owner,config:{associatedOnly:!1}}),t1.assertArgument(null!==o,"cannot found target token accounts","tokenAccounts",t.tokenAccounts);let m=i.rewardMint.equals(D.nh.default)?eb.WSOL.mint:i.rewardMint;w.push({rewardMint:m,rewardVault:t4.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:r.publicKey,mint:m,type:"rewardVault"}),userRewardToken:o})}let A=this._selectTokenAccount({programId:P.H_,tokenAccounts:t.tokenAccounts,mint:n.lockInfo.lockMint,owner:t.owner,config:{associatedOnly:!1}});t1.assertArgument(null!==A,"cannot found lock vault","tokenAccounts",t.tokenAccounts);let f=ti([e2("isSet"),e2("rewardPerSecond"),e2("rewardOpenTime"),e2("rewardEndTime"),e2("rewardType")]),y=ti([e4("instruction"),e2("nonce"),tr(f,5,"rewardTimeInfo")]),k=t$.alloc(y.span);y.encode({instruction:0,nonce:new(U())(d),rewardTimeInfo:S},k);let b=[z(P.H_,!1),z(W,!1),z(D.ze,!1),Z(r.publicKey,!1),z(m,!1),Z(p,!1),z(n.lpMint,!1),Z(n.lockInfo.lockVault,!1),z(n.lockInfo.lockMint,!1),Z(A??D.nh.default,!1),z(t.owner,!0)];for(let e of w)b.push(...[{pubkey:e.rewardMint,isSigner:!1,isWritable:!1},{pubkey:e.rewardVault,isSigner:!1,isWritable:!0},{pubkey:e.userRewardToken,isSigner:!1,isWritable:!0}]);let T=new D.Sl({programId:n.programId,keys:b,data:k});return{address:{farmId:r.publicKey},innerTransaction:{instructions:[...a,T,...s],signers:l,lookupTableAddress:[],instructionTypes:[...c,g.farmV6Create,...u]}}}static makeCreatorWithdrawFarmRewardInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeCreatorWithdrawFarmRewardInstructionV6(e):t1.throwArgumentError("invalid version","version",n)}static makeCreatorWithdrawFarmRewardInstructionV6({poolKeys:e,userKeys:t,withdrawMint:n}){let i=e.rewardInfos.find(e=>e.rewardMint.equals(n.equals(D.nh.default)?eb.WSOL.mint:n));t1.assertArgument(void 0!==i,"withdraw mint error","poolKeys.rewardInfos",e.rewardInfos);let r=i?.rewardVault??D.nh.default,o=ti([e4("instruction")]),a=t$.alloc(o.span);o.encode({instruction:5},a);let s=[z(P.H_,!1),Z(e.id,!1),z(e.authority,!1),z(e.lpVault,!1),Z(r,!1),Z(t.userRewardToken,!1),z(t.owner,!0)],c=new D.Sl({programId:e.programId,keys:s,data:a});return{address:{},innerTransaction:{instructions:[c],signers:[],lookupTableAddress:[],instructionTypes:[g.farmV6CreatorWithdraw]}}}static async fetchMultipleInfoAndUpdate({connection:e,pools:t,owner:n,config:i,chainTime:r}){let o=!1,a=!1,s=[],c={};for(let e of t)c[e.id.toString()]=e,6===e.version?a=!0:o=!0,s.push({pubkey:e.id,version:e.version,key:"state",poolId:e.id}),s.push({pubkey:e.lpVault,version:e.version,key:"lpVault",poolId:e.id}),n&&s.push({pubkey:this.getAssociatedLedgerAccount({programId:e.programId,poolId:e.id,owner:n,version:e.version}),version:e.version,key:"ledger",poolId:e.id});let u={},l=await ee(e,s,i);for(let{pubkey:e,version:t,key:n,poolId:i,accountInfo:r}of l){let o=i.toBase58();if("state"===n){let n=this.getStateLayout(t);if(!r||!r.data||r.data.length!==n.span)return t1.throwArgumentError("invalid farm state account info","pools.id",e);u[o]={...u[o],apiPoolInfo:c[o],state:n.decode(r.data)}}else if("lpVault"===n){if(!r||!r.data||r.data.length!==to.span)return t1.throwArgumentError("invalid farm lp vault account info","pools.lpVault",e);u[o]={...u[o],lpVault:to.decode(r.data)}}else if("ledger"===n){let n=this.getLedgerLayout(t);r&&r.data&&(t1.assertArgument(r.data.length===n.span,"invalid farm ledger account info","ledger",e),u[o]={...u[o],ledger:n.decode(r.data)})}}let m=a||o?await e.getSlot():0;for(let e of Object.keys(u))void 0!==u[e]&&(u[e].state=t4.updatePoolInfo(u[e].state,u[e].lpVault,m,r));for(let[e,{state:t,ledger:n}]of Object.entries(u))if(n){let i;i=6===t.version?t.rewardMultiplier:1===t.rewardInfos.length?em.pow(new(U())(9)):em.pow(new(U())(15));let r=t.rewardInfos.map((e,r)=>{let o=n.rewardDebts[r],a=n.deposited.mul(6===t.version?e.accRewardPerShare:e.perShareReward).div(i).sub(o);return a});u[e].wrapped={...u[e].wrapped,pendingRewards:r}}return u}static updatePoolInfo(e,t,n,i){if(3===e.version||5===e.version){if(e.lastSlot.gte(new(U())(n)))return e;let i=new(U())(n).sub(e.lastSlot);for(let r of(e.lastSlot=new(U())(n),e.rewardInfos)){if(t.amount.eq(new(U())(0)))continue;let n=r.perSlotReward.mul(i);r.perShareReward=r.perShareReward.add(n.mul(new(U())(10).pow(new(U())(3===e.version?9:15))).div(t.amount)),r.totalReward=r.totalReward.add(n)}}else if(6===e.version)for(let n of e.rewardInfos){if(n.rewardState.eq(new(U())(0)))continue;let r=U().min(new(U())(i),n.rewardEndTime);if(n.rewardOpenTime.gte(r))continue;let o=r.sub(n.rewardLastUpdateTime),a=o.mul(n.rewardPerSecond),s=n.totalReward.sub(n.totalRewardEmissioned);s.lt(a)?(a=s,n.rewardLastUpdateTime=n.rewardLastUpdateTime.add(s.div(n.rewardPerSecond))):n.rewardLastUpdateTime=r,t.amount.eq(new(U())(0))||(n.accRewardPerShare=n.accRewardPerShare.add(a.mul(e.rewardMultiplier).div(t.amount)),n.totalRewardEmissioned=n.totalRewardEmissioned.add(a))}return e}static makeCreatorWithdrawFarmRewardInstructionSimple(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeCreatorWithdrawFarmRewardInstructionV6Simple(e):t1.throwArgumentError("invalid version","version",n)}static async makeCreatorWithdrawFarmRewardInstructionV6Simple({connection:e,poolKeys:t,userKeys:n,withdrawMint:i,makeTxVersion:r,lookupTableCache:o,computeBudgetConfig:a}){let s;let c=[],u=[],l=[],m=[],d=[];if(i.equals(D.nh.default))s=await tS.insertCreateWrappedNativeAccount({connection:e,owner:n.owner,payer:n.payer??n.owner,instructions:c,signers:d,amount:0,instructionsType:l}),u.push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:s,owner:n.owner,payer:n.payer??n.owner,instructionsType:m}));else{let e=this._selectTokenAccount({programId:P.H_,tokenAccounts:n.tokenAccounts,mint:i,owner:n.owner});null===e?(s=td(n.owner,i,P.H_).publicKey,c.push(tS.makeCreateAssociatedTokenAccountInstruction({programId:P.H_,mint:i,associatedAccount:s,owner:n.owner,payer:n.payer??n.owner,instructionsType:l}))):s=e}let p=this.makeCreatorWithdrawFarmRewardInstructionV6({poolKeys:t,userKeys:{userRewardToken:s,owner:n.owner,payer:n.payer},withdrawMint:i});return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:r,computeBudgetConfig:a,payer:n.payer??n.owner,innerTransaction:[{instructionTypes:l,instructions:c,signers:d},p.innerTransaction,{instructionTypes:m,instructions:u,signers:[]}],lookupTableCache:o})}}static makeCreateFarmInstructionSimple(e){let{version:t}=e.poolInfo;return 6===t?this.makeCreateFarmInstructionV6Simple(e):t1.throwArgumentError("invalid version","version",t)}static async makeCreateFarmInstructionV6Simple({connection:e,userKeys:t,poolInfo:n,makeTxVersion:i,lookupTableCache:r,computeBudgetConfig:o}){let a=t.payer??t.owner,s=tA({fromPublicKey:a,programId:n.programId}),c=await e.getMinimumBalanceForRentExemption(tq.span),u=[],l=[],m=[],d=[],p=[];u.push(D.yc.createAccountWithSeed({fromPubkey:a,basePubkey:a,seed:s.seed,newAccountPubkey:s.publicKey,lamports:c,space:tq.span,programId:n.programId}));let{publicKey:S,nonce:w}=t4.getAssociatedAuthority({programId:n.programId,poolId:s.publicKey}),A=t4.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:s.publicKey,mint:n.lpMint,type:"lpVault"}),f=[],y=[];for(let i of n.rewardInfos){let r;if(t1.assertArgument(i.rewardOpenTime<i.rewardEndTime,"start time error","rewardInfo.rewardOpenTime",i.rewardOpenTime),t1.assertArgument(void 0!==t0[i.rewardType],"reward type error","rewardInfo.rewardType",i.rewardType),t1.assertArgument(eS(i.rewardPerSecond).gt(eu),"rewardPerSecond error","rewardInfo.rewardPerSecond",i.rewardPerSecond),f.push({isSet:new(U())(1),rewardPerSecond:eS(i.rewardPerSecond),rewardOpenTime:eS(i.rewardOpenTime),rewardEndTime:eS(i.rewardEndTime),rewardType:eS(t0[i.rewardType])}),i.rewardMint.equals(D.nh.default)?(r=await tS.insertCreateWrappedNativeAccount({connection:e,owner:t.owner,payer:t.payer??t.owner,instructions:u,signers:p,amount:eS(i.rewardEndTime).sub(eS(i.rewardOpenTime)).mul(eS(i.rewardPerSecond)),instructionsType:m}),l.push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:r,owner:t.owner,payer:t.payer??t.owner,instructionsType:d}))):r=this._selectTokenAccount({programId:P.H_,tokenAccounts:t.tokenAccounts,mint:i.rewardMint,owner:t.owner,config:{associatedOnly:!1}}),t1.assertArgument(null!==r,"cannot found target token accounts","tokenAccounts",t.tokenAccounts),null===r)throw Error("cannot found target token accounts");let o=i.rewardMint.equals(D.nh.default)?eb.WSOL.mint:i.rewardMint;y.push({rewardMint:o,rewardVault:t4.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:s.publicKey,mint:o,type:"rewardVault"}),userRewardToken:r})}let k=this._selectTokenAccount({programId:P.H_,tokenAccounts:t.tokenAccounts,mint:n.lockInfo.lockMint,owner:t.owner,config:{associatedOnly:!1}});t1.assertArgument(null!==k,"cannot found lock vault","tokenAccounts",t.tokenAccounts);let b=ti([e2("isSet"),e2("rewardPerSecond"),e2("rewardOpenTime"),e2("rewardEndTime"),e2("rewardType")]),T=ti([e4("instruction"),e2("nonce"),tr(b,5,"rewardTimeInfo")]),I=t$.alloc(T.span);T.encode({instruction:0,nonce:new(U())(w),rewardTimeInfo:f},I);let h=[z(P.H_,!1),z(W,!1),z(D.ze,!1),Z(s.publicKey,!1),z(S,!1),Z(A,!1),z(n.lpMint,!1),Z(n.lockInfo.lockVault,!1),z(n.lockInfo.lockMint,!1),Z(k??D.nh.default,!1),z(t.owner,!0)];for(let e of y)h.push(...[{pubkey:e.rewardMint,isSigner:!1,isWritable:!1},{pubkey:e.rewardVault,isSigner:!1,isWritable:!0},{pubkey:e.userRewardToken,isSigner:!1,isWritable:!0}]);let C=new D.Sl({programId:n.programId,keys:h,data:I});return{address:{farmId:s.publicKey},innerTransactions:await eo({connection:e,makeTxVersion:i,computeBudgetConfig:o,payer:t.payer??t.owner,innerTransaction:[{instructionTypes:m,instructions:u,signers:p},{instructionTypes:[g.farmV6Create],instructions:[C],signers:[]},{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:r})}}static makeRestartFarmInstructionSimple(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeRestartFarmInstructionV6Simple(e):t1.throwArgumentError("invalid version","version",n)}static async makeRestartFarmInstructionV6Simple({connection:e,poolKeys:t,userKeys:n,newRewardInfo:i,makeTxVersion:r,lookupTableCache:o,computeBudgetConfig:a}){let s;t1.assertArgument(i.rewardOpenTime<i.rewardEndTime,"start time error","newRewardInfo",i);let c=i.rewardMint.equals(D.nh.default)?eb.WSOL.mint:i.rewardMint,u=t.rewardInfos.find(e=>e.rewardMint.equals(c));t1.assertArgument(u,"configuration does not exist","rewardInfo",u);let l=u?.rewardVault??D.nh.default,m=[],d=[],p=[],S=[],w=[];if(i.rewardMint.equals(D.nh.default)?(s=await tS.insertCreateWrappedNativeAccount({connection:e,owner:n.owner,payer:n.payer??n.owner,instructions:m,signers:w,amount:eS(i.rewardEndTime).sub(eS(i.rewardOpenTime)).mul(eS(i.rewardPerSecond)),instructionsType:p}),d.push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:s,owner:n.owner,payer:n.payer??n.owner,instructionsType:S}))):s=this._selectTokenAccount({programId:P.H_,tokenAccounts:n.tokenAccounts,mint:i.rewardMint,owner:n.owner,config:{associatedOnly:!1}}),t1.assertArgument(null!==s,"cannot found target token accounts","tokenAccounts",n.tokenAccounts),null===s)throw Error("cannot found target token accounts");let A=ti([e4("instruction"),e2("rewardReopenTime"),e2("rewardEndTime"),e2("rewardPerSecond")]),f=t$.alloc(A.span);A.encode({instruction:3,rewardReopenTime:eS(i.rewardOpenTime),rewardEndTime:eS(i.rewardEndTime),rewardPerSecond:eS(i.rewardPerSecond)},f);let y=[z(P.H_,!1),Z(t.id,!1),z(t.lpVault,!1),Z(l,!1),Z(s,!1),z(n.owner,!0)],k=new D.Sl({programId:t.programId,keys:y,data:f});return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:r,computeBudgetConfig:a,payer:n.payer??n.owner,innerTransaction:[{instructionTypes:p,instructions:m,signers:w},{instructionTypes:[g.farmV6Restart],instructions:[k],signers:[]},{instructionTypes:S,instructions:d,signers:[]}],lookupTableCache:o})}}static makeFarmCreatorAddRewardTokenInstructionSimple(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeFarmCreatorAddRewardTokenInstructionV6Simple(e):t1.throwArgumentError("invalid version","version",n)}static async makeFarmCreatorAddRewardTokenInstructionV6Simple({connection:e,poolKeys:t,userKeys:n,newRewardInfo:i,makeTxVersion:r,lookupTableCache:o,computeBudgetConfig:a}){let s;let c=t4.getAssociatedLedgerPoolAccount({programId:t.programId,poolId:t.id,mint:i.rewardMint.equals(D.nh.default)?eb.WSOL.mint:i.rewardMint,type:"rewardVault"}),u=[],l=[],m=[],d=[],p=[];if(i.rewardMint.equals(D.nh.default)?(s=await tS.insertCreateWrappedNativeAccount({connection:e,owner:n.owner,payer:n.payer??n.owner,instructions:u,signers:p,amount:eS(i.rewardEndTime).sub(eS(i.rewardOpenTime)).mul(eS(i.rewardPerSecond)),instructionsType:m}),l.push(tS.makeCloseAccountInstruction({programId:P.H_,tokenAccount:s,owner:n.owner,payer:n.payer??n.owner,instructionsType:d}))):s=this._selectTokenAccount({programId:P.H_,tokenAccounts:n.tokenAccounts,mint:i.rewardMint,owner:n.owner,config:{associatedOnly:!1}}),t1.assertArgument(null!==s,"cannot found target token accounts","tokenAccounts",n.tokenAccounts),null===s)throw Error("cannot found target token accounts");let S=i.rewardMint.equals(D.nh.default)?eb.WSOL.mint:i.rewardMint,w=ti([e4("instruction"),e2("isSet"),e2("rewardPerSecond"),e2("rewardOpenTime"),e2("rewardEndTime"),e2("rewardType")]),A=t$.alloc(w.span);w.encode({instruction:4,isSet:new(U())(1),rewardPerSecond:eS(i.rewardPerSecond),rewardOpenTime:eS(i.rewardOpenTime),rewardEndTime:eS(i.rewardEndTime),rewardType:eS(t0[i.rewardType])},A);let f=[z(P.H_,!1),z(W,!1),z(D.ze,!1),Z(t.id,!1),z(t.authority,!1),z(S,!1),Z(c,!1),Z(s,!1),z(n.owner,!0)],y=new D.Sl({programId:t.programId,keys:f,data:A});return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:r,computeBudgetConfig:a,payer:n.payer??n.owner,innerTransaction:[{instructionTypes:m,instructions:u,signers:p},{instructionTypes:[g.farmV6CreatorAddReward],instructions:[y],signers:[]},{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:o})}}static async makeDepositInstructionSimple({connection:e,poolKeys:t,fetchPoolInfo:n,ownerInfo:i,amount:r,associatedOnly:o=!0,checkCreateATAOwner:a=!1,makeTxVersion:s,lookupTableCache:c,computeBudgetConfig:u}){let l={};for(let e of i.tokenAccounts)if(o){let t=td(i.wallet,e.accountInfo.mint,e.programId).publicKey;t.equals(e.pubkey)&&(l[e.accountInfo.mint.toString()]=e.pubkey)}else l[e.accountInfo.mint.toString()]=e.pubkey;let m=[],d=[],p=[],S=[],g=[],{lpVault:w,apiPoolInfo:A,ledger:f}=n,y=w.mint,k=l[y.toString()];t1.assertArgument(k,"you don't have any lp","lp zero",l);let b=[];for(let t of A.rewardInfos){let n=i.useSOLBalance&&t.rewardMint.equals(eb.WSOL.mint),r=l[t.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:P.H_,mint:t.rewardMint,tokenAccounts:n?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:m,frontInstructionsType:p,endInstructions:n?d:[],endInstructionsType:n?S:[],signers:g},associatedOnly:!n&&o,checkCreateATAOwner:a});l[t.rewardMint.toString()]=r,b.push(r)}let T=await t4.getAssociatedLedgerAccount({programId:new D.nh(A.programId),poolId:new D.nh(A.id),owner:i.wallet,version:A.version});if(A.version<6&&!f){let e=t4.makeCreateAssociatedLedgerAccountInstruction({poolKeys:t,userKeys:{owner:i.wallet,ledger:T}});m.push(...e.innerTransaction.instructions),p.push(...e.innerTransaction.instructionTypes)}let I=t4.makeDepositInstruction({poolKeys:t,userKeys:{ledger:T,lpTokenAccount:k,owner:i.wallet,rewardTokenAccounts:b},amount:r});return{address:I.address,innerTransactions:await eo({connection:e,makeTxVersion:s,computeBudgetConfig:u,payer:i.feePayer,innerTransaction:[{instructionTypes:p,instructions:m,signers:g},I.innerTransaction,{instructionTypes:S,instructions:d,signers:[]}],lookupTableCache:c})}}static async makeWithdrawInstructionSimple({connection:e,fetchPoolInfo:t,ownerInfo:n,amount:i,associatedOnly:r=!0,checkCreateATAOwner:o=!1,makeTxVersion:a,lookupTableCache:s,computeBudgetConfig:c}){let u={};for(let e of n.tokenAccounts)if(r){let t=td(n.wallet,e.accountInfo.mint,e.programId).publicKey;t.equals(e.pubkey)&&(u[e.accountInfo.mint.toString()]=e.pubkey)}else u[e.accountInfo.mint.toString()]=e.pubkey;let l=[],m=[],d=[],p=[],S=[],g=[],w=[],{lpVault:A,wrapped:f,apiPoolInfo:y}=t;if(void 0===f)throw Error("no lp");let k=A.mint,b=n.useSOLBalance&&k.equals(eb.WSOL.mint),T=u[k.toString()]??await this._selectOrCreateTokenAccount({programId:P.H_,mint:k,tokenAccounts:b?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:l,frontInstructionsType:d,signers:w},associatedOnly:!b&&r,checkCreateATAOwner:o});u[k.toString()]=T;let I=[];for(let t of y.rewardInfos){let i=n.useSOLBalance&&t.rewardMint.equals(eb.WSOL.mint),a=u[t.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:P.H_,mint:t.rewardMint,tokenAccounts:i?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:l,frontInstructionsType:d,endInstructions:i?m:[],endInstructionsType:i?p:[],signers:w},associatedOnly:!i&&r,checkCreateATAOwner:o});u[t.rewardMint.toString()]=a,I.push(a)}let h=this.makeWithdrawInstruction({poolKeys:y,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:y.programId,poolId:y.id,owner:n.wallet,version:y.version}),lpTokenAccount:T,rewardTokenAccounts:I,owner:n.wallet},amount:i});return S.push(...h.innerTransaction.instructions),g.push(...h.innerTransaction.instructionTypes),{address:{},innerTransactions:await eo({connection:e,makeTxVersion:a,computeBudgetConfig:c,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:l,signers:w},{instructionTypes:g,instructions:S,signers:[]},{instructionTypes:p,instructions:m,signers:[]}],lookupTableCache:s})}}static async makeHarvestAllRewardInstructionSimple({connection:e,fetchPoolInfos:t,ownerInfo:n,associatedOnly:i=!0,checkCreateATAOwner:r=!1,makeTxVersion:o,lookupTableCache:a,computeBudgetConfig:s}){let c={};for(let e of n.tokenAccounts)if(i){let t=td(n.wallet,e.accountInfo.mint,e.programId).publicKey;t.equals(e.pubkey)&&(c[e.accountInfo.mint.toString()]=e.pubkey)}else c[e.accountInfo.mint.toString()]=e.pubkey;let u=[],l=[],m=[],d=[],p=[],S=[];for(let{lpVault:o,wrapped:a,apiPoolInfo:s,ledger:g}of Object.values(t)){if(void 0===a||void 0===g||!(void 0!==a.pendingRewards.find(e=>e.gt(eu))||g.deposited.isZero()))continue;let t=o.mint,w=n.useSOLBalance&&t.equals(eb.WSOL.mint),A=c[t.toString()]??await this._selectOrCreateTokenAccount({programId:P.H_,mint:t,tokenAccounts:w?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,frontInstructionsType:m,signers:S},associatedOnly:!w&&i,checkCreateATAOwner:r});c[t.toString()]=A;let f=[];for(let t of s.rewardInfos){let o=n.useSOLBalance&&t.rewardMint.equals(eb.WSOL.mint),a=c[t.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:P.H_,mint:t.rewardMint,tokenAccounts:o?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,frontInstructionsType:m,endInstructions:o?l:[],endInstructionsType:o?d:[],signers:S},associatedOnly:!o&&i,checkCreateATAOwner:r});c[t.rewardMint.toString()]=a,f.push(a)}let y=this.makeWithdrawInstruction({poolKeys:s,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:s.programId,poolId:s.id,owner:n.wallet,version:s.version}),lpTokenAccount:A,rewardTokenAccounts:f,owner:n.wallet},amount:0});p.push(y.innerTransaction)}return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:o,computeBudgetConfig:s,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:u,signers:S},...p,{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:a})}}static async makeV1InfoToV2PdaAndHarvestSimple({connection:e,wallet:t,tokenAccounts:n,programIdV3:i,programIdV5:r,makeTxVersion:o,lookupTableCache:a,computeBudgetConfig:s}){let c={};for(let e of n){let n=e.accountInfo.mint,i=td(t,n,e.programId).publicKey;i.equals(e.pubkey)&&(c[n.toString()]=i),void 0===c[n.toString()]&&(c[n.toString()]=e.pubkey)}let u=await e.getProgramAccounts(i,{filters:[{memcmp:{offset:40,bytes:t.toString()}}]}),l=await e.getProgramAccounts(r,{filters:[{memcmp:{offset:40,bytes:t.toString()}}]}),m={},d={};for(let e of u){let n=e.account.data.length===tV.span?tV:tB,r=n.decode(e.account.data),o=r.id.toString(),a=this.getAssociatedLedgerAccount({programId:i,poolId:r.id,owner:t,version:3});void 0===m[o]&&(m[o]={pda:void 0,other:[]}),a.equals(e.pubkey)?m[o].pda=e.pubkey:m[o].other.push(e.pubkey)}for(let e of l){let n=e.account.data.length===tE.span?tE:t_,i=n.decode(e.account.data),o=i.id.toString(),a=this.getAssociatedLedgerAccount({programId:r,poolId:i.id,owner:t,version:5});void 0===d[o]&&(d[o]={pda:void 0,other:[]}),a.equals(e.pubkey)?d[o].pda=e.pubkey:d[o].other.push(e.pubkey)}let p=[...Object.entries(m).filter(e=>e[1].other.length>0).map(e=>e[0]),...Object.entries(d).filter(e=>e[1].other.length>0).map(e=>e[0])],S=await e.getMultipleAccountsInfo(p.map(e=>new D.nh(e))),g={};for(let e=0;e<p.length;e++){let t=p[e],n=S[e];null!==n&&(g[t]=n.data)}let w=[],A=[],f=[],y=[],k=[];for(let[n,r]of Object.entries(m)){if(0===r.other.length||void 0===g[n])continue;let o=tL.decode(g[n]),[a,s]=await e.getMultipleAccountsInfo([o.lpVault,o.rewardVault]);if(null===a||null===s)throw Error("get lp and reward info error");let u=to.decode(a.data),l=to.decode(s.data),m=c[u.mint.toString()];void 0===m&&(m=await this._selectOrCreateTokenAccount({programId:a.owner,mint:u.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:A,endInstructions:[],endInstructionsType:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),c[u.mint.toString()]=m);let d=c[l.mint.toString()];if(void 0===d&&(d=await this._selectOrCreateTokenAccount({programId:s.owner,mint:l.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:A,endInstructions:l.mint.toString()===eA.mint?y:[],endInstructionsType:l.mint.toString()===eA.mint?k:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),c[l.mint.toString()]=d),void 0===r.pda){let e=this.makeCreateAssociatedLedgerAccountInstructionV3({poolKeys:{programId:i,id:new D.nh(n)},userKeys:{ledger:this.getAssociatedLedgerAccount({programId:i,poolId:new D.nh(n),owner:t,version:3}),owner:t}});f.push(e.innerTransaction)}let p=this.makeDepositInstructionV3({amount:0,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:i,poolId:new D.nh(n),owner:t,version:3}),owner:t,lpTokenAccount:m,rewardTokenAccounts:[d],auxiliaryLedgers:r.other},poolKeys:{programId:i,id:new D.nh(n),authority:this.getAssociatedAuthority({programId:i,poolId:new D.nh(n)}).publicKey,lpVault:o.lpVault,rewardInfos:[{rewardVault:o.rewardVault}]}});f.push(p.innerTransaction)}for(let[n,i]of Object.entries(d)){if(0===i.other.length||void 0===g[n])continue;let o=tD.decode(g[n]),[a,s,u]=await e.getMultipleAccountsInfo([o.lpVault,o.rewardVaultA,o.rewardVaultB]);if(null===a||null===s||null===u)throw Error("get lp and reward A / B info error");let l=to.decode(a.data),m=to.decode(s.data),d=to.decode(u.data),p=c[l.mint.toString()];void 0===p&&(p=await this._selectOrCreateTokenAccount({programId:a.owner,mint:l.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:A,endInstructions:[],endInstructionsType:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),c[l.mint.toString()]=p);let S=c[m.mint.toString()];void 0===S&&(S=await this._selectOrCreateTokenAccount({programId:s.owner,mint:m.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:A,endInstructions:m.mint.toString()===eA.mint?y:[],endInstructionsType:m.mint.toString()===eA.mint?k:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),c[m.mint.toString()]=S);let b=c[d.mint.toString()];if(void 0===b&&(b=await this._selectOrCreateTokenAccount({programId:u.owner,mint:d.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:A,endInstructions:d.mint.toString()===eA.mint?y:[],endInstructionsType:d.mint.toString()===eA.mint?k:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),c[d.mint.toString()]=b),void 0===i.pda){let e=this.makeCreateAssociatedLedgerAccountInstructionV5({poolKeys:{programId:r,id:new D.nh(n)},userKeys:{ledger:this.getAssociatedLedgerAccount({programId:r,poolId:new D.nh(n),owner:t,version:5}),owner:t}});f.push(e.innerTransaction)}let T=this.makeDepositInstructionV5({amount:0,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:r,poolId:new D.nh(n),owner:t,version:5}),owner:t,lpTokenAccount:p,rewardTokenAccounts:[S,b],auxiliaryLedgers:i.other},poolKeys:{programId:r,id:new D.nh(n),authority:this.getAssociatedAuthority({programId:r,poolId:new D.nh(n)}).publicKey,lpVault:o.lpVault,rewardInfos:[{rewardVault:o.rewardVaultA},{rewardVault:o.rewardVaultB}]}});f.push(T.innerTransaction)}return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:o,computeBudgetConfig:s,payer:t,innerTransaction:[{instructionTypes:A.slice(0,10),instructions:w.slice(0,10),signers:[]},...w.length>10?[{instructionTypes:A.slice(10),instructions:w.slice(10),signers:[]}]:[],...f,{instructionTypes:k,instructions:y,signers:[]}],lookupTableCache:a})}}static async makeDepositTokenInstruction({connection:e,programId:t,governanceProgramId:n,voteWeightAddinProgramId:i,realm:r,communityTokenMint:o,owner:a,poolId:s}){let c=tG(i,r,o).publicKey,u=this.getAssociatedLedgerAccount({programId:t,poolId:s,owner:a,version:3}),l=await e.getAccountInfo(u);if(null===l)throw Error("user is not staker");let m=tB.decode(l.data),d=m.deposited.sub(m.voteLockedBalance);if(d.eq(eu))throw Error("user do not has new stake amount");let p=tZ(t,s).publicKey,S=tz(t,s).publicKey,{publicKey:w,nonce:A}=tQ(i,c,a),f=td(w,p,P.H_).publicKey,{publicKey:y,nonce:k}=tj(i,c,a),b=tJ(n,r,o,a).publicKey,T=[],I=td(a,p,P.H_).publicKey,h=await e.getAccountInfo(I);null===h&&T.push(tS.makeCreateAssociatedTokenAccountInstruction({programId:P.H_,mint:p,associatedAccount:I,owner:a,payer:a,instructionsType:[]}));let C=await e.getAccountInfo(w);if(null===C){let e=function(e,t,n,i,r,o){let a=ti([e4("ins")]),s=[z(t,!1),z(n,!1),Z(o,!1),z(i,!1),Z(r,!0),z(W,!1)],c=tC.alloc(a.span);return a.encode({ins:23},c),new D.Sl({keys:s,programId:e,data:c})}(n,r,a,o,a,b);T.push(e,function(e,t,n,i,r,o,a,s){let c=ti([e4("voterBump"),e4("voterWeightRecordBump")]),u=[z(t,!1),Z(n,!1),z(r,!0),Z(i,!1),Z(o,!0),z(W,!1),z(K,!1),z(X,!1)],l=tC.alloc(c.span);c.encode({voterBump:a,voterWeightRecordBump:s},l);let m=tC.from([...tP.voterStakeRegistryCreateVoter,...l]);return new D.Sl({keys:u,programId:e,data:m})}(i,c,w,y,a,a,A,k))}let{index:L,isInit:v}=await t6(e,c,w,p);return v||T.push(function(e,t,n,i,r,o,a,s,c,u,l,m){let d=ti([e4("depositEntryIndex"),e4("kind"),e4("option"),e2("startTs"),e6("periods"),e7("allowClawback")]),p=[z(t,!1),Z(n,!1),Z(i,!1),z(r,!0),Z(o,!0),z(a,!1),z(W,!1),z(P.H_,!1),z(P._u,!1),z(K,!1)],S=tC.alloc(d.span);d.encode({depositEntryIndex:s,kind:0,option:void 0===u?0:1,startTs:u??eu,periods:0,allowClawback:m},S);let g=tC.from([...tP.voterStakeRegistryCreateDepositEntry,...S]);return new D.Sl({keys:p,programId:e,data:g})}(i,c,w,f,a,a,p,L,0,void 0,0,!1)),T.push(function(e,t,n,i,r,o,a,s,c,u,l,m,d){let p=ti([e4("depositEntryIndex"),e2("amount")]),S=[z(t,!1),Z(n,!1),Z(i,!1),Z(r,!1),z(o,!0),z(P.H_,!1),Z(a,!1),z(s,!1),Z(c,!1),z(u,!1),z(l,!1),z(X,!1)],g=tC.alloc(p.span);p.encode({depositEntryIndex:m,amount:d},g);let w=tC.from([...tP.voterStakeRegistryDeposit,...g]);return new D.Sl({keys:S,programId:e,data:w})}(i,c,w,f,I,a,u,s,p,S,t,L,d),function(e,t,n,i){let r=ti([]),o=[z(t,!1),z(n,!1),Z(i,!1),z(W,!1)],a=tC.alloc(r.span);r.encode({},a);let s=tC.from([...tP.voterStakeRegistryUpdateVoterWeightRecord,...a]);return new D.Sl({keys:o,programId:e,data:s})}(i,c,w,y)),{address:{},innerTransaction:{instructions:T,signers:[],lookupTableAddress:[],instructionTypes:Array(T.length).fill(g.test)}}}static async makeWithdrawTokenInstruction({connection:e,programId:t,governanceProgramId:n,voteWeightAddinProgramId:i,realm:r,communityTokenMint:o,owner:a,poolId:s}){let c=tG(i,r,o).publicKey,u=this.getAssociatedLedgerAccount({programId:t,poolId:s,owner:a,version:3}),l=await e.getAccountInfo(u);if(null===l)throw Error("user is not staker");let m=tB.decode(l.data);if(m.voteLockedBalance.eq(eu))throw Error("user has vote locked balance = 0");let d=tZ(t,s).publicKey,p=tz(t,s).publicKey,{publicKey:S}=tQ(i,c,a),w=td(S,d,P.H_).publicKey,{publicKey:A}=tj(i,c,a),f=tJ(n,r,o,a).publicKey,y=[],{index:k,isInit:b}=await t6(e,c,S,d);if(!b)throw Error("deposit entry index check error");return y.push(function(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S){let g=ti([e4("depositEntryIndex"),e2("amount")]),w=[z(t,!1),Z(n,!1),z(i,!0),z(r,!1),Z(o,!1),Z(a,!1),Z(s,!1),z(P.H_,!1),Z(c,!1),z(u,!1),Z(l,!1),z(m,!1),z(d,!1),z(X,!1)],A=tC.alloc(g.span);g.encode({depositEntryIndex:p,amount:S},A);let f=tC.from([...tP.voterStakeRegistryWithdraw,...A]);return new D.Sl({keys:w,programId:e,data:f})}(i,c,S,a,f,A,w,td(a,d,P.H_).publicKey,u,s,d,p,t,k,m.voteLockedBalance)),{address:{},innerTransaction:{instructions:y,signers:[],lookupTableAddress:[],instructionTypes:Array(y.length).fill(g.test)}}}}async function t6(e,t,n,i){let r=await e.getAccountInfo(t);if(null===r)throw Error("registrar info check error");let o=tF.decode(r.data),a=o.votingMints.findIndex(e=>e.mint.equals(i));if(-1===a)throw Error("find voter mint error");let s=await e.getAccountInfo(n);if(null===s)return{index:a,isInit:!1};let c=tX.decode(s.data),u=c.deposits.findIndex(e=>e.isUsed&&e.votingMintConfigIdx===a);return -1===u?{index:a,isInit:!1}:{index:u,isInit:!0}}ey.RAY_USDT_V4,ef.RAY,ey.xCOPE_USDC_V4,ey.STEP_USDC_V4,ey.MEDIA_USDC_V4,ey.COPE_USDC_V4,ey.MER_USDC_V4,ey.ROPE_USDC_V4,ey.ALEPH_USDC_V4,ey.TULIP_USDC_V4,ey.SNY_USDC_V4,ey.BOP_RAY_V4,ey.SLRS_USDC_V4,ey.SAMO_RAY_V4,ey.LIKE_USDC_V4,ey.RAY_SOL_V4,ey.RAY_USDC_V4,ey.RAY_ETH_V4,ey.RAY_SRM_V4,ey.MNGO_USDC_V4,ey.COPE_RAY_V4,ey.LIKE_RAY_V4,ey.MEDIA_RAY_V4,ey.MER_RAY_V4,ey.SLRS_RAY_V4,ey.SNY_RAY_V4,ey.TULIP_RAY_V4,ey.ALEPH_RAY_V4,ey.RAY_SRM_V4,ey.ATLAS_USDC_V4,ey.POLIS_USDC_V4,ey.ATLAS_RAY_V4,ey.POLIS_RAY_V4,ey.GRAPE_USDC_V4,ey.LARIX_USDC_V4,ey.LARIX_RAY_V4,ey.stSOL_USDC_V4,ey.BTC_mSOL_V4,ey.ETH_mSOL_V4,ey.mSOL_USDT_V4,ey.MNDE_mSOL_V4,ey.mSOL_USDC_V4,ey.mSOL_RAY_V4,ey.LIQ_USDC_V4,ey.LIQ_RAY_V4,ey.SYP_RAY_V4,ey.SYP_SOL_V4,ey.SYP_USDC_V4,ey.WOOF_RAY_V4,ey.KIN_RAY_V4,ey.STARS_USDC_V4,ey.weWETH_SOL_V4,ey.weWETH_USDC_V4,ey.weUNI_USDC_V4,ey.weSUSHI_USDC_V4,ey.weAXS_USDC_V4,ey.weDYDX_USDC_V4,ey.weSHIB_USDC_V4,ey.weSAND_USDC_V4,ey.weMANA_USDC_V4,ey.wbWBNB_USDC_V4,ey.wePEOPLE_USDC_V4,ey.SRM_USDC_V4,ey.CAVE_USDC_V4,ey.GENE_USDC_V4,ey.GENE_RAY_V4,ey.CWAR_USDC_V4,ey.SONAR_USDC_V4,ey.APT_USDC_V4,ey.SHILL_USDC_V4,ey.DFL_USDC_V4,ey.BOKU_USDC_V4,ey.MIMO_SOL_V4,ey.XTAG_USDC_V4,ey.TTT_USDC_V4,ey.SOL_USDC_V4,ey.SOL_USDT_V4,ey.RUN_USDC_V4,ey.CRWNY_RAY_V4,ey.CRWNY_USDC_V4,ey.REAL_USDC_V4,ey.BLOCK_USDC_V4,ey.FRKT_SOL_V4,ey.FRKT_USDC_V4,ey.MBS_USDC_V4,ey.PRISM_USDC_V4,ey.CHICKS_USDC_V4,ey.MEAN_RAY_V4,ey.TINY_USDC_V4,ey.SCY_USDC_V4;let t2=ti([e2("status"),e2("nonce"),e2("maxOrder"),e2("depth"),e2("baseDecimal"),e2("quoteDecimal"),e2("state"),e2("resetFlag"),e2("minSize"),e2("volMaxCutRatio"),e2("amountWaveRatio"),e2("baseLotSize"),e2("quoteLotSize"),e2("minPriceMultiplier"),e2("maxPriceMultiplier"),e2("systemDecimalValue"),e2("minSeparateNumerator"),e2("minSeparateDenominator"),e2("tradeFeeNumerator"),e2("tradeFeeDenominator"),e2("pnlNumerator"),e2("pnlDenominator"),e2("swapFeeNumerator"),e2("swapFeeDenominator"),e2("baseNeedTakePnl"),e2("quoteNeedTakePnl"),e2("quoteTotalPnl"),e2("baseTotalPnl"),e2("poolOpenTime"),e2("punishPcAmount"),e2("punishCoinAmount"),e2("orderbookToInitTime"),e5("swapBaseInAmount"),e5("swapQuoteOutAmount"),e2("swapBase2QuoteFee"),e5("swapQuoteInAmount"),e5("swapBaseOutAmount"),e2("swapQuote2BaseFee"),e9("baseVault"),e9("quoteVault"),e9("baseMint"),e9("quoteMint"),e9("lpMint"),e9("openOrders"),e9("marketId"),e9("marketProgramId"),e9("targetOrders"),e9("withdrawQueue"),e9("lpVault"),e9("owner"),e2("lpReserve"),tr(e2(),3,"padding")]),t5=ti([e2("accountType"),e2("status"),e2("nonce"),e2("maxOrder"),e2("depth"),e2("baseDecimal"),e2("quoteDecimal"),e2("state"),e2("resetFlag"),e2("minSize"),e2("volMaxCutRatio"),e2("amountWaveRatio"),e2("baseLotSize"),e2("quoteLotSize"),e2("minPriceMultiplier"),e2("maxPriceMultiplier"),e2("systemDecimalsValue"),e2("abortTradeFactor"),e2("priceTickMultiplier"),e2("priceTick"),e2("minSeparateNumerator"),e2("minSeparateDenominator"),e2("tradeFeeNumerator"),e2("tradeFeeDenominator"),e2("pnlNumerator"),e2("pnlDenominator"),e2("swapFeeNumerator"),e2("swapFeeDenominator"),e2("baseNeedTakePnl"),e2("quoteNeedTakePnl"),e2("quoteTotalPnl"),e2("baseTotalPnl"),e2("poolOpenTime"),e2("punishPcAmount"),e2("punishCoinAmount"),e2("orderbookToInitTime"),e5("swapBaseInAmount"),e5("swapQuoteOutAmount"),e5("swapQuoteInAmount"),e5("swapBaseOutAmount"),e2("swapQuote2BaseFee"),e2("swapBase2QuoteFee"),e9("baseVault"),e9("quoteVault"),e9("baseMint"),e9("quoteMint"),e9("lpMint"),e9("modelDataAccount"),e9("openOrders"),e9("marketId"),e9("marketProgramId"),e9("targetOrders"),e9("owner"),tr(e2(),64,"padding")]),t3={4:t2,5:t5};var t8=n(42624),t9=n(37407).Buffer;let t7={createPool:[233,146,209,142,207,104,64,188],initReward:[95,135,192,196,242,129,230,68],setRewardEmissions:[112,52,167,75,32,201,211,137],openPosition:[77,184,74,214,112,86,241,199],closePosition:[123,134,81,0,49,68,98,98],increaseLiquidity:[133,29,89,223,69,238,176,10],decreaseLiquidity:[58,127,188,62,79,82,196,96],swap:[43,4,237,11,26,201,30,98],collectReward:[18,237,166,197,34,16,213,144]};function ne(e,t,n,i,r,o,a,s,c,u,l,m,d,p){let S=ti([e5("sqrtPriceX64"),e2("startTime")]),g=t9.alloc(S.span);S.encode({sqrtPriceX64:d,startTime:p},g);let w=t9.from([...t7.createPool,...g]);return new D.Sl({keys:[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1}],programId:e,data:w})}function nt(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S,g,w,A,f,y,k,b){let T=ti([e2("amount"),e2("otherAmountThreshold"),e5("sqrtPriceLimitX64"),e7("isBaseInput")]),I=[...k?[{pubkey:k,isSigner:!1,isWritable:!0}]:[],...b?[{pubkey:b,isSigner:!1,isWritable:!0}]:[],...p.map(e=>({pubkey:e,isSigner:!1,isWritable:!0}))],h=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:F,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},...I],C=t9.alloc(T.span);T.encode({amount:w,otherAmountThreshold:A,sqrtPriceLimitX64:f,isBaseInput:y},C);let L=t9.from([...t7.swap,...C]);return new D.Sl({keys:h,programId:e,data:L})}let nn=new(U())(-1),ni=new(U())(1).shln(64),nr=new(U())(1).shln(128),no=ni.sub(el),na=nr.subn(1),ns=new(U())("4295048016"),nc=new(U())("79226673521066979257578248091"),nu=new(U())(10).pow(new(U())(6));(u=w||(w={}))[u.rate_500=500]="rate_500",u[u.rate_3000=3e3]="rate_3000",u[u.rate_10000=1e4]="rate_10000",w.rate_500,w.rate_3000,w.rate_10000;let nl=new(U())("18446744073700000000");function nm(e){let t=new ArrayBuffer(4),n=new DataView(t);return n.setInt32(0,e,!1),new Uint8Array(t)}function nd(e,t){let n=0;for(let i=e-1;i>=0&&!t.testn(i);i--)n++;return n}function np(e,t){let n=0;for(let i=0;i<e&&!t.testn(i);i++)n++;return n}function nS(e,t){for(let n=0;n<e;n++)if(t.testn(n))return!1;return!0}var ng=n(37407).Buffer;ng.from("amm_config","utf8");let nw=ng.from("pool","utf8"),nA=ng.from("pool_vault","utf8"),nf=ng.from("pool_reward_vault","utf8"),ny=ng.from("position","utf8"),nk=ng.from("tick_array","utf8"),nb=ng.from("operation","utf8"),nT=ng.from("pool_tick_array_bitmap_extension","utf8");function nI(e,t,n,i){return G([nw,t.toBuffer(),n.toBuffer(),i.toBuffer()],e)}function nh(e,t,n){return G([nA,t.toBuffer(),n.toBuffer()],e)}function nC(e,t,n){return G([nk,t.toBuffer(),nm(n)],e)}function nP(e,t,n,i){return G([ny,t.toBuffer(),nm(n),nm(i)],e)}function nL(e,t){return G([ny,t.toBuffer()],e)}function nD(e){return G([ng.from("metadata","utf8"),Y.toBuffer(),e.toBuffer()],Y)}function nv(e,t){return G([nT,t.toBuffer()],e)}class nR{static async getTickArrays(e,t,n,i,r,o,a){let s=[],c=nO.getTickArrayStartIndexByTick(i,r),u=nO.getInitializedTickArrayInRange(o,a,r,c,Math.floor(7.5));for(let e=0;e<u.length;e++){let{publicKey:i}=nC(t,n,u[e]);s.push(i)}let l=(await $(e,s)).map(e=>null!==e?nF.decode(e.data):null),m={};for(let e=0;e<s.length;e++){let t=l[e];null!==t&&(m[t.startTickIndex]={...t,address:s[e]})}return m}static nextInitializedTick(e,t,n,i,r,o){let{initializedTick:a,tickArrayAddress:s,tickArrayStartTickIndex:c}=this.nextInitializedTickInOneArray(e,t,n,i,r,o);for(;void 0==a||a.liquidityGross.lten(0);){if(c=nO.getNextTickArrayStartIndex(c,r,o),this.checkIsValidStartIndex(c,r))throw Error("No enough initialized tickArray");let i=n[c];if(void 0===i)continue;let{nextTick:u,tickArrayAddress:l,tickArrayStartTickIndex:m}=this.firstInitializedTickInOneArray(e,t,i,o);[a,s,c]=[u,l,m]}if(void 0==a)throw Error("No invaild tickArray cache");return{nextTick:a,tickArrayAddress:s,tickArrayStartTickIndex:c}}static nextInitializedTickArray(e,t,n,i,r){let o=Math.floor(e/nR.tickCount(t)),a=n?nO.searchLowBitFromStart(i,r,o-1,1,t):nO.searchHightBitFromStart(i,r,o+1,1,t);return a.length>0?{isExist:!0,nextStartIndex:a[0]}:{isExist:!1,nextStartIndex:0}}static firstInitializedTickInOneArray(e,t,n,i){let r;if(i){let e=nU-1;for(;e>=0;){let t=n.ticks[e];if(t.liquidityGross.gtn(0)){r=t;break}e-=1}}else{let e=0;for(;e<nU;){let t=n.ticks[e];if(t.liquidityGross.gtn(0)){r=t;break}e+=1}}let{publicKey:o}=nC(e,t,n.startTickIndex);return{nextTick:r,tickArrayAddress:o,tickArrayStartTickIndex:n.startTickIndex}}static nextInitializedTickInOneArray(e,t,n,i,r,o){let a;let s=nO.getTickArrayStartIndexByTick(i,r),c=Math.floor((i-s)/r),u=n[s];if(void 0==u)return{initializedTick:void 0,tickArrayAddress:void 0,tickArrayStartTickIndex:s};if(o)for(;c>=0;){let e=u.ticks[c];if(e.liquidityGross.gtn(0)){a=e;break}c-=1}else for(c+=1;c<nU;){let e=u.ticks[c];if(e.liquidityGross.gtn(0)){a=e;break}c+=1}let{publicKey:l}=nC(e,t,s);return{initializedTick:a,tickArrayAddress:l,tickArrayStartTickIndex:u.startTickIndex}}static getArrayStartIndex(e,t){let n=this.tickCount(t);return Math.floor(e/n)*n}static checkIsValidStartIndex(e,t){if(nO.checkIsOutOfBoundary(e)){if(e>443636)return!1;let n=nO.getTickArrayStartIndexByTick(-443636,t);return e==n}return e%this.tickCount(t)==0}static tickCount(e){return nU*e}}let nU=60;class nO{static getTickArrayAddressByTick(e,t,n,i){let r=nO.getTickArrayStartIndexByTick(n,i),{publicKey:o}=nC(e,t,r);return o}static getTickOffsetInArray(e,t){if(e%t!=0)throw Error("tickIndex % tickSpacing not equal 0");let n=nO.getTickArrayStartIndexByTick(e,t),i=Math.floor((e-n)/t);if(i<0||i>=nU)throw Error("tick offset in array overflow");return i}static getTickArrayBitIndex(e,t){let n=nR.tickCount(t),i=e/n;return e<0&&e%n!=0?Math.ceil(i)-1:Math.floor(i)}static getTickArrayStartIndexByTick(e,t){return this.getTickArrayBitIndex(e,t)*nR.tickCount(t)}static getTickArrayOffsetInBitmapByTick(e,t){return Math.abs(Math.floor(e/(t*nU))+512)}static checkTickArrayIsInitialized(e,t,n){let i=n*nU,r=Math.abs(Math.floor(t/i)+512);return{isInitialized:e.testn(r),startIndex:(r-512)*i}}static getNextTickArrayStartIndex(e,t,n){return n?e-t*nU:e+t*nU}static mergeTickArrayBitmap(e){let t=new(U())(0);for(let n=0;n<e.length;n++)t=t.add(e[n].shln(64*n));return t}static getInitializedTickArrayInRange(e,t,n,i,r){let o=Math.floor(i/(n*nU));return[...nO.searchLowBitFromStart(e,t,o-1,r,n),...nO.searchHightBitFromStart(e,t,o,r,n)]}static getAllInitializedTickArrayStartIndex(e,t,n){return nO.searchHightBitFromStart(e,t,0,512,n)}static getAllInitializedTickArrayInfo(e,t,n,i,r){let o=[],a=nO.getAllInitializedTickArrayStartIndex(n,i,r);for(let n of a){let{publicKey:i}=nC(e,t,n);o.push({tickArrayStartIndex:n,tickArrayAddress:i})}return o}static getAllInitializedTickInTickArray(e){return e.ticks.filter(e=>e.liquidityGross.gtn(0))}static searchLowBitFromStart(e,t,n,i,r){let o=[...[...t.negativeTickArrayBitmap].reverse(),e.slice(0,8),e.slice(8,16),...t.positiveTickArrayBitmap].map(e=>nO.mergeTickArrayBitmap(e)),a=[];for(;n>=-7680;){let e=Math.floor((n+7680)/512),t=(n+7680)%512;if(o[e].testn(t)&&a.push(n),n--,a.length===i)break}let s=nR.tickCount(r);return a.map(e=>e*s)}static searchHightBitFromStart(e,t,n,i,r){let o=[...[...t.negativeTickArrayBitmap].reverse(),e.slice(0,8),e.slice(8,16),...t.positiveTickArrayBitmap].map(e=>nO.mergeTickArrayBitmap(e)),a=[];for(;n<7680;){let e=Math.floor((n+7680)/512),t=(n+7680)%512;if(o[e].testn(t)&&a.push(n),n++,a.length===i)break}let s=nR.tickCount(r);return a.map(e=>e*s)}static checkIsOutOfBoundary(e){return e<-443636||e>443636}static nextInitTick(e,t,n,i,r){let o=nR.getArrayStartIndex(t,n);if(o!=e.startTickIndex)return null;let a=Math.floor((t-e.startTickIndex)/n);if(i)for(;a>=0;){if(e.ticks[a].liquidityGross.gtn(0))return e.ticks[a];a-=1}else for(r||(a+=1);a<nU;){if(e.ticks[a].liquidityGross.gtn(0))return e.ticks[a];a+=1}return null}static firstInitializedTick(e,t){if(t){let t=nU-1;for(;t>=0;){if(e.ticks[t].liquidityGross.gtn(0))return e.ticks[t];t-=1}}else{let t=0;for(;t<nU;){if(e.ticks[t].liquidityGross.gtn(0))return e.ticks[t];t+=1}}throw Error(`firstInitializedTick check error: ${e} - ${t}`)}}class nq{static maxTickInTickarrayBitmap(e){return e*nU*512}static getBitmapTickBoundary(e,t){let n=this.maxTickInTickarrayBitmap(t),i=Math.floor(Math.abs(e)/n);e<0&&Math.abs(e)%n!=0&&(i+=1);let r=n*i;return e<0?{minValue:-r,maxValue:-r+n}:{minValue:r,maxValue:r+n}}static nextInitializedTickArrayStartIndex(e,t,n,i){if(!nR.checkIsValidStartIndex(t,n))throw Error("nextInitializedTickArrayStartIndex check error");let r=this.maxTickInTickarrayBitmap(n),o=i?t-nR.tickCount(n):t+nR.tickCount(n);if(o<-r||o>=r)return{isInit:!1,tickIndex:t};let a=n*nU,s=o/a+512;o<0&&o%a!=0&&s--;let c=Math.abs(s);if(i){let t=e.shln(1024-c-1),n=nS(1024,t)?null:nd(1024,t);return null!==n?{isInit:!0,tickIndex:(c-n-512)*a}:{isInit:!1,tickIndex:-r}}{let t=e.shrn(c),i=nS(1024,t)?null:np(1024,t);return null!==i?{isInit:!0,tickIndex:(c+i-512)*a}:{isInit:!1,tickIndex:r-nR.tickCount(n)}}}}class nV{static getBitmapOffset(e,t){if(!nR.checkIsValidStartIndex(e,t))throw Error("No enough initialized tickArray");this.checkExtensionBoundary(e,t);let n=nq.maxTickInTickarrayBitmap(t),i=Math.floor(Math.abs(e)/n)-1;return e<0&&Math.abs(e)%n==0&&i--,i}static getBitmap(e,t,n){let i=this.getBitmapOffset(e,t);return e<0?{offset:i,tickarrayBitmap:n.negativeTickArrayBitmap[i]}:{offset:i,tickarrayBitmap:n.positiveTickArrayBitmap[i]}}static checkExtensionBoundary(e,t){let{positiveTickBoundary:n,negativeTickBoundary:i}=this.extensionTickBoundary(t);if(e>=i&&e<n)throw Error("checkExtensionBoundary -> InvalidTickArrayBoundary")}static extensionTickBoundary(e){let t=nq.maxTickInTickarrayBitmap(e),n=-t;if(443636<=t)throw Error(`extensionTickBoundary check error: 443636, ${t}`);if(n<=-443636)throw Error(`extensionTickBoundary check error: ${n}, -443636`);return{positiveTickBoundary:t,negativeTickBoundary:n}}static checkTickArrayIsInit(e,t,n){let{tickarrayBitmap:i}=this.getBitmap(e,t,n),r=this.tickArrayOffsetInBitmap(e,t);return{isInitialized:void 0!=nO.mergeTickArrayBitmap(i)&&nO.mergeTickArrayBitmap(i).testn(r),startIndex:e}}static nextInitializedTickArrayFromOneBitmap(e,t,n,i){let r=nR.tickCount(t),o=n?e-r:e+r,a=nR.getArrayStartIndex(-443636,t),s=nR.getArrayStartIndex(443636,t);if(o<a||o>s)return{isInit:!1,tickIndex:o};let{tickarrayBitmap:c}=this.getBitmap(o,t,i);return this.nextInitializedTickArrayInBitmap(c,o,t,n)}static nextInitializedTickArrayInBitmap(e,t,n,i){let{minValue:r,maxValue:o}=nq.getBitmapTickBoundary(t,n),a=this.tickArrayOffsetInBitmap(t,n);if(i){let i=nO.mergeTickArrayBitmap(e).shln(511-a),o=nS(512,i)?null:nd(512,i);if(null===o)return{isInit:!1,tickIndex:r};{let e=t-o*nR.tickCount(n);return{isInit:!0,tickIndex:e}}}{let i=nO.mergeTickArrayBitmap(e).shrn(a),r=nS(512,i)?null:np(512,i);if(null===r)return{isInit:!1,tickIndex:o-nR.tickCount(n)};{let e=t+r*nR.tickCount(n);return{isInit:!0,tickIndex:e}}}}static tickArrayOffsetInBitmap(e,t){let n=Math.abs(e)%nq.maxTickInTickarrayBitmap(t),i=Math.floor(n/nR.tickCount(t));return e<0&&0!=n&&(i=512-i),i}}ti([ej(8),e4("bump"),eG("index"),e9(""),e6("protocolFeeRate"),e6("tradeFeeRate"),eG("tickSpacing"),e6("fundFeeRate"),tr(e6(),1,"padding"),e9("fundOwner"),tr(e2(),3,"padding")]);let nB=ti([e6("blockTimestamp"),e5("sqrtPriceX64"),e5("cumulativeTimePriceX64"),tr(e5(),1,"")]),nE=ti([ej(8),e7("initialized"),e9("poolId"),tr(nB,1e3,"observations"),tr(e5(),5,"")]),n_=ti([e4("rewardState"),e2("openTime"),e2("endTime"),e2("lastUpdateTime"),e5("emissionsPerSecondX64"),e2("rewardTotalEmissioned"),e2("rewardClaimed"),e9("tokenMint"),e9("tokenVault"),e9("creator"),e5("rewardGrowthGlobalX64")]),nx=ti([ej(8),e4("bump"),e9("ammConfig"),e9("creator"),e9("mintA"),e9("mintB"),e9("vaultA"),e9("vaultB"),e9("observationId"),e4("mintDecimalsA"),e4("mintDecimalsB"),eG("tickSpacing"),e5("liquidity"),e5("sqrtPriceX64"),ez("tickCurrent"),eG("observationIndex"),eG("observationUpdateDuration"),e5("feeGrowthGlobalX64A"),e5("feeGrowthGlobalX64B"),e2("protocolFeesTokenA"),e2("protocolFeesTokenB"),e5("swapInAmountTokenA"),e5("swapOutAmountTokenB"),e5("swapInAmountTokenB"),e5("swapOutAmountTokenA"),e4("status"),tr(e4(),7,""),tr(n_,3,"rewardInfos"),tr(e2(),16,"tickArrayBitmap"),e2("totalFeesTokenA"),e2("totalFeesClaimedTokenA"),e2("totalFeesTokenB"),e2("totalFeesClaimedTokenB"),e2("fundFeesTokenA"),e2("fundFeesTokenB"),e2("startTime"),tr(e2(),57,"padding")]),nM=ti([e5("growthInsideLastX64"),e2("rewardAmountOwed")]),nN=ti([ej(8),e4("bump"),e9("nftMint"),e9("poolId"),ez("tickLower"),ez("tickUpper"),e5("liquidity"),e5("feeGrowthInsideLastX64A"),e5("feeGrowthInsideLastX64B"),e2("tokenFeesOwedA"),e2("tokenFeesOwedB"),tr(nM,3,"rewardInfos"),tr(e2(),8,"")]);ti([ej(8),e4("bump"),e9("poolId"),ez("tickLowerIndex"),ez("tickUpperIndex"),e5("liquidity"),e5("feeGrowthInsideLastX64A"),e5("feeGrowthInsideLastX64B"),e2("tokenFeesOwedA"),e2("tokenFeesOwedB"),tr(e5(),3,"rewardGrowthInside"),tr(e2(),8,"")]);let nW=ti([ez("tick"),new e1(16,!0,"liquidityNet"),e5("liquidityGross"),e5("feeGrowthOutsideX64A"),e5("feeGrowthOutsideX64B"),tr(e5(),3,"rewardGrowthsOutsideX64"),tr(e6(),13,"")]),nF=ti([ej(8),e9("poolId"),ez("startTickIndex"),tr(nW,nU,"ticks"),e4("initializedTickCount"),tr(e4(),115,"")]),nK=ti([ej(329),tr(e9(),100,"whitelistMints")]),nY=ti([ej(8),e9("poolId"),tr(tr(e2(),8),12,"positiveTickArrayBitmap"),tr(tr(e2(),8),12,"negativeTickArrayBitmap")]);class nX{static getOutputAmountAndRemainAccounts(e,t,n,i,r,o=!1){let a=n.equals(e.mintA.mint),s=[],{isExist:c,startIndex:u,nextAccountMeta:l}=this.getFirstInitializedTickArray(e,a);if(!c||void 0===u||!l)throw Error("Invalid tick array");try{let t=this.preInitializedTickArrayStartIndex(e,a);if(t.isExist){let{publicKey:n}=nC(e.programId,e.id,t.nextStartIndex);s.push(n)}}catch(e){}s.push(l);let{allTrade:m,amountSpecifiedRemaining:d,amountCalculated:p,accounts:S,sqrtPriceX64:g,feeAmount:w}=nJ.swapCompute(e.programId,e.id,t,e.tickArrayBitmap,e.exBitmapInfo,a,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,i,u,r,o);return s.push(...S),{allTrade:m,realTradeAmountIn:i.sub(d),expectedAmountOut:p.mul(nn),remainingAccounts:s,executionPrice:g,feeAmount:w}}static getInputAmountAndRemainAccounts(e,t,n,i,r){let o=n.equals(e.mintB.mint),a=[],{isExist:s,startIndex:c,nextAccountMeta:u}=this.getFirstInitializedTickArray(e,o);if(!s||void 0===c||!u)throw Error("Invalid tick array");try{let t=this.preInitializedTickArrayStartIndex(e,o);if(t.isExist){let{publicKey:n}=nC(e.programId,e.id,t.nextStartIndex);a.push(n)}}catch(e){}a.push(u);let{amountCalculated:l,accounts:m,sqrtPriceX64:d,feeAmount:p}=nJ.swapCompute(e.programId,e.id,t,e.tickArrayBitmap,e.exBitmapInfo,o,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,i.mul(nn),c,r);return a.push(...m),{expectedAmountIn:l,remainingAccounts:a,executionPrice:d,feeAmount:p}}static getFirstInitializedTickArray(e,t){let{isInitialized:n,startIndex:i}=nX.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[e.tickCurrent])?nV.checkTickArrayIsInit(nR.getArrayStartIndex(e.tickCurrent,e.tickSpacing),e.tickSpacing,e.exBitmapInfo):nO.checkTickArrayIsInitialized(nO.mergeTickArrayBitmap(e.tickArrayBitmap),e.tickCurrent,e.tickSpacing);if(n){let{publicKey:t}=nC(e.programId,e.id,i);return{isExist:!0,startIndex:i,nextAccountMeta:t}}let{isExist:r,nextStartIndex:o}=this.nextInitializedTickArrayStartIndex(e,nR.getArrayStartIndex(e.tickCurrent,e.tickSpacing),t);if(r){let{publicKey:t}=nC(e.programId,e.id,o);return{isExist:!0,startIndex:o,nextAccountMeta:t}}return{isExist:!1,nextAccountMeta:void 0,startIndex:void 0}}static preInitializedTickArrayStartIndex(e,t){let n=Math.floor(e.tickCurrent/nR.tickCount(e.tickSpacing)),i=t?nO.searchHightBitFromStart(e.tickArrayBitmap,e.exBitmapInfo,n+1,1,e.tickSpacing):nO.searchLowBitFromStart(e.tickArrayBitmap,e.exBitmapInfo,n-1,1,e.tickSpacing);return i.length>0?{isExist:!0,nextStartIndex:i[0]}:{isExist:!1,nextStartIndex:0}}static nextInitializedTickArrayStartIndex(e,t,n){for(t=nR.getArrayStartIndex(t,e.tickSpacing);;){let{isInit:i,tickIndex:r}=nq.nextInitializedTickArrayStartIndex(nO.mergeTickArrayBitmap(e.tickArrayBitmap),t,e.tickSpacing,n);if(i)return{isExist:!0,nextStartIndex:r};t=r;let{isInit:o,tickIndex:a}=nV.nextInitializedTickArrayFromOneBitmap(t,e.tickSpacing,n,e.exBitmapInfo);if(o)return{isExist:!0,nextStartIndex:a};if((t=a)<-443636||t>443636)return{isExist:!1,nextStartIndex:0}}}static async updatePoolRewardInfos({connection:e,apiPoolInfo:t,chainTime:n,poolLiquidity:i,rewardInfos:r}){let o=[];for(let a=0;a<r.length;a++){let s=r[a],c=t.rewardInfos[a]?.programId??(await e.getAccountInfo(s.tokenMint))?.owner;if(void 0===c)throw Error("get new reward mint info error");let u={...s,perSecond:nH.x64ToDecimal(s.emissionsPerSecondX64),remainingRewards:void 0,tokenProgramId:new D.nh(c)};if(u.tokenMint.equals(D.nh.default))continue;if(n<=u.openTime.toNumber()||i.eq(eu)){o.push(u);continue}let l=new(U())(Math.min(u.endTime.toNumber(),n)),m=l.sub(u.lastUpdateTime),d=nH.mulDivFloor(m,u.emissionsPerSecondX64,i),p=u.rewardGrowthGlobalX64.add(d),S=nH.mulDivFloor(m,u.emissionsPerSecondX64,ni),g=u.rewardTotalEmissioned.add(S);o.push({...u,rewardGrowthGlobalX64:p,rewardTotalEmissioned:g,lastUpdateTime:l})}return o}static isOverflowDefaultTickarrayBitmap(e,t){let{maxTickBoundary:n,minTickBoundary:i}=this.tickRange(e);for(let r of t){let t=nO.getTickArrayStartIndexByTick(r,e);if(t>=n||t<i)return!0}return!1}static tickRange(e){let t=nq.maxTickInTickarrayBitmap(e),n=-t;return t>443636&&(t=443636),n<-443636&&(n=-443636),{maxTickBoundary:t,minTickBoundary:n}}static get_tick_array_offset(e,t){if(!nR.checkIsValidStartIndex(e,t))throw Error("No enough initialized tickArray");return e/nR.tickCount(t)*512}}class nH{static mulDivRoundingUp(e,t,n){let i=e.mul(t),r=i.div(n);return i.mod(n).eq(eu)||(r=r.add(el)),r}static mulDivFloor(e,t,n){if(n.eq(eu))throw Error("division by 0");return e.mul(t).div(n)}static mulDivCeil(e,t,n){if(n.eq(eu))throw Error("division by 0");let i=e.mul(t).add(n.sub(el));return i.div(n)}static x64ToDecimal(e,t){return new t8.Z(e.toString()).div(t8.Z.pow(2,64)).toDecimalPlaces(t)}static decimalToX64(e){return new(U())(e.mul(t8.Z.pow(2,64)).floor().toFixed())}static wrappingSubU128(e,t){return e.add(nr).sub(t).mod(nr)}}function nG(e,t){return nZ(e.mul(t),64,256)}function nZ(e,t,n){let i=e.toTwos(n).shrn(t);return i.imaskn(n-t+1),i.fromTwos(n-t)}class nz{static sqrtPriceX64ToPrice(e,t,n){return nH.x64ToDecimal(e).pow(2).mul(t8.Z.pow(10,t-n))}static priceToSqrtPriceX64(e,t,n){return nH.decimalToX64(e.mul(t8.Z.pow(10,n-t)).sqrt())}static getNextSqrtPriceX64FromInput(e,t,n,i){if(!e.gt(eu))throw Error("sqrtPriceX64 must greater than 0");if(!t.gt(eu))throw Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!0)}static getNextSqrtPriceX64FromOutput(e,t,n,i){if(!e.gt(eu))throw Error("sqrtPriceX64 must greater than 0");if(!t.gt(eu))throw Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,i){if(n.eq(eu))return e;let r=t.shln(64);if(i){let t=r.add(n.mul(e));return t.gte(r)?nH.mulDivCeil(r,e,t):nH.mulDivRoundingUp(r,el,r.div(e).add(n))}{let t=n.mul(e);if(!r.gt(t))throw Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");let i=r.sub(t);return nH.mulDivCeil(r,e,i)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,i){let r=n.shln(64);if(i)return e.add(r.div(t));{let n=nH.mulDivRoundingUp(r,el,t);if(!e.gt(n))throw Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return e.sub(n)}}static getSqrtPriceX64FromTick(e){if(!Number.isInteger(e))throw Error("tick must be integer");if(e<-443636||e>443636)throw Error("tick must be in MIN_TICK and MAX_TICK");let t=e<0?-1*e:e,n=new(U())((1&t)!=0?"18445821805675395072":"18446744073709551616");return(2&t)!=0&&(n=nG(n,new(U())("18444899583751176192"))),(4&t)!=0&&(n=nG(n,new(U())("18443055278223355904"))),(8&t)!=0&&(n=nG(n,new(U())("18439367220385607680"))),(16&t)!=0&&(n=nG(n,new(U())("18431993317065453568"))),(32&t)!=0&&(n=nG(n,new(U())("18417254355718170624"))),(64&t)!=0&&(n=nG(n,new(U())("18387811781193609216"))),(128&t)!=0&&(n=nG(n,new(U())("18329067761203558400"))),(256&t)!=0&&(n=nG(n,new(U())("18212142134806163456"))),(512&t)!=0&&(n=nG(n,new(U())("17980523815641700352"))),(1024&t)!=0&&(n=nG(n,new(U())("17526086738831433728"))),(2048&t)!=0&&(n=nG(n,new(U())("16651378430235570176"))),(4096&t)!=0&&(n=nG(n,new(U())("15030750278694412288"))),(8192&t)!=0&&(n=nG(n,new(U())("12247334978884435968"))),(16384&t)!=0&&(n=nG(n,new(U())("8131365268886854656"))),(32768&t)!=0&&(n=nG(n,new(U())("3584323654725218816"))),(65536&t)!=0&&(n=nG(n,new(U())("696457651848324352"))),(131072&t)!=0&&(n=nG(n,new(U())("26294789957507116"))),(262144&t)!=0&&(n=nG(n,new(U())("37481735321082"))),e>0&&(n=na.div(n)),n}static getTickFromPrice(e,t,n){return nz.getTickFromSqrtPriceX64(nz.priceToSqrtPriceX64(e,t,n))}static getTickFromSqrtPriceX64(e){if(e.gt(nc)||e.lt(ns))throw Error("Provided sqrtPrice is not within the supported sqrtPrice range.");let t=e.bitLength()-1,n=new(U())(t-64),i=function(e,t,n){let i=e.toTwos(n).shln(32);return i.imaskn(n+1),i.fromTwos(n)}(n,0,128),r=new(U())("8000000000000000","hex"),o=0,a=new(U())(0),s=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new(U())(0))&&o<16;){s=s.mul(s);let e=s.shrn(127);s=s.shrn(63+e.toNumber()),a=a.add(r.mul(e)),r=r.shrn(1),o+=1}let c=a.shrn(32),u=i.add(c),l=u.mul(new(U())("59543866431248")),m=nZ(l.sub(new(U())("184467440737095516")),64,128).toNumber(),d=nZ(l.add(new(U())("15793534762490258745")),64,128).toNumber();if(m==d)return m;{let t=nz.getSqrtPriceX64FromTick(d);return t.lte(e)?d:m}}}class nQ{static getTickWithPriceAndTickspacing(e,t,n,i){let r=nz.getTickFromSqrtPriceX64(nz.priceToSqrtPriceX64(e,n,i)),o=r/t;return(o=o<0?Math.floor(o):Math.ceil(o))*t}static roundPriceWithTickspacing(e,t,n,i){let r=nQ.getTickWithPriceAndTickspacing(e,t,n,i),o=nz.getSqrtPriceX64FromTick(r);return nz.sqrtPriceX64ToPrice(o,n,i)}}class nj{static addDelta(e,t){return e.add(t)}static getTokenAmountAFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(eu))throw Error("sqrtPriceX64A must greater than 0");let r=n.ushln(64),o=t.sub(e);return i?nH.mulDivRoundingUp(nH.mulDivCeil(r,o,t),el,e):nH.mulDivFloor(r,o,t).div(e)}static getTokenAmountBFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(eu))throw Error("sqrtPriceX64A must greater than 0");return i?nH.mulDivCeil(n,t.sub(e),ni):nH.mulDivFloor(n,t.sub(e),ni)}static getLiquidityFromTokenAmountA(e,t,n,i){e.gt(t)&&([e,t]=[t,e]);let r=n.mul(e).mul(t),o=t.sub(e),a=r.div(o);return i?nH.mulDivRoundingUp(a,el,no):a.shrn(64)}static getLiquidityFromTokenAmountB(e,t,n){return e.gt(t)&&([e,t]=[t,e]),nH.mulDivFloor(n,no,t.sub(e))}static getLiquidityFromTokenAmounts(e,t,n,i,r){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return nj.getLiquidityFromTokenAmountA(t,n,i,!1);if(!e.lt(n))return nj.getLiquidityFromTokenAmountB(t,n,r);{let o=nj.getLiquidityFromTokenAmountA(e,n,i,!1),a=nj.getLiquidityFromTokenAmountB(t,e,r);return o.lt(a)?o:a}}static getAmountsFromLiquidity(e,t,n,i,r){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return{amountA:nj.getTokenAmountAFromLiquidity(t,n,i,r),amountB:new(U())(0)};if(!e.lt(n))return{amountA:new(U())(0),amountB:nj.getTokenAmountBFromLiquidity(t,n,i,r)};{let o=nj.getTokenAmountAFromLiquidity(e,n,i,r),a=nj.getTokenAmountBFromLiquidity(t,e,i,r);return{amountA:o,amountB:a}}}static getAmountsFromLiquidityWithSlippage(e,t,n,i,r,o,a){let{amountA:s,amountB:c}=nj.getAmountsFromLiquidity(e,t,n,i,o),u=r?1+a:1-a,l=new(U())(new t8.Z(s.toString()).mul(u).toFixed(0)),m=new(U())(new t8.Z(c.toString()).mul(u).toFixed(0));return{amountSlippageA:l,amountSlippageB:m}}}class nJ{static swapCompute(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S=!1){if(m.eq(eu))throw Error("amountSpecified must not be 0");if(p||(p=o?ns.add(el):nc.sub(el)),o){if(p.lt(ns))throw Error("sqrtPriceX64 must greater than MIN_SQRT_PRICE_X64");if(p.gte(l))throw Error("sqrtPriceX64 must smaller than current")}else{if(p.gt(nc))throw Error("sqrtPriceX64 must smaller than MAX_SQRT_PRICE_X64");if(p.lte(l))throw Error("sqrtPriceX64 must greater than current")}let g=m.gt(eu),w={amountSpecifiedRemaining:m,amountCalculated:eu,sqrtPriceX64:l,tick:c>d?Math.min(d+nR.tickCount(u)-1,c):d,accounts:[],liquidity:s,feeAmount:new(U())(0)},A=d,f=n[d],y=!o&&f.startTickIndex===w.tick;for(;!w.amountSpecifiedRemaining.eq(eu)&&!w.sqrtPriceX64.eq(p);){let s;let c={};c.sqrtPriceStartX64=w.sqrtPriceX64;let l=nO.nextInitTick(f,w.tick,u,o,y),m=l||null,k=null;if(!m?.liquidityGross.gtn(0)){let a=nX.nextInitializedTickArrayStartIndex({tickCurrent:w.tick,tickSpacing:u,tickArrayBitmap:i,exBitmapInfo:r},A,o);if(!a.isExist){if(S)return{allTrade:!1,amountSpecifiedRemaining:w.amountSpecifiedRemaining,amountCalculated:w.amountCalculated,feeAmount:w.feeAmount,sqrtPriceX64:w.sqrtPriceX64,liquidity:w.liquidity,tickCurrent:w.tick,accounts:w.accounts};throw Error("swapCompute LiquidityInsufficient")}A=a.nextStartIndex;let{publicKey:s}=nC(e,t,A);k=s,f=n[A];try{m=nO.firstInitializedTick(f,o)}catch(e){throw Error("not found next tick info")}}if(c.tickNext=m.tick,c.initialized=m.liquidityGross.gtn(0),d!==A&&k&&(w.accounts.push(k),d=A),c.tickNext<-443636?c.tickNext=-443636:c.tickNext>443636&&(c.tickNext=443636),c.sqrtPriceNextX64=nz.getSqrtPriceX64FromTick(c.tickNext),s=o&&c.sqrtPriceNextX64.lt(p)||!o&&c.sqrtPriceNextX64.gt(p)?p:c.sqrtPriceNextX64,[w.sqrtPriceX64,c.amountIn,c.amountOut,c.feeAmount]=nJ.swapStepCompute(w.sqrtPriceX64,s,w.liquidity,w.amountSpecifiedRemaining,a),w.feeAmount=w.feeAmount.add(c.feeAmount),g?(w.amountSpecifiedRemaining=w.amountSpecifiedRemaining.sub(c.amountIn.add(c.feeAmount)),w.amountCalculated=w.amountCalculated.sub(c.amountOut)):(w.amountSpecifiedRemaining=w.amountSpecifiedRemaining.add(c.amountOut),w.amountCalculated=w.amountCalculated.add(c.amountIn.add(c.feeAmount))),w.sqrtPriceX64.eq(c.sqrtPriceNextX64)){if(c.initialized){let e=m.liquidityNet;o&&(e=e.mul(nn)),w.liquidity=nj.addDelta(w.liquidity,e)}y=c.tickNext!=w.tick&&!o&&f.startTickIndex===c.tickNext,w.tick=o?c.tickNext-1:c.tickNext}else if(w.sqrtPriceX64!=c.sqrtPriceStartX64){let e=nz.getTickFromSqrtPriceX64(w.sqrtPriceX64);y=e!=w.tick&&!o&&f.startTickIndex===e,w.tick=e}}try{let{nextStartIndex:n,isExist:a}=nR.nextInitializedTickArray(w.tick,u,o,i,r);a&&d!==n&&(w.accounts.push(nC(e,t,n).publicKey),d=n)}catch(e){}return{allTrade:!0,amountSpecifiedRemaining:eu,amountCalculated:w.amountCalculated,feeAmount:w.feeAmount,sqrtPriceX64:w.sqrtPriceX64,liquidity:w.liquidity,tickCurrent:w.tick,accounts:w.accounts}}static swapStepCompute(e,t,n,i,r){let o={sqrtPriceX64Next:new(U())(0),amountIn:new(U())(0),amountOut:new(U())(0),feeAmount:new(U())(0)},a=e.gte(t),s=i.gte(eu);if(s){let s=nH.mulDivFloor(i,nu.sub(new(U())(r.toString())),nu);o.amountIn=a?nj.getTokenAmountAFromLiquidity(t,e,n,!0):nj.getTokenAmountBFromLiquidity(e,t,n,!0),s.gte(o.amountIn)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=nz.getNextSqrtPriceX64FromInput(e,n,s,a)}else o.amountOut=a?nj.getTokenAmountBFromLiquidity(t,e,n,!1):nj.getTokenAmountAFromLiquidity(e,t,n,!1),i.mul(nn).gte(o.amountOut)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=nz.getNextSqrtPriceX64FromOutput(e,n,i.mul(nn),a);let c=t.eq(o.sqrtPriceX64Next);return a?(c&&s||(o.amountIn=nj.getTokenAmountAFromLiquidity(o.sqrtPriceX64Next,e,n,!0)),c&&!s||(o.amountOut=nj.getTokenAmountBFromLiquidity(o.sqrtPriceX64Next,e,n,!1))):(o.amountIn=c&&s?o.amountIn:nj.getTokenAmountBFromLiquidity(e,o.sqrtPriceX64Next,n,!0),o.amountOut=c&&!s?o.amountOut:nj.getTokenAmountAFromLiquidity(e,o.sqrtPriceX64Next,n,!1)),!s&&o.amountOut.gt(i.mul(nn))&&(o.amountOut=i.mul(nn)),s&&!o.sqrtPriceX64Next.eq(t)?o.feeAmount=i.sub(o.amountIn):o.feeAmount=nH.mulDivCeil(o.amountIn,new(U())(r),nu.sub(new(U())(r))),[o.sqrtPriceX64Next,o.amountIn,o.amountOut,o.feeAmount]}}class n${static getfeeGrowthInside(e,t,n){let i=new(U())(0),r=new(U())(0);e.tickCurrent>=t.tick?(i=t.feeGrowthOutsideX64A,r=t.feeGrowthOutsideX64B):(i=e.feeGrowthGlobalX64A.sub(t.feeGrowthOutsideX64A),r=e.feeGrowthGlobalX64B.sub(t.feeGrowthOutsideX64B));let o=new(U())(0),a=new(U())(0);e.tickCurrent<n.tick?(o=n.feeGrowthOutsideX64A,a=n.feeGrowthOutsideX64B):(o=e.feeGrowthGlobalX64A.sub(n.feeGrowthOutsideX64A),a=e.feeGrowthGlobalX64B.sub(n.feeGrowthOutsideX64B));let s=nH.wrappingSubU128(nH.wrappingSubU128(e.feeGrowthGlobalX64A,i),o),c=nH.wrappingSubU128(nH.wrappingSubU128(e.feeGrowthGlobalX64B,r),a);return{feeGrowthInsideX64A:s,feeGrowthInsideBX64:c}}static GetPositionFees(e,t,n,i){let{feeGrowthInsideX64A:r,feeGrowthInsideBX64:o}=this.getfeeGrowthInside(e,n,i),a=nH.mulDivFloor(nH.wrappingSubU128(r,t.feeGrowthInsideLastX64A),t.liquidity,ni),s=t.tokenFeesOwedA.add(a),c=nH.mulDivFloor(nH.wrappingSubU128(o,t.feeGrowthInsideLastX64B),t.liquidity,ni),u=t.tokenFeesOwedB.add(c);return{tokenFeeAmountA:s,tokenFeeAmountB:u}}static GetPositionRewards(e,t,n,i){let r=[],o=this.getRewardGrowthInside(e.tickCurrent,n,i,e.rewardInfos);for(let e=0;e<o.length;e++){let n=o[e],i=t.rewardInfos[e],a=nH.wrappingSubU128(n,i.growthInsideLastX64),s=nH.mulDivFloor(a,t.liquidity,ni),c=i.rewardAmountOwed.add(s);r.push(c)}return r}static getRewardGrowthInside(e,t,n,i){let r=[];for(let o=0;o<i.length;o++){let a=new(U())(0);a=t.liquidityGross.eqn(0)?i[o].rewardGrowthGlobalX64:e<t.tick?i[o].rewardGrowthGlobalX64.sub(t.rewardGrowthsOutsideX64[o]):t.rewardGrowthsOutsideX64[o];let s=new(U())(0);n.liquidityGross.eqn(0)||(s=e<n.tick?n.rewardGrowthsOutsideX64[o]:i[o].rewardGrowthGlobalX64.sub(n.rewardGrowthsOutsideX64[o])),r.push(nH.wrappingSubU128(nH.wrappingSubU128(i[o].rewardGrowthGlobalX64,a),s))}return r}}let n1=M.from("Clmm");class n0 extends tw{static makeMockPoolInfo({programId:e,mint1:t,mint2:n,ammConfig:i,createPoolInstructionSimpleAddress:r,initialPrice:o,startTime:a,owner:s}){let[c,u,l]=new(U())(t.mint.toBuffer()).gt(new(U())(n.mint.toBuffer()))?[n,t,new t8.Z(1).div(o)]:[t,n,o],m=nz.priceToSqrtPriceX64(l,c.decimals,u.decimals);return{id:r.poolId,mintA:{programId:r.mintProgramIdA,mint:r.mintA,vault:r.mintAVault,decimals:c.decimals},mintB:{programId:r.mintProgramIdB,mint:r.mintB,vault:r.mintBVault,decimals:u.decimals},ammConfig:i,observationId:r.observationId,creator:s,programId:e,version:6,tickSpacing:i.tickSpacing,liquidity:eu,sqrtPriceX64:m,currentPrice:l,tickCurrent:0,observationIndex:0,observationUpdateDuration:0,feeGrowthGlobalX64A:eu,feeGrowthGlobalX64B:eu,protocolFeesTokenA:eu,protocolFeesTokenB:eu,swapInAmountTokenA:eu,swapOutAmountTokenB:eu,swapInAmountTokenB:eu,swapOutAmountTokenA:eu,tickArrayBitmap:[],rewardInfos:[],day:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},week:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},month:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},tvl:0,lookupTableAccount:D.nh.default,startTime:a.toNumber(),exBitmapInfo:{poolId:r.poolId,positiveTickArrayBitmap:Array.from({length:12},()=>Array.from({length:8},()=>new(U())(0))),negativeTickArrayBitmap:Array.from({length:12},()=>Array.from({length:8},()=>new(U())(0)))}}}static async makeCreatePoolInstructionSimple({makeTxVersion:e,connection:t,programId:n,owner:i,payer:r,mint1:o,mint2:a,ammConfig:s,initialPrice:c,startTime:u,computeBudgetConfig:l,lookupTableCache:m}){let[d,p,S]=new(U())(o.mint.toBuffer()).gt(new(U())(a.mint.toBuffer()))?[a,o,new t8.Z(1).div(c)]:[o,a,c],g=nz.priceToSqrtPriceX64(S,d.decimals,p.decimals),w=await this.makeCreatePoolInstructions({connection:t,programId:n,owner:i,mintA:d,mintB:p,ammConfigId:s.id,initialPriceX64:g,startTime:u});return{address:{...w.address,mintA:d.mint,mintB:p.mint,mintProgramIdA:d.programId,mintProgramIdB:p.programId},innerTransactions:await eo({connection:t,makeTxVersion:e,computeBudgetConfig:l,payer:r,innerTransaction:[w.innerTransaction],lookupTableCache:m})}}static async makeOpenPositionFromLiquidityInstructionSimple({makeTxVersion:e,connection:t,poolInfo:n,ownerInfo:i,amountMaxA:r,amountMaxB:o,tickLower:a,tickUpper:s,liquidity:c,associatedOnly:u=!0,checkCreateATAOwner:l=!1,withMetadata:m="create",direction:d=n.mintA<n.mintB?0:1,getEphemeralSigners:p,computeBudgetConfig:S,lookupTableCache:g}){let w=[],A=[],f=[],y=[],k=[],b=i.useSOLBalance&&n.mintA.mint.equals(eb.WSOL.mint),T=i.useSOLBalance&&n.mintB.mint.equals(eb.WSOL.mint),I=await this._selectOrCreateTokenAccount({programId:n.mintA.programId,mint:n.mintA.mint,tokenAccounts:b?[]:i.tokenAccounts,owner:i.wallet,createInfo:b||r.eq(eu)?{connection:t,payer:i.feePayer,amount:r,frontInstructions:w,endInstructions:A,frontInstructionsType:f,endInstructionsType:y,signers:k}:void 0,associatedOnly:!b&&u,checkCreateATAOwner:l}),h=await this._selectOrCreateTokenAccount({programId:n.mintB.programId,mint:n.mintB.mint,tokenAccounts:T?[]:i.tokenAccounts,owner:i.wallet,createInfo:T||o.eq(eu)?{connection:t,payer:i.feePayer,amount:o,frontInstructions:w,endInstructions:A,frontInstructionsType:f,endInstructionsType:y,signers:k}:void 0,associatedOnly:!T&&u,checkCreateATAOwner:l});n1.assertArgument(void 0!==I&&void 0!==h,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let C=await this.makeOpenPositionFromLiquidityInstructions({poolInfo:n,ownerInfo:{...i,tokenAccountA:I,tokenAccountB:h},tickLower:a,tickUpper:s,liquidity:c,amountMaxA:r,amountMaxB:o,withMetadata:m,direction:d,getEphemeralSigners:p});return{address:C.address,innerTransactions:await eo({connection:t,makeTxVersion:e,computeBudgetConfig:S,payer:i.feePayer,innerTransaction:[{instructionTypes:f,instructions:w,signers:k},C.innerTransaction,{instructionTypes:y,instructions:A,signers:[]}],lookupTableCache:g})}}static async makeOpenPositionFromBaseInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,tickLower:i,tickUpper:r,base:o,baseAmount:a,otherAmountMax:s,associatedOnly:c=!0,checkCreateATAOwner:u=!1,computeBudgetConfig:l,direction:m=t.mintA<t.mintB?0:1,withMetadata:d="create",makeTxVersion:p,lookupTableCache:S,getEphemeralSigners:g}){let w=[],A=[],f=[],y=[],k=[],b=n.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),T=n.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),I=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:b?[]:n.tokenAccounts,owner:n.wallet,createInfo:b?{connection:e,payer:n.feePayer,amount:"MintA"===o?a:s,frontInstructions:w,endInstructions:A,frontInstructionsType:f,endInstructionsType:y,signers:k}:void 0,associatedOnly:!b&&c,checkCreateATAOwner:u}),h=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:T?[]:n.tokenAccounts,owner:n.wallet,createInfo:T?{connection:e,payer:n.feePayer,amount:"MintA"===o?s:a,frontInstructions:w,endInstructions:A,frontInstructionsType:f,endInstructionsType:y,signers:k}:void 0,associatedOnly:!T&&c,checkCreateATAOwner:u});n1.assertArgument(void 0!==I&&void 0!==h,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let C=await this.makeOpenPositionFromBaseInstructions({poolInfo:t,ownerInfo:{...n,tokenAccountA:I,tokenAccountB:h},tickLower:i,tickUpper:r,base:o,baseAmount:a,otherAmountMax:s,withMetadata:d,direction:m,getEphemeralSigners:g});return{address:C.address,innerTransactions:await eo({connection:e,makeTxVersion:p,computeBudgetConfig:l,payer:n.feePayer,innerTransaction:[{instructionTypes:f,instructions:w,signers:k},C.innerTransaction,{instructionTypes:y,instructions:A,signers:[]}],lookupTableCache:S})}}static async makeIncreasePositionFromLiquidityInstructionSimple({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,amountMaxA:r,amountMaxB:o,liquidity:a,associatedOnly:s=!0,checkCreateATAOwner:c=!1,computeBudgetConfig:u,makeTxVersion:l,lookupTableCache:m}){let d=[],p=[],S=[],g=[],w=[],A=i.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),f=i.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),y=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:A?[]:i.tokenAccounts,owner:i.wallet,createInfo:A?{connection:e,payer:i.feePayer,amount:r,frontInstructions:d,endInstructions:p,frontInstructionsType:S,endInstructionsType:g,signers:w}:void 0,associatedOnly:!A&&s,checkCreateATAOwner:c}),k=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:f?[]:i.tokenAccounts,owner:i.wallet,createInfo:f?{connection:e,payer:i.feePayer,amount:o,frontInstructions:d,endInstructions:p,frontInstructionsType:S,endInstructionsType:g,signers:w}:void 0,associatedOnly:!f&&s,checkCreateATAOwner:c});n1.assertArgument(!!y||!!k,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let b=this.makeIncreasePositionFromLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:y,tokenAccountB:k},liquidity:a,amountMaxA:r,amountMaxB:o});return{address:b.address,innerTransactions:await eo({connection:e,makeTxVersion:l,computeBudgetConfig:u,payer:i.feePayer,innerTransaction:[{instructionTypes:S,instructions:d,signers:w},b.innerTransaction,{instructionTypes:g,instructions:p,signers:[]}],lookupTableCache:m})}}static async makeIncreasePositionFromBaseInstructionSimple({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,base:r,baseAmount:o,otherAmountMax:a,associatedOnly:s=!0,checkCreateATAOwner:c=!1,computeBudgetConfig:u,makeTxVersion:l,lookupTableCache:m}){let d=[],p=[],S=[],g=[],w=[],A=i.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),f=i.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),y=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:A?[]:i.tokenAccounts,owner:i.wallet,createInfo:A?{connection:e,payer:i.feePayer,amount:"MintA"===r?o:a,frontInstructions:d,endInstructions:p,frontInstructionsType:S,endInstructionsType:g,signers:w}:void 0,associatedOnly:!A&&s,checkCreateATAOwner:c}),k=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:f?[]:i.tokenAccounts,owner:i.wallet,createInfo:f?{connection:e,payer:i.feePayer,amount:"MintA"===r?a:o,frontInstructions:d,endInstructions:p,frontInstructionsType:S,endInstructionsType:g,signers:w}:void 0,associatedOnly:!f&&s,checkCreateATAOwner:c});n1.assertArgument(!!y||!!k,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let b=this.makeIncreasePositionFromBaseInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:y,tokenAccountB:k},base:r,baseAmount:o,otherAmountMax:a});return{address:b.address,innerTransactions:await eo({connection:e,makeTxVersion:l,computeBudgetConfig:u,payer:i.feePayer,innerTransaction:[{instructionTypes:S,instructions:d,signers:w},b.innerTransaction,{instructionTypes:g,instructions:p,signers:[]}],lookupTableCache:m})}}static async makeDecreaseLiquidityInstructionSimple({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,liquidity:r,amountMinA:o,amountMinB:a,associatedOnly:s=!0,checkCreateATAOwner:c=!1,computeBudgetConfig:u,makeTxVersion:l,lookupTableCache:m}){let d=[],p=[],S=[],g=[],w=[],A=i.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),f=i.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),y=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:A?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:d,frontInstructionsType:S,endInstructions:A?p:[],endInstructionsType:A?g:[],signers:w},associatedOnly:!A&&s,checkCreateATAOwner:c}),k=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:f?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:d,frontInstructionsType:S,endInstructions:f?p:[],endInstructionsType:f?g:[],signers:w},associatedOnly:!f&&s,checkCreateATAOwner:c}),b=[];for(let n of t.rewardInfos){let r=i.useSOLBalance&&n.tokenMint.equals(eb.WSOL.mint),o=n.tokenMint.equals(t.mintA.mint)?y:n.tokenMint.equals(t.mintB.mint)?k:await this._selectOrCreateTokenAccount({programId:n.tokenProgramId,mint:n.tokenMint,tokenAccounts:r?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:d,frontInstructionsType:S,endInstructions:r?p:[],endInstructionsType:r?g:[],signers:w},associatedOnly:!r&&s,checkCreateATAOwner:c});b.push(o)}n1.assertArgument(!!y||!!k,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let T=this.makeDecreaseLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:y,tokenAccountB:k,rewardAccounts:b},liquidity:r,amountMinA:o,amountMinB:a}),I=i.closePosition?this.makeClosePositionInstructions({poolInfo:t,ownerInfo:i,ownerPosition:n}):{address:{},innerTransaction:{instructions:[],signers:[],instructionTypes:[]}};return{address:T.address,innerTransactions:await eo({connection:e,makeTxVersion:l,computeBudgetConfig:u,payer:i.feePayer,innerTransaction:[{instructionTypes:S,instructions:d,signers:w},T.innerTransaction,{instructionTypes:g,instructions:p,signers:[]},I.innerTransaction],lookupTableCache:m})}}static async makeSwapBaseInInstructionSimple({connection:e,poolInfo:t,sPoolInfo:n,ownerInfo:i,inputMint:r,amountIn:o,amountOutMin:a,priceLimit:s,remainingAccounts:c,associatedOnly:u=!0,checkCreateATAOwner:l=!1,computeBudgetConfig:m,makeTxVersion:d,lookupTableCache:p}){let S;let g=[],w=[],A=[],f=[],y=[];S=!s||s.equals(new t8.Z(0))?r.equals(t.mintA.mint)?ns.add(el):nc.sub(el):nz.priceToSqrtPriceX64(s,t.mintA.decimals,t.mintB.decimals);let k=t.mintA.mint.equals(r),b=i.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),T=i.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),I=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:b?[]:i.tokenAccounts,owner:i.wallet,createInfo:b||!k?{connection:e,payer:i.feePayer,amount:k?o:0,frontInstructions:g,endInstructions:w,frontInstructionsType:A,endInstructionsType:f,signers:y}:void 0,associatedOnly:!b&&u,checkCreateATAOwner:l}),h=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:T?[]:i.tokenAccounts,owner:i.wallet,createInfo:T||k?{connection:e,payer:i.feePayer,amount:k?0:o,frontInstructions:g,endInstructions:w,frontInstructionsType:A,endInstructionsType:f,signers:y}:void 0,associatedOnly:!T&&u,checkCreateATAOwner:l});n1.assertArgument(!!I||!!h,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let C=this.makeSwapBaseInInstructions({poolInfo:t,sPoolInfo:n,ownerInfo:{wallet:i.wallet,tokenAccountA:I,tokenAccountB:h},inputMint:r,amountIn:o,amountOutMin:a,sqrtPriceLimitX64:S,remainingAccounts:c});return{address:C.address,innerTransactions:await eo({connection:e,makeTxVersion:d,computeBudgetConfig:m,payer:i.feePayer,innerTransaction:[{instructionTypes:A,instructions:g,signers:y},C.innerTransaction,{instructionTypes:f,instructions:w,signers:[]}],lookupTableCache:p})}}static async makeSwapBaseOutInstructionSimple({connection:e,poolInfo:t,sPoolInfo:n,ownerInfo:i,outputMint:r,amountOut:o,amountInMax:a,priceLimit:s,remainingAccounts:c,associatedOnly:u=!0,checkCreateATAOwner:l=!1,computeBudgetConfig:m,makeTxVersion:d,lookupTableCache:p}){let S;let g=[],w=[],A=[],f=[],y=[];S=!s||s.equals(new t8.Z(0))?r.equals(t.mintB.mint)?ns.add(el):nc.sub(el):nz.priceToSqrtPriceX64(s,t.mintA.decimals,t.mintB.decimals);let k=t.mintA.mint.equals(r),b=i.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),T=i.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),I=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:b?[]:i.tokenAccounts,owner:i.wallet,createInfo:b||!k?{connection:e,payer:i.feePayer,amount:k?a:0,frontInstructions:g,endInstructions:w,frontInstructionsType:A,endInstructionsType:f,signers:y}:void 0,associatedOnly:!b&&u,checkCreateATAOwner:l}),h=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:T?[]:i.tokenAccounts,owner:i.wallet,createInfo:T||k?{connection:e,payer:i.feePayer,amount:k?0:a,frontInstructions:g,endInstructions:w,frontInstructionsType:A,endInstructionsType:f,signers:y}:void 0,associatedOnly:!T&&u,checkCreateATAOwner:l});n1.assertArgument(!!I||!!h,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let C=this.makeSwapBaseOutInstructions({poolInfo:t,sPoolInfo:n,ownerInfo:{wallet:i.wallet,tokenAccountA:I,tokenAccountB:h},outputMint:r,amountOut:o,amountInMax:a,sqrtPriceLimitX64:S,remainingAccounts:c});return{address:C.address,innerTransactions:await eo({connection:e,makeTxVersion:d,computeBudgetConfig:m,payer:i.feePayer,innerTransaction:[{instructionTypes:A,instructions:g,signers:y},C.innerTransaction,{instructionTypes:f,instructions:w,signers:[]}],lookupTableCache:p})}}static async makeCLosePositionInstructionSimple({poolInfo:e,ownerPosition:t,ownerInfo:n,makeTxVersion:i,lookupTableCache:r,connection:o}){let a=this.makeClosePositionInstructions({poolInfo:e,ownerInfo:n,ownerPosition:t});return{address:a.address,innerTransactions:await eo({connection:o,makeTxVersion:i,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[a.innerTransaction],lookupTableCache:r})}}static async makeInitRewardInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:i,chainTime:r,associatedOnly:o=!0,checkCreateATAOwner:a=!1,makeTxVersion:s,lookupTableCache:c}){n1.assertArgument(i.endTime>i.openTime,"reward time error","rewardInfo",i),n1.assertArgument(i.openTime>r,"reward must be paid later","rewardInfo",i);let u=[],l=[],m=[],d=[],p=[],S=n.useSOLBalance&&i.mint.equals(eb.WSOL.mint),g=i.perSecond.mul(i.endTime-i.openTime),w=await this._selectOrCreateTokenAccount({programId:i.programId,mint:i.mint,tokenAccounts:S?[]:n.tokenAccounts,owner:n.wallet,createInfo:S?{connection:e,payer:n.feePayer,amount:new(U())(new t8.Z(g.toFixed(0)).gte(g)?g.toFixed(0):g.add(1).toFixed(0)),frontInstructions:u,endInstructions:l,frontInstructionsType:m,endInstructionsType:d,signers:p}:void 0,associatedOnly:!S&&o,checkCreateATAOwner:a});n1.assertArgument(w,"no money","ownerRewardAccount",n.tokenAccounts);let A=this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:w},rewardInfo:{programId:i.programId,mint:i.mint,openTime:i.openTime,endTime:i.endTime,emissionsPerSecondX64:nH.decimalToX64(i.perSecond)}});return{address:A.address,innerTransactions:await eo({connection:e,makeTxVersion:s,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:u,signers:p},A.innerTransaction,{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:c})}}static async makeInitRewardsInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:i,associatedOnly:r=!0,checkCreateATAOwner:o=!1,computeBudgetConfig:a,makeTxVersion:s,lookupTableCache:c}){for(let e of i)n1.assertArgument(e.endTime>e.openTime,"reward time error","rewardInfo",e);let u=[],l=[],m=[],d=[],p=[],S=[];for(let a of i){let i=n.useSOLBalance&&a.mint.equals(eb.WSOL.mint),s=a.perSecond.mul(a.endTime-a.openTime),c=await this._selectOrCreateTokenAccount({programId:a.programId,mint:a.mint,tokenAccounts:i?[]:n.tokenAccounts,owner:n.wallet,createInfo:i?{connection:e,payer:n.feePayer,amount:new(U())(new t8.Z(s.toFixed(0)).gte(s)?s.toFixed(0):s.add(1).toFixed(0)),frontInstructions:u,endInstructions:l,frontInstructionsType:m,endInstructionsType:d,signers:S}:void 0,associatedOnly:!i&&r,checkCreateATAOwner:o});n1.assertArgument(c,"no money","ownerRewardAccount",n.tokenAccounts),p.push(this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:c},rewardInfo:{programId:a.programId,mint:a.mint,openTime:a.openTime,endTime:a.endTime,emissionsPerSecondX64:nH.decimalToX64(a.perSecond)}}))}let g={};for(let e of p)g={...g,...e.address};return{address:g,innerTransactions:await eo({connection:e,makeTxVersion:s,computeBudgetConfig:a,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:u,signers:S},...p.map(e=>e.innerTransaction),{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:c})}}static async makeSetRewardInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:i,chainTime:r,associatedOnly:o=!0,checkCreateATAOwner:a=!1,makeTxVersion:s,lookupTableCache:c}){n1.assertArgument(i.endTime>i.openTime,"reward time error","rewardInfo",i),n1.assertArgument(i.openTime>r,"reward must be paid later","rewardInfo",i);let u=[],l=[],m=[],d=[],p=[],S=n.useSOLBalance&&i.mint.equals(eb.WSOL.mint),g=await this._selectOrCreateTokenAccount({programId:i.programId,mint:i.mint,tokenAccounts:S?[]:n.tokenAccounts,owner:n.wallet,createInfo:S?{connection:e,payer:n.feePayer,amount:new(U())(new t8.Z(i.perSecond.sub(i.endTime-i.openTime).toFixed(0)).gte(i.perSecond.sub(i.endTime-i.openTime))?i.perSecond.sub(i.endTime-i.openTime).toFixed(0):i.perSecond.sub(i.endTime-i.openTime).add(1).toFixed(0)),frontInstructions:u,endInstructions:l,frontInstructionsType:m,endInstructionsType:d,signers:p}:void 0,associatedOnly:!S&&o,checkCreateATAOwner:a});n1.assertArgument(g,"no money","ownerRewardAccount",n.tokenAccounts);let w=this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:g},rewardInfo:{mint:i.mint,openTime:i.openTime,endTime:i.endTime,emissionsPerSecondX64:nH.decimalToX64(i.perSecond)}});return{address:w.address,innerTransactions:await eo({connection:e,makeTxVersion:s,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:u,signers:p},w.innerTransaction,{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:c})}}static async makeSetRewardsInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:i,chainTime:r,associatedOnly:o=!0,checkCreateATAOwner:a=!1,computeBudgetConfig:s,makeTxVersion:c,lookupTableCache:u}){let l=[],m=[],d=[],p=[],S=[],g=[];for(let s of i){n1.assertArgument(s.endTime>s.openTime,"reward time error","rewardInfo",s),n1.assertArgument(s.openTime>r,"reward must be paid later","rewardInfo",s);let i=n.useSOLBalance&&s.mint.equals(eb.WSOL.mint),c=await this._selectOrCreateTokenAccount({programId:s.programId,mint:s.mint,tokenAccounts:i?[]:n.tokenAccounts,owner:n.wallet,createInfo:i?{connection:e,payer:n.feePayer,amount:new(U())(new t8.Z(s.perSecond.sub(s.endTime-s.openTime).toFixed(0)).gte(s.perSecond.sub(s.endTime-s.openTime))?s.perSecond.sub(s.endTime-s.openTime).toFixed(0):s.perSecond.sub(s.endTime-s.openTime).add(1).toFixed(0)),frontInstructions:l,endInstructions:m,frontInstructionsType:d,endInstructionsType:p,signers:g}:void 0,associatedOnly:!i&&o,checkCreateATAOwner:a});n1.assertArgument(c,"no money","ownerRewardAccount",n.tokenAccounts),S.push(this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:c},rewardInfo:{mint:s.mint,openTime:s.openTime,endTime:s.endTime,emissionsPerSecondX64:nH.decimalToX64(s.perSecond)}}))}let w={};for(let e of S)w={...w,...e.address};return{address:w,innerTransactions:await eo({connection:e,makeTxVersion:c,computeBudgetConfig:s,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:l,signers:g},...S.map(e=>e.innerTransaction),{instructionTypes:p,instructions:m,signers:[]}],lookupTableCache:u})}}static async makeCollectRewardInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardMint:i,associatedOnly:r=!0,checkCreateATAOwner:o=!1,computeBudgetConfig:a,makeTxVersion:s,lookupTableCache:c}){let u=[],l=[],m=[],d=[],p=[],S=t.rewardInfos.find(e=>e.tokenMint.equals(i));if(n1.assertArgument(void 0!==S,"reward mint error","not found reward mint",i),void 0===S)throw Error("reward mint error");let g=n.useSOLBalance&&i.equals(eb.WSOL.mint),w=await this._selectOrCreateTokenAccount({programId:S.tokenProgramId,mint:i,tokenAccounts:g?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,endInstructions:g?l:[],frontInstructionsType:m,endInstructionsType:d,signers:p},associatedOnly:!g&&r,checkCreateATAOwner:o});n1.assertArgument(w,"no money","ownerRewardAccount",n.tokenAccounts);let A=this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:w},rewardMint:i});return{address:A.address,innerTransactions:await eo({connection:e,makeTxVersion:s,computeBudgetConfig:a,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:u,signers:p},A.innerTransaction,{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:c})}}static async makeCollectRewardsInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardMints:i,associatedOnly:r=!0,checkCreateATAOwner:o=!1,computeBudgetConfig:a,makeTxVersion:s,lookupTableCache:c}){let u=[],l=[],m=[],d=[],p=[],S=[];for(let a of i){let i=t.rewardInfos.find(e=>e.tokenMint.equals(a));if(n1.assertArgument(void 0!==i,"reward mint error","not found reward mint",a),void 0===i)throw Error("reward mint error");let s=n.useSOLBalance&&a.equals(eb.WSOL.mint),c=await this._selectOrCreateTokenAccount({programId:i.tokenProgramId,mint:a,tokenAccounts:s?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,endInstructions:s?l:[],signers:S,frontInstructionsType:m,endInstructionsType:d},associatedOnly:!s&&r,checkCreateATAOwner:o});n1.assertArgument(c,"no money","ownerRewardAccount",n.tokenAccounts),p.push(this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:c},rewardMint:a}))}let g={};for(let e of p)g={...g,...e.address};return{address:g,innerTransactions:await eo({connection:e,makeTxVersion:s,computeBudgetConfig:a,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:u,signers:S},...p.map(e=>e.innerTransaction),{instructionTypes:d,instructions:l,signers:[]}],lookupTableCache:c})}}static async makeHarvestAllRewardInstructionSimple({connection:e,fetchPoolInfos:t,ownerInfo:n,associatedOnly:i=!0,checkCreateATAOwner:r=!1,makeTxVersion:o,lookupTableCache:a}){let s={};for(let e of n.tokenAccounts)if(i){let t=td(n.wallet,e.accountInfo.mint,e.programId).publicKey;t.equals(e.pubkey)&&(s[e.accountInfo.mint.toString()]=e.pubkey)}else s[e.accountInfo.mint.toString()]=e.pubkey;let c=[],u=[],l=[],m=[],d=[],p=[];for(let o of Object.values(t)){if(void 0===o.positionAccount||!o.positionAccount.find(e=>!e.tokenFeeAmountA.isZero()||!e.tokenFeeAmountB.isZero()||e.rewardInfos.find(e=>!e.pendingReward.isZero())))continue;let t=o.state,a=n.useSOLBalance&&t.mintA.mint.equals(eb.WSOL.mint),S=n.useSOLBalance&&t.mintB.mint.equals(eb.WSOL.mint),g=s[t.mintA.mint.toString()]??await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:a?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,frontInstructionsType:l,endInstructions:a?u:[],endInstructionsType:a?m:[],signers:p},associatedOnly:!a&&i,checkCreateATAOwner:r}),w=s[t.mintB.mint.toString()]??await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:S?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,frontInstructionsType:l,endInstructions:S?u:[],endInstructionsType:S?m:[],signers:p},associatedOnly:!S&&i,checkCreateATAOwner:r});s[t.mintA.mint.toString()]=g,s[t.mintB.mint.toString()]=w;let A=[];for(let o of t.rewardInfos){let t=n.useSOLBalance&&o.tokenMint.equals(eb.WSOL.mint),a=s[o.tokenMint.toString()]??await this._selectOrCreateTokenAccount({programId:o.tokenProgramId,mint:o.tokenMint,tokenAccounts:t?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,endInstructions:t?u:[],frontInstructionsType:l,endInstructionsType:m,signers:p},associatedOnly:!t&&i,checkCreateATAOwner:r});s[o.tokenMint.toString()]=a,A.push(a)}for(let e of o.positionAccount)d.push(this.makeDecreaseLiquidityInstructions({poolInfo:t,ownerPosition:e,ownerInfo:{wallet:n.wallet,tokenAccountA:g,tokenAccountB:w,rewardAccounts:A},liquidity:eu,amountMinA:eu,amountMinB:eu}))}return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:o,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[{instructionTypes:l,instructions:c,signers:p},...d.map(e=>e.innerTransaction),{instructionTypes:m,instructions:u,signers:[]}],lookupTableCache:a})}}static async makeCreatePoolInstructions({connection:e,programId:t,owner:n,mintA:i,mintB:r,ammConfigId:o,initialPriceX64:a,startTime:s}){let c=[],u=nI(t,o,i.mint,r.mint).publicKey,l=nI(t,o,r.mint,i.mint).publicKey,m=tA({fromPublicKey:n,programId:t}),d=nh(t,u,i.mint).publicKey,p=nh(t,u,r.mint).publicKey,S=tA({fromPublicKey:n,programId:t}),w=nh(t,l,r.mint).publicKey,A=nh(t,l,i.mint).publicKey;{let l=[D.yc.createAccountWithSeed({fromPubkey:n,basePubkey:n,seed:m.seed,newAccountPubkey:m.publicKey,lamports:await e.getMinimumBalanceForRentExemption(nE.span),space:nE.span,programId:t}),ne(t,u,n,o,m.publicKey,i.mint,d,i.programId,r.mint,p,r.programId,nv(t,u).publicKey,a,s)];c.push(...l)}{let u=[D.yc.createAccountWithSeed({fromPubkey:n,basePubkey:n,seed:S.seed,newAccountPubkey:S.publicKey,lamports:await e.getMinimumBalanceForRentExemption(nE.span),space:nE.span,programId:t}),ne(t,l,n,o,S.publicKey,r.mint,w,r.programId,i.mint,A,i.programId,nv(t,l).publicKey,a,s)];c.push(...u)}return{address:{otherObservaionId:S.publicKey,observationId:m.publicKey,poolId:u,mintAVault:d,mintBVault:p,otherMintAVault:w,otherMintBVault:A},innerTransaction:{instructions:c,signers:[],instructionTypes:[g.createAccount,g.clmmCreatePool],lookupTableAddress:[]}}}static async makeOpenPositionFromLiquidityInstructions({poolInfo:e,ownerInfo:t,tickLower:n,tickUpper:i,liquidity:r,amountMaxA:o,amountMaxB:a,withMetadata:s,direction:c,getEphemeralSigners:u}){let l;let m=[];if(u)l=new D.nh((await u(1))[0]);else{let e=D.RG.generate();m.push(e),l=e.publicKey}let d=nO.getTickArrayStartIndexByTick(n,e.ammConfig.tickSpacing),p=nO.getTickArrayStartIndexByTick(i,e.ammConfig.tickSpacing),{publicKey:S}=nC(e.programId,e.id,d),{publicKey:w}=nC(e.programId,e.id,p),{publicKey:A}=td(t.wallet,l,P.H_),{publicKey:f}=nD(l),{publicKey:y}=nL(e.programId,l),{publicKey:k}=nP(e.programId,e.id,n,i),b=function(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S,g,w,A,f,y,k,b,T,I,h,C,L){let v=ti([ez("tickLowerIndex"),ez("tickUpperIndex"),ez("tickArrayLowerStartIndex"),ez("tickArrayUpperStartIndex"),e5("liquidity"),e2("amountMaxA"),e2("amountMaxB"),e7("withMetadata"),e4("optionBaseFlag"),e7("baseFlag"),e4("direction")]);T==new(U())(0)&&(T=new(U())(1e30)),I==new(U())(0)&&(I=new(U())(1e30));let R=[...L?[{pubkey:L,isSigner:!1,isWritable:!0}]:[]],O=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P._u,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},...R],q=t9.alloc(v.span);v.encode({tickLowerIndex:A,tickUpperIndex:f,tickArrayLowerStartIndex:y,tickArrayUpperStartIndex:k,liquidity:b,amountMaxA:T,amountMaxB:I,withMetadata:"create"===h,baseFlag:!1,optionBaseFlag:0,direction:C},q);let V=t9.from([...t7.openPosition,...q]);return new D.Sl({keys:O,programId:e,data:V})}(e.programId,t.feePayer,e.id,t.wallet,l,A,f,k,S,w,y,t.tokenAccountA,t.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,n,i,d,p,r,o,a,s,c,nX.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[d,p])?nv(e.programId,e.id).publicKey:void 0);return{address:{nftMint:l,tickArrayLower:S,tickArrayUpper:w,positionNftAccount:A,metadataAccount:f,personalPosition:y,protocolPosition:k},innerTransaction:{instructions:[b],signers:m,instructionTypes:[g.clmmOpenPosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static async makeOpenPositionFromBaseInstructions({poolInfo:e,ownerInfo:t,tickLower:n,tickUpper:i,base:r,baseAmount:o,otherAmountMax:a,withMetadata:s,direction:c,getEphemeralSigners:u}){let l;let m=[];if(u)l=new D.nh((await u(1))[0]);else{let e=D.RG.generate();m.push(e),l=e.publicKey}let d=nO.getTickArrayStartIndexByTick(n,e.ammConfig.tickSpacing),p=nO.getTickArrayStartIndexByTick(i,e.ammConfig.tickSpacing),{publicKey:S}=nC(e.programId,e.id,d),{publicKey:w}=nC(e.programId,e.id,p),{publicKey:A}=td(t.wallet,l,P.H_),{publicKey:f}=nD(l),{publicKey:y}=nL(e.programId,l),{publicKey:k}=nP(e.programId,e.id,n,i),b=function(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S,g,w,A,f,y,k,b,T,I,h,C,L){let v=ti([ez("tickLowerIndex"),ez("tickUpperIndex"),ez("tickArrayLowerStartIndex"),ez("tickArrayUpperStartIndex"),e5("liquidity"),e2("amountMaxA"),e2("amountMaxB"),e7("withMetadata"),e4("optionBaseFlag"),e7("baseFlag"),e4("direction")]),R=[...L?[{pubkey:L,isSigner:!1,isWritable:!0}]:[]],O=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P._u,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},...R];h==new(U())(0)&&(h=new(U())(1e30));let q=t9.alloc(v.span);v.encode({tickLowerIndex:A,tickUpperIndex:f,tickArrayLowerStartIndex:y,tickArrayUpperStartIndex:k,liquidity:eu,amountMaxA:"MintA"===T?I:h,amountMaxB:"MintA"===T?h:I,withMetadata:"create"===b,baseFlag:"MintA"===T,optionBaseFlag:1,direction:C},q);let V=t9.from([...t7.openPosition,...q]);return new D.Sl({keys:O,programId:e,data:V})}(e.programId,t.feePayer,e.id,t.wallet,l,A,f,k,S,w,y,t.tokenAccountA,t.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,n,i,d,p,s,r,o,a,c,nX.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[d,p])?nv(e.programId,e.id).publicKey:void 0);return{address:{nftMint:l,tickArrayLower:S,tickArrayUpper:w,positionNftAccount:A,metadataAccount:f,personalPosition:y,protocolPosition:k},innerTransaction:{instructions:[b],signers:m,instructionTypes:[g.clmmOpenPosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeIncreasePositionFromLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:i,amountMaxA:r,amountMaxB:o}){let a=nO.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),s=nO.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:c}=nC(e.programId,e.id,a),{publicKey:u}=nC(e.programId,e.id,s),{publicKey:l}=td(n.wallet,t.nftMint,P.H_),{publicKey:m}=nL(e.programId,t.nftMint),{publicKey:d}=nP(e.programId,e.id,t.tickLower,t.tickUpper);return{address:{tickArrayLower:c,tickArrayUpper:u,positionNftAccount:l,personalPosition:m,protocolPosition:d},innerTransaction:{instructions:[function(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S,g,w,A){let f=ti([e5("liquidity"),e2("amountMaxA"),e2("amountMaxB"),e4("optionBaseFlag"),e7("baseFlag")]),y=[...A?[{pubkey:A,isSigner:!1,isWritable:!0}]:[]],k=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},...y],b=t9.alloc(f.span);f.encode({liquidity:S,amountMaxA:g,amountMaxB:w,optionBaseFlag:0,baseFlag:!1},b);let T=t9.from([...t7.increaseLiquidity,...b]);return new D.Sl({keys:k,programId:e,data:T})}(e.programId,n.wallet,l,m,e.id,d,c,u,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,i,r,o,nX.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[a,s])?nv(e.programId,e.id).publicKey:void 0)],signers:[],instructionTypes:[g.clmmIncreasePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeIncreasePositionFromBaseInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,base:i,baseAmount:r,otherAmountMax:o}){let a=nO.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),s=nO.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:c}=nC(e.programId,e.id,a),{publicKey:u}=nC(e.programId,e.id,s),{publicKey:l}=td(n.wallet,t.nftMint,P.H_),{publicKey:m}=nL(e.programId,t.nftMint),{publicKey:d}=nP(e.programId,e.id,t.tickLower,t.tickUpper);return{address:{tickArrayLower:c,tickArrayUpper:u,positionNftAccount:l,personalPosition:m,protocolPosition:d},innerTransaction:{instructions:[function(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S,g,w,A){let f=ti([e5("liquidity"),e2("amountMaxA"),e2("amountMaxB"),e4("optionBaseFlag"),e7("baseFlag")]),y=[...A?[{pubkey:A,isSigner:!1,isWritable:!0}]:[]],k=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},...y],b=t9.alloc(f.span);f.encode({liquidity:eu,amountMaxA:"MintA"===S?g:w,amountMaxB:"MintA"===S?w:g,baseFlag:"MintA"===S,optionBaseFlag:1},b);let T=t9.from([...t7.increaseLiquidity,...b]);return new D.Sl({keys:k,programId:e,data:T})}(e.programId,n.wallet,l,m,e.id,d,c,u,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,i,r,o,nX.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[a,s])?nv(e.programId,e.id).publicKey:void 0)],signers:[],instructionTypes:[g.clmmIncreasePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeDecreaseLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:i,amountMinA:r,amountMinB:o}){let a=nO.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),s=nO.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:c}=nC(e.programId,e.id,a),{publicKey:u}=nC(e.programId,e.id,s),{publicKey:l}=td(n.wallet,t.nftMint,P.H_),{publicKey:m}=nL(e.programId,t.nftMint),{publicKey:d}=nP(e.programId,e.id,t.tickLower,t.tickUpper),p=[];for(let t=0;t<e.rewardInfos.length;t++)p.push({poolRewardVault:e.rewardInfos[t].tokenVault,ownerRewardVault:n.rewardAccounts[t],rewardMint:e.rewardInfos[t].tokenMint});return{address:{tickArrayLower:c,tickArrayUpper:u,positionNftAccount:l,personalPosition:m,protocolPosition:d},innerTransaction:{instructions:[function(e,t,n,i,r,o,a,s,c,u,l,m,d,p,S,g,w,A,f){let y=ti([e5("liquidity"),e2("amountMinA"),e2("amountMinB")]),k=[...f?[{pubkey:f,isSigner:!1,isWritable:!0}]:[],...S.map(e=>[{pubkey:e.poolRewardVault,isSigner:!1,isWritable:!0},{pubkey:e.ownerRewardVault,isSigner:!1,isWritable:!0},{pubkey:e.rewardMint,isSigner:!1,isWritable:!1}]).flat()],b=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:F,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},...k],T=t9.alloc(y.span);y.encode({liquidity:g,amountMinA:w,amountMinB:A},T);let I=t9.from([...t7.decreaseLiquidity,...T]);return new D.Sl({keys:b,programId:e,data:I})}(e.programId,n.wallet,l,m,e.id,d,c,u,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,p,i,r,o,nX.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[a,s])?nv(e.programId,e.id).publicKey:void 0)],signers:[],instructionTypes:[g.clmmDecreasePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeClosePositionInstructions({poolInfo:e,ownerInfo:t,ownerPosition:n}){let{publicKey:i}=td(t.wallet,n.nftMint,P.H_),{publicKey:r}=nL(e.programId,n.nftMint);return{address:{positionNftAccount:i,personalPosition:r},innerTransaction:{instructions:[function(e,t,n,i,r){let o=ti([]),a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:P.H_,isSigner:!1,isWritable:!1}],s=t9.alloc(o.span);o.encode({},s);let c=t9.from([...t7.closePosition,...s]);return new D.Sl({keys:a,programId:e,data:c})}(e.programId,t.wallet,n.nftMint,i,r)],signers:[],instructionTypes:[g.clmmClosePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeSwapBaseInInstructions({poolInfo:e,sPoolInfo:t,ownerInfo:n,inputMint:i,amountIn:r,amountOutMin:o,sqrtPriceLimitX64:a,remainingAccounts:s}){let c=e.mintA.mint.equals(i);return{address:{},innerTransaction:{instructions:[nt(e.programId,n.wallet,e.id,t.id,e.ammConfig.id,c?n.tokenAccountA:n.tokenAccountB,c?n.tokenAccountB:n.tokenAccountA,c?e.mintA.vault:e.mintB.vault,c?e.mintB.vault:e.mintA.vault,c?t.mintB.vault:t.mintA.vault,c?t.mintA.vault:t.mintB.vault,c?e.mintA.mint:e.mintB.mint,c?e.mintB.mint:e.mintA.mint,s,e.observationId,t.observationId,r,o,a,!0,nv(e.programId,e.id).publicKey,nv(t.programId,t.id).publicKey)],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[g.clmmSwapBaseIn]}}}static makeSwapBaseOutInstructions({poolInfo:e,sPoolInfo:t,ownerInfo:n,outputMint:i,amountOut:r,amountInMax:o,sqrtPriceLimitX64:a,remainingAccounts:s}){let c=e.mintA.mint.equals(i);return{address:{},innerTransaction:{instructions:[nt(e.programId,n.wallet,e.id,t.id,e.ammConfig.id,c?n.tokenAccountB:n.tokenAccountA,c?n.tokenAccountA:n.tokenAccountB,c?e.mintB.vault:e.mintA.vault,c?e.mintA.vault:e.mintB.vault,c?t.mintA.vault:t.mintB.vault,c?t.mintB.vault:t.mintA.vault,c?e.mintB.mint:e.mintA.mint,c?e.mintA.mint:e.mintB.mint,s,e.observationId,t.observationId,r,o,a,!1,nv(e.programId,e.id).publicKey,nv(t.programId,t.id).publicKey)],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[g.clmmSwapBaseOut]}}}static makeInitRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){var i,r,o;let a=(i=e.programId,r=e.id,o=n.mint,G([nf,r.toBuffer(),o.toBuffer()],i)).publicKey,s=G([nb],e.programId).publicKey;return{address:{poolRewardVault:a,operationId:s},innerTransaction:{instructions:[function(e,t,n,i,r,o,a,s,c,u,l,m){let d=ti([e2("openTime"),e2("endTime"),e5("emissionsPerSecondX64")]),p=t9.alloc(d.span);d.encode({openTime:eS(u),endTime:eS(l),emissionsPerSecondX64:m},p);let S=t9.from([...t7.initReward,...p]);return new D.Sl({keys:[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1}],programId:e,data:S})}(e.programId,t.wallet,e.id,s,e.ammConfig.id,t.tokenAccount,n.programId,n.mint,a,n.openTime,n.endTime,n.emissionsPerSecondX64)],signers:[],instructionTypes:[g.clmmInitReward],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeSetRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){let i,r,o;for(let t=0;t<e.rewardInfos.length;t++)e.rewardInfos[t].tokenMint.equals(n.mint)&&(i=t,r=e.rewardInfos[t].tokenVault,o=e.rewardInfos[t].tokenMint);if(void 0===i||void 0===r||void 0===o)throw Error("reward mint check error");let a=G([nb],e.programId).publicKey;return{address:{rewardVault:r,operationId:a},innerTransaction:{instructions:[function(e,t,n,i,r,o,a,s,c,u,l,m){let d=ti([e4("rewardIndex"),e5("emissionsPerSecondX64"),e2("openTime"),e2("endTime")]),p=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0}],S=t9.alloc(d.span);d.encode({rewardIndex:c,emissionsPerSecondX64:m,openTime:eS(u),endTime:eS(l)},S);let g=t9.from([...t7.setRewardEmissions,...S]);return new D.Sl({keys:p,programId:e,data:g})}(e.programId,t.wallet,e.id,a,e.ammConfig.id,t.tokenAccount,r,o,i,n.openTime,n.endTime,n.emissionsPerSecondX64)],signers:[],instructionTypes:[g.clmmInitReward],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static makeCollectRewardInstructions({poolInfo:e,ownerInfo:t,rewardMint:n}){let i,r;for(let t=0;t<e.rewardInfos.length;t++)e.rewardInfos[t].tokenMint.equals(n)&&(i=t,r=e.rewardInfos[t].tokenVault);if(void 0===i||void 0===r)throw Error("reward mint check error");return{address:{rewardVault:r},innerTransaction:{instructions:[function(e,t,n,i,r,o,a){let s=ti([e4("rewardIndex")]),c=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P.nA,isSigner:!1,isWritable:!1},{pubkey:F,isSigner:!1,isWritable:!1}],u=t9.alloc(s.span);s.encode({rewardIndex:a},u);let l=t9.from([...t7.collectReward,...u]);return new D.Sl({keys:c,programId:e,data:l})}(e.programId,t.wallet,e.id,t.tokenAccount,r,n,i)],signers:[],instructionTypes:[g.clmmInitReward],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default))}}}static getLiquidityAmountOutFromAmountIn({poolInfo:e,inputA:t,tickLower:n,tickUpper:i,amount:r,slippage:o,add:a,token2022Infos:s,epochInfo:c,amountHasFee:u}){let l;let m=e.sqrtPriceX64,d=nz.getSqrtPriceX64FromTick(n),p=nz.getSqrtPriceX64FromTick(i),S=tb(r,s[t?e.mintA.mint.toString():e.mintB.mint.toString()]?.feeConfig,c,!u),g=new(U())(new t8.Z(S.amount.sub(S.fee??eu).toString()).mul(a?1-o:1+o).toFixed(0));if(m.lte(d))l=t?nj.getLiquidityFromTokenAmountA(d,p,g,!a):new(U())(0);else if(m.lte(p)){let e=nj.getLiquidityFromTokenAmountA(m,p,g,!a),n=nj.getLiquidityFromTokenAmountB(d,m,g);l=t?e:n}else l=t?new(U())(0):nj.getLiquidityFromTokenAmountB(d,p,g);return this.getAmountsFromLiquidity({poolInfo:e,tickLower:n,tickUpper:i,liquidity:l,slippage:o,add:a,token2022Infos:s,epochInfo:c,amountAddFee:u})}static getLiquidityFromAmounts({poolInfo:e,tickLower:t,tickUpper:n,amountA:i,amountB:r,slippage:o,add:a,token2022Infos:s,epochInfo:c,amountHasFee:u}){let[l,m,d,p]=t<n?[t,n,i,r]:[n,t,r,i],S=e.sqrtPriceX64,g=nz.getSqrtPriceX64FromTick(l),w=nz.getSqrtPriceX64FromTick(m),[A,f]=[tb(d,s[e.mintA.mint.toString()]?.feeConfig,c,!u),tb(p,s[e.mintB.mint.toString()]?.feeConfig,c,!u)],y=nj.getLiquidityFromTokenAmounts(S,g,w,A.amount.sub(A.fee??eu),f.amount.sub(f.fee??eu));return this.getAmountsFromLiquidity({poolInfo:e,tickLower:t,tickUpper:n,liquidity:y,slippage:o,add:a,token2022Infos:s,epochInfo:c,amountAddFee:!u})}static getAmountsFromLiquidity({poolInfo:e,tickLower:t,tickUpper:n,liquidity:i,slippage:r,add:o,token2022Infos:a,epochInfo:s,amountAddFee:c}){let u=nz.getSqrtPriceX64FromTick(t),l=nz.getSqrtPriceX64FromTick(n),m=o?1+r:1-r,d=nj.getAmountsFromLiquidity(e.sqrtPriceX64,u,l,i,o),[p,S]=[tb(d.amountA,a[e.mintA.mint.toString()]?.feeConfig,s,c),tb(d.amountB,a[e.mintB.mint.toString()]?.feeConfig,s,c)],[g,w]=[tb(new(U())(new t8.Z(d.amountA.toString()).mul(m).toFixed(0)),a[e.mintA.mint.toString()]?.feeConfig,s,c),tb(new(U())(new t8.Z(d.amountB.toString()).mul(m).toFixed(0)),a[e.mintB.mint.toString()]?.feeConfig,s,c)];return{liquidity:i,amountA:p,amountB:S,amountSlippageA:g,amountSlippageB:w,expirationTime:tT(p.expirationTime,S.expirationTime)}}static getPriceAndTick({poolInfo:e,price:t,baseIn:n}){let i=n?t:new t8.Z(1).div(t),r=nQ.getTickWithPriceAndTickspacing(i,e.ammConfig.tickSpacing,e.mintA.decimals,e.mintB.decimals),o=nz.getSqrtPriceX64FromTick(r),a=nz.sqrtPriceX64ToPrice(o,e.mintA.decimals,e.mintB.decimals);return n?{tick:r,price:a}:{tick:r,price:new t8.Z(1).div(a)}}static getTickPrice({poolInfo:e,tick:t,baseIn:n}){let i=nz.getSqrtPriceX64FromTick(t),r=nz.sqrtPriceX64ToPrice(i,e.mintA.decimals,e.mintB.decimals);return n?{tick:t,price:r,tickSqrtPriceX64:i}:{tick:t,price:new t8.Z(1).div(r),tickSqrtPriceX64:i}}static computeAmountOutFormat({poolInfo:e,tickArrayCache:t,token2022Infos:n,epochInfo:i,amountIn:r,currencyOut:o,slippage:a,catchLiquidityInsufficient:s=!1}){let c=r instanceof e_,u=(c?r.token:eb.WSOL).mint,l=r.raw,m=a.numerator.toNumber()/a.denominator.toNumber(),{allTrade:d,realAmountIn:p,amountOut:S,minAmountOut:g,expirationTime:w,currentPrice:A,executionPrice:f,priceImpact:y,fee:k,remainingAccounts:b,executionPriceX64:T}=this.computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:u,amountIn:l,slippage:m,token2022Infos:n,epochInfo:i,catchLiquidityInsufficient:s}),I={...p,amount:c?new e_(r.token,p.amount):new eE(ek.SOL,p.amount),fee:void 0===p.fee?void 0:c?new e_(r.token,p.fee):new eE(ek.SOL,p.fee)},h={...S,amount:o instanceof eb?new e_(o,S.amount):new eE(o,S.amount),fee:void 0===S.fee?void 0:o instanceof eb?new e_(o,S.fee):new eE(o,S.fee)},C={...g,amount:o instanceof eb?new e_(o,g.amount):new eE(o,g.amount),fee:void 0===g.fee?void 0:o instanceof eb?new e_(o,g.fee):new eE(o,g.fee)},P=new eW(c?r.token:r.currency,new(U())(10).pow(new(U())(20+(c?r.token:r.currency).decimals)),o instanceof eb?o:eb.WSOL,A.mul(new t8.Z(10**(20+(o instanceof eb?o:eb.WSOL).decimals))).toFixed(0)),L=new eW(c?r.token:r.currency,new(U())(10).pow(new(U())(20+(c?r.token:r.currency).decimals)),o instanceof eb?o:eb.WSOL,f.mul(new t8.Z(10**(20+(o instanceof eb?o:eb.WSOL).decimals))).toFixed(0)),D=c?new e_(r.token,k):new eE(r.currency,k);return{allTrade:d,realAmountIn:I,amountOut:h,minAmountOut:C,expirationTime:w,currentPrice:P,executionPrice:L,priceImpact:y,fee:D,remainingAccounts:b,executionPriceX64:T}}static async computeAmountOutAndCheckToken({connection:e,poolInfo:t,tickArrayCache:n,baseMint:i,amountIn:r,slippage:o,priceLimit:a=new t8.Z(0),catchLiquidityInsufficient:s=!1}){let c=await e.getEpochInfo(),u=await tI({connection:e,mints:[t.mintA,t.mintB].filter(e=>e.programId.equals(P.nA)).map(e=>e.mint)});return this.computeAmountOut({poolInfo:t,tickArrayCache:n,baseMint:i,amountIn:r,slippage:o,priceLimit:a,token2022Infos:u,epochInfo:c,catchLiquidityInsufficient:s})}static computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:n,token2022Infos:i,epochInfo:r,amountIn:o,slippage:a,priceLimit:s=new t8.Z(0),catchLiquidityInsufficient:c=!1}){let u;u=s.equals(new t8.Z(0))?n.equals(e.mintA.mint)?ns.add(el):nc.sub(el):nz.priceToSqrtPriceX64(s,e.mintA.decimals,e.mintB.decimals);let l=tb(o,i[n.toString()]?.feeConfig,r,!1),{allTrade:m,realTradeAmountIn:d,expectedAmountOut:p,remainingAccounts:S,executionPrice:g,feeAmount:w}=nX.getOutputAmountAndRemainAccounts(e,t,n,l.amount.sub(l.fee??eu),u,c),A=tb(d,i[n.toString()]?.feeConfig,r,!0),f=e.mintA.mint.equals(n)?e.mintB.mint:e.mintA.mint,y=tb(p,i[f.toString()]?.feeConfig,r,!1),k=nz.sqrtPriceX64ToPrice(g,e.mintA.decimals,e.mintB.decimals),b=n.equals(e.mintA.mint)?k:new t8.Z(1).div(k),T=p.mul(new(U())(Math.floor((1-a)*1e10))).div(new(U())(1e10)),I=tb(T,i[f.toString()]?.feeConfig,r,!1),h=e.mintA.mint.equals(n)?e.currentPrice:new t8.Z(1).div(e.currentPrice),C=new t8.Z(b).sub(h).abs(),P=new eM(new t8.Z(C).mul(1e15).toFixed(0),new t8.Z(h).mul(1e15).toFixed(0));return{allTrade:m,realAmountIn:A,amountOut:y,minAmountOut:I,expirationTime:tT(A.expirationTime,y.expirationTime),currentPrice:e.currentPrice,executionPrice:b,priceImpact:P,fee:w,remainingAccounts:S,executionPriceX64:g}}static async computeAmountInAndCheckToken({connection:e,poolInfo:t,tickArrayCache:n,baseMint:i,amountOut:r,slippage:o,priceLimit:a=new t8.Z(0)}){let s=await e.getEpochInfo(),c=await tI({connection:e,mints:[t.mintA,t.mintB].filter(e=>e.programId.equals(P.nA)).map(e=>e.mint)});return this.computeAmountIn({poolInfo:t,tickArrayCache:n,baseMint:i,amountOut:r,slippage:o,priceLimit:a,token2022Infos:c,epochInfo:s})}static computeAmountIn({poolInfo:e,tickArrayCache:t,baseMint:n,token2022Infos:i,epochInfo:r,amountOut:o,slippage:a,priceLimit:s=new t8.Z(0)}){let c;c=s.equals(new t8.Z(0))?n.equals(e.mintB.mint)?ns.add(el):nc.sub(el):nz.priceToSqrtPriceX64(s,e.mintA.decimals,e.mintB.decimals);let u=tb(o,i[n.toString()]?.feeConfig,r,!0),{expectedAmountIn:l,remainingAccounts:m,executionPrice:d,feeAmount:p}=nX.getInputAmountAndRemainAccounts(e,t,n,u.amount.sub(u.fee??eu),c),S=e.mintA.mint.equals(n)?e.mintB.mint:e.mintA.mint,g=tb(l,i[S.toString()]?.feeConfig,r,!0),w=nz.sqrtPriceX64ToPrice(d,e.mintA.decimals,e.mintB.decimals),A=n.equals(e.mintA.mint)?w:new t8.Z(1).div(w),f=l.mul(new(U())(Math.floor((1+a)*1e10))).div(new(U())(1e10)),y=tb(f,i[S.toString()]?.feeConfig,r,!0),k=e.mintA.mint.equals(n)?e.currentPrice:new t8.Z(1).div(e.currentPrice),b=new t8.Z(A).sub(k).abs(),T=new eM(new t8.Z(b).mul(1e15).toFixed(0),new t8.Z(k).mul(1e15).toFixed(0));return{amountIn:g,maxAmountIn:y,realAmountOut:u,expirationTime:tT(g.expirationTime,u.expirationTime),currentPrice:e.currentPrice,executionPrice:A,priceImpact:T,fee:p,remainingAccounts:m}}static estimateAprsForPriceRangeMultiplier({poolInfo:e,aprType:t,positionTickLowerIndex:n,positionTickUpperIndex:i}){let r;let o=e[t],a=this.getTickPrice({poolInfo:e,tick:n,baseIn:!0}).price.toNumber(),s=this.getTickPrice({poolInfo:e,tick:i,baseIn:!0}).price.toNumber(),c=Math.max(a,o.priceMin),u=Math.min(s,o.priceMax),l=u-c,m=s-a,d=o.priceMax-o.priceMin;return r=l<=0?0:m===l?d/l:d===l?l/m:l/d*(l/m),{feeApr:o.feeApr*r,rewardsApr:[o.rewardApr.A*r,o.rewardApr.B*r,o.rewardApr.C*r],apr:o.apr*r}}static estimateAprsForPriceRangeDelta({poolInfo:e,aprType:t,mintPrice:n,rewardMintDecimals:i,liquidity:r,positionTickLowerIndex:o,positionTickUpperIndex:a,chainTime:s}){let c=e[t],u=n[e.mintA.mint.toString()],l=n[e.mintB.mint.toString()],m=e.mintA.decimals,d=e.mintB.decimals;if(!c||!u||!l)return{feeApr:0,rewardsApr:[0,0,0],apr:0};let p=nz.getSqrtPriceX64FromTick(o),S=nz.getSqrtPriceX64FromTick(a),{amountSlippageA:g,amountSlippageB:w}=nj.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,p,S,e.liquidity,!1,!1,0),{amountSlippageA:A,amountSlippageB:f}=nj.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,p,S,r,!1,!1,0),y=new t8.Z(g.toString()).div(new t8.Z(10).pow(m)).mul(u.toFixed(m)).add(new t8.Z(w.toString()).div(new t8.Z(10).pow(d)).mul(l.toFixed(d))),k=new t8.Z(A.toString()).div(new t8.Z(10).pow(m)).mul(u.toFixed(m)).add(new t8.Z(f.toString()).div(new t8.Z(10).pow(d)).mul(l.toFixed(d))),b=k.div(y.add(k)).div(k),T=new t8.Z(c.volumeFee).mul(365).div("day"===t?1:"week"===t?7:"month"===t?30:0),I=T.mul(b).mul(100).toNumber(),h=e.rewardInfos.map(e=>{let t=i[e.tokenMint.toString()],r=n[e.tokenMint.toString()];return s<e.openTime.toNumber()||s>e.endTime.toNumber()||e.perSecond.equals(0)||!r||void 0===t?0:new t8.Z(r.toFixed(t)).mul(e.perSecond.mul(31536e3)).div(new t8.Z(10).pow(t)).mul(b).mul(100).toNumber()});return{feeApr:I,rewardsApr:h,apr:I+h.reduce((e,t)=>e+t,0)}}static async fetchMultiplePoolInfos({connection:e,poolKeys:t,ownerInfo:n,chainTime:i,batchRequest:r=!1,updateOwnerRewardAndFee:o=!0}){let a=await $(e,t.map(e=>new D.nh(e.id)),{batchRequest:r}),s={};for(let e=0;e<t.length;e++){let n=t[e],i=a[e];null!==i&&(s[n.id]=nv(i.owner,new D.nh(n.id)).publicKey)}let c=await this.fetchExBitmaps({connection:e,exBitmapAddress:Object.values(s),batchRequest:r}),u=[],l={},m=[];for(let r=0;r<t.length;r++){let o=t[r],d=a[r],p=c[s[o.id].toString()];if(null===d)continue;let S=nx.decode(d.data);l[o.id]={state:{id:new D.nh(o.id),mintA:{programId:new D.nh(o.mintProgramIdA),mint:S.mintA,vault:S.vaultA,decimals:S.mintDecimalsA},mintB:{programId:new D.nh(o.mintProgramIdB),mint:S.mintB,vault:S.vaultB,decimals:S.mintDecimalsB},observationId:S.observationId,ammConfig:{id:new D.nh("F7JaRQaKZt25nBCqpXQvVwwUWKofrXqJiuRb1nCSiAGW"),index:0,protocolFeeRate:30,tradeFeeRate:30,tickSpacing:64,fundFeeRate:30,fundOwner:"7ihN8QaTfNoDTRTQGULCzbUT3PHwPDTu5Brcu4iT2paP",description:"hehe"},creator:S.creator,programId:d.owner,version:6,tickSpacing:S.tickSpacing,liquidity:S.liquidity,sqrtPriceX64:S.sqrtPriceX64,currentPrice:nz.sqrtPriceX64ToPrice(S.sqrtPriceX64,S.mintDecimalsA,S.mintDecimalsB),tickCurrent:S.tickCurrent,observationIndex:S.observationIndex,observationUpdateDuration:S.observationUpdateDuration,feeGrowthGlobalX64A:S.feeGrowthGlobalX64A,feeGrowthGlobalX64B:S.feeGrowthGlobalX64B,protocolFeesTokenA:S.protocolFeesTokenA,protocolFeesTokenB:S.protocolFeesTokenB,swapInAmountTokenA:S.swapInAmountTokenA,swapOutAmountTokenB:S.swapOutAmountTokenB,swapInAmountTokenB:S.swapInAmountTokenB,swapOutAmountTokenA:S.swapOutAmountTokenA,tickArrayBitmap:S.tickArrayBitmap,rewardInfos:await nX.updatePoolRewardInfos({connection:e,apiPoolInfo:o,chainTime:i,poolLiquidity:S.liquidity,rewardInfos:S.rewardInfos.filter(e=>!e.tokenMint.equals(D.nh.default))}),day:o.day,week:o.week,month:o.month,tvl:o.tvl,lookupTableAccount:o.lookupTableAccount?new D.nh(o.lookupTableAccount):D.nh.default,startTime:S.startTime.toNumber(),exBitmapInfo:p}},n&&m.push(...l[o.id].state.rewardInfos.filter(e=>e.creator.equals(n.wallet))),u.find(e=>e.equals(d.owner))||u.push(d.owner)}if(n){let t=n.tokenAccounts.filter(e=>e.accountInfo.amount.eq(new(U())(1))).map(e=>e.accountInfo.mint),i=[];for(let e of t)for(let t of u)i.push(nL(t,e).publicKey);let a=await $(e,i,{batchRequest:r}),s={};for(let e of a){if(null===e)continue;let t=nN.decode(e.data),n=t.poolId.toString(),i=l[n];if(void 0===i)continue;let r=i.state,o=this.getTickPrice({poolInfo:r,tick:t.tickLower,baseIn:!0}),a=this.getTickPrice({poolInfo:r,tick:t.tickUpper,baseIn:!0}),{amountA:c,amountB:u}=nj.getAmountsFromLiquidity(r.sqrtPriceX64,o.tickSqrtPriceX64,a.tickSqrtPriceX64,t.liquidity,!1),m=1/(1-Math.sqrt(Math.sqrt(o.price.div(a.price).toNumber())));l[n].positionAccount=[...l[n].positionAccount??[],{poolId:t.poolId,nftMint:t.nftMint,priceLower:o.price,priceUpper:a.price,amountA:c,amountB:u,tickLower:t.tickLower,tickUpper:t.tickUpper,liquidity:t.liquidity,feeGrowthInsideLastX64A:t.feeGrowthInsideLastX64A,feeGrowthInsideLastX64B:t.feeGrowthInsideLastX64B,tokenFeesOwedA:t.tokenFeesOwedA,tokenFeesOwedB:t.tokenFeesOwedB,rewardInfos:t.rewardInfos.map(e=>({...e,pendingReward:new(U())(0)})),leverage:m,tokenFeeAmountA:new(U())(0),tokenFeeAmountB:new(U())(0)}];let d=nO.getTickArrayAddressByTick(l[n].state.programId,t.poolId,t.tickLower,l[n].state.tickSpacing),p=nO.getTickArrayAddressByTick(l[n].state.programId,t.poolId,t.tickUpper,l[n].state.tickSpacing);s[`${l[n].state.programId.toString()}-${t.poolId.toString()}-${t.tickLower}`]=d,s[`${l[n].state.programId.toString()}-${t.poolId.toString()}-${t.tickUpper}`]=p}if(o){let t=Object.values(s),n=await $(e,t,{batchRequest:r}),i={};for(let e=0;e<t.length;e++){let r=n[e];if(null===r)continue;let o=t[e];i[o.toString()]={address:o,...nF.decode(r.data)}}for(let{state:e,positionAccount:t}of Object.values(l))if(t)for(let n of t){let t=`${e.programId.toString()}-${e.id.toString()}-${n.tickLower}`,r=`${e.programId.toString()}-${e.id.toString()}-${n.tickUpper}`,o=i[s[t].toString()],a=i[s[r].toString()],c=o.ticks[nO.getTickOffsetInArray(n.tickLower,e.tickSpacing)],u=a.ticks[nO.getTickOffsetInArray(n.tickUpper,e.tickSpacing)],{tokenFeeAmountA:l,tokenFeeAmountB:m}=n$.GetPositionFees(e,n,c,u),d=n$.GetPositionRewards(e,n,c,u);n.tokenFeeAmountA=l.gte(eu)&&l.lt(nl)?l:eu,n.tokenFeeAmountB=m.gte(eu)&&l.lt(nl)?m:eu;for(let e=0;e<d.length;e++)n.rewardInfos[e].pendingReward=d[e].gte(eu)&&d[e].lt(nl)?d[e]:eu}}}if(m.length>0){let t=m.map(e=>e.tokenVault),n=await $(e,t,{batchRequest:r}),i={};for(let e=0;e<t.length;e++){let r=t[e].toString(),o=n[e];if(null===o)continue;let a=to.decode(o.data);i[r]=a.amount}for(let e of m){let t=i[e.tokenVault.toString()];e.remainingRewards=void 0!==t?t.sub(e.rewardTotalEmissioned.sub(e.rewardClaimed)):eu}}return l}static async fetchMultiplePoolTickArrays({connection:e,poolKeys:t,batchRequest:n}){let i={},r=[];for(let e of t){let t=nO.getTickArrayStartIndexByTick(e.tickCurrent,e.tickSpacing),n=nO.getInitializedTickArrayInRange(e.tickArrayBitmap,e.exBitmapInfo,e.tickSpacing,t,7);for(let t of n){let{publicKey:n}=nC(e.programId,e.id,t);r.push({pubkey:n}),i[n.toString()]=e.id}}let o=await ee(e,r,{batchRequest:n}),a={};for(let e of o){if(!e.accountInfo)continue;let t=i[e.pubkey.toString()];if(!t)continue;void 0===a[t.toString()]&&(a[t.toString()]={});let n=nF.decode(e.accountInfo.data);a[t.toString()][n.startTickIndex]={...n,address:e.pubkey}}return a}static async fetchExBitmaps({connection:e,exBitmapAddress:t,batchRequest:n}){let i=await ee(e,t.map(e=>({pubkey:e})),{batchRequest:n}),r={};for(let e of i)null!==e.accountInfo&&(r[e.pubkey.toString()]=nY.decode(e.accountInfo.data));return r}static async getWhiteListMint({connection:e,programId:t}){let n=await e.getAccountInfo(G([nb],t).publicKey);if(!n)return[];let i=nK.decode(n.data);return i.whitelistMints.filter(e=>!e.equals(D.nh.default))}}let n4="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",n6=new D.nh(n4),n2={[n4]:3},n5={3:n6},n3=ti([ej(5),ej(8),e9("ownAddress"),e2("vaultSignerNonce"),e9("baseMint"),e9("quoteMint"),e9("baseVault"),e2("baseDepositsTotal"),e2("baseFeesAccrued"),e9("quoteVault"),e2("quoteDepositsTotal"),e2("quoteFeesAccrued"),e2("quoteDustThreshold"),e9("requestQueue"),e9("eventQueue"),e9("bids"),e9("asks"),e2("baseLotSize"),e2("quoteLotSize"),e2("feeRateBps"),e2("referrerRebatesAccrued"),ej(7)]),n8={3:n3};var n9=n(37407).Buffer;let n7=M.from("Serum");class ie{static getProgramId(e){let t=n5[e];return n7.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=n2[t];return n7.assertArgument(!!n,"invalid program id","programId",t),n}static getStateLayout(e){let t=n8[e];return n7.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let n;let i=[t.toBuffer()],r=0;for(;r<100;){try{let t=i.concat(n9.from([r]),n9.alloc(7));n=D.nh.createProgramAddressSync(t,e)}catch(e){if(e instanceof TypeError)throw e;r++;continue}return{publicKey:n,nonce:r}}return n7.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}}let it=new D.nh("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ii=ti([e2("x"),e2("y"),e2("price")]),ir=ti([e2("accountType"),e2("status"),e2("multiplier"),e2("validDataCount"),tr(ii,5e4,"DataElement")]);function io(e,t,n){let[i,r,o]=function(e,t,n){let[i,r]=[0,49998],o=i,a=r,s=0,c=t*e.multiplier/n;for(;o<=a&&0!==(s=Math.floor((a+o)/2))&&!(s>=49998);){let t=e.DataElement[s].x*e.multiplier/e.DataElement[s].y,n=e.DataElement[s-1].x*e.multiplier/e.DataElement[s-1].y,i=e.DataElement[s+1].x*e.multiplier/e.DataElement[s+1].y;if(c===t)return[s,s,!0];if(c===n)return[s-1,s-1,!0];if(c===i)return[s+1,s+1,!0];if(c<n)a=s-1;else{if(c>n&&c<t)return[s-1,s,!0];if(c>t&&c<i)return[s,s+1,!0];o=s+1}}return[s,s,!1]}(e,t,n);if(!o)return 0;if(i===r){let n=e.DataElement[i].x,r=t*e.multiplier/n;return r}{let o=e.DataElement[i].x,a=e.DataElement[i].y,s=e.DataElement[r].x,c=e.DataElement[r].y,u=n*(s*a-o*c),l=t*e.multiplier*u/(o*u+(s-o)*(t*a-o*n)*c);return l}}function ia(e,t,n){return t*e.multiplier/n}function is(e,t,n){return t*n/e.multiplier}function ic(e,t,n,i){let r=i?t+n:t-n,[o,a,s]=function(e,t){let[n,i]=[0,49998],r=n,o=i,a=0;for(;r<o&&!((a=Math.floor((o+r)/2))<=0)&&!(a>49998);){let n=e.DataElement[a].x,i=e.DataElement[a-1].x,s=e.DataElement[a+1].x;if(t===n)return[a,a,!0];if(t===i)return[a-1,a-1,!0];if(t===s)return[a+1,a+1,!0];if(t<i)o=a-1;else{if(t>i&&t<n)return[a-1,a,!0];if(t>n&&t<s)return[a,a+1,!0];r=a+1}}return[a,a,!1]}(e,r);if(!s)return[0,0,!1,s];if(o===a)return[e.DataElement[a].price,e.DataElement[a].y,!1,s];{let n=e.DataElement[o].x,c=e.DataElement[a].x,u=e.DataElement[o].price,l=e.DataElement[a].price,m=e.DataElement[o].y,d=e.DataElement[a].y;if(t>=n&&t<=c)return i?[l,d,!0,s]:[u,m,!0,s];{let o,a;return i?(o=u+(l-u)*(t-n)/(c-n),a=m-(r-n)*e.multiplier/l):(o=u+(l-u)*(t-n)/(c-n),a=d+(c-r)*e.multiplier/u),[o,a,!1,s]}}}var iu=n(37407).Buffer;let il=M.from("Liquidity"),im={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};async function id(e){if(0===im.validDataCount&&e){let t=await e.getAccountInfo(it);t&&(im=function(e){let t=ir.decode(e);return{accountType:t.accountType.toNumber(),status:t.status.toNumber(),multiplier:t.multiplier.toNumber(),validDataCount:t.validDataCount.toNumber(),DataElement:t.DataElement.map(e=>({x:e.x.toNumber(),y:e.y.toNumber(),price:e.price.toNumber()}))}}(t?.data))}}(l=f||(f={}))[l.Uninitialized=0]="Uninitialized",l[l.Initialized=1]="Initialized",l[l.Disabled=2]="Disabled",l[l.RemoveLiquidityOnly=3]="RemoveLiquidityOnly",l[l.LiquidityOnly=4]="LiquidityOnly",l[l.OrderBook=5]="OrderBook",l[l.Swap=6]="Swap",l[l.WaitingForStart=7]="WaitingForStart";let ip=new(U())(25),iS=new(U())(1e4);class ig extends tw{static getStateLayout(e){let t=t3[e];return il.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedId({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("amm_associated_seed","utf-8")],e);return n}static getAssociatedAuthority({programId:e}){return G([iu.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}static getAssociatedBaseVault({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("coin_vault_associated_seed","utf-8")],e);return n}static getAssociatedQuoteVault({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("pc_vault_associated_seed","utf-8")],e);return n}static getAssociatedLpMint({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("lp_mint_associated_seed","utf-8")],e);return n}static getAssociatedLpVault({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("temp_lp_token_associated_seed","utf-8")],e);return n}static getAssociatedTargetOrders({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("target_associated_seed","utf-8")],e);return n}static getAssociatedWithdrawQueue({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("withdraw_associated_seed","utf-8")],e);return n}static getAssociatedOpenOrders({programId:e,marketId:t}){let{publicKey:n}=G([e.toBuffer(),t.toBuffer(),iu.from("open_order_associated_seed","utf-8")],e);return n}static getAssociatedConfigId({programId:e}){let{publicKey:t}=G([iu.from("amm_config_account_seed","utf-8")],e);return t}static getAssociatedPoolKeys({version:e,marketVersion:t,marketId:n,baseMint:i,quoteMint:r,baseDecimals:o,quoteDecimals:a,programId:s,marketProgramId:c}){let u=this.getAssociatedId({programId:s,marketId:n}),l=this.getAssociatedLpMint({programId:s,marketId:n}),{publicKey:m,nonce:d}=this.getAssociatedAuthority({programId:s}),p=this.getAssociatedBaseVault({programId:s,marketId:n}),S=this.getAssociatedQuoteVault({programId:s,marketId:n}),g=this.getAssociatedLpVault({programId:s,marketId:n}),w=this.getAssociatedOpenOrders({programId:s,marketId:n}),A=this.getAssociatedTargetOrders({programId:s,marketId:n}),f=this.getAssociatedWithdrawQueue({programId:s,marketId:n}),{publicKey:y}=ie.getAssociatedAuthority({programId:c,marketId:n});return{id:u,baseMint:i,quoteMint:r,lpMint:l,baseDecimals:o,quoteDecimals:a,lpDecimals:o,version:e,programId:s,authority:m,nonce:d,baseVault:p,quoteVault:S,lpVault:g,openOrders:w,targetOrders:A,withdrawQueue:f,marketVersion:t,marketProgramId:c,marketId:n,marketAuthority:y,lookupTableAccount:D.nh.default,configId:this.getAssociatedConfigId({programId:s})}}static async getCreatePoolFee({connection:e,programId:t}){let n=this.getAssociatedConfigId({programId:t}),i=ti([e2("fee")]),r=await e.getAccountInfo(n,{dataSlice:{offset:536,length:8}});if(null===r)throw Error("get config account error");return i.decode(r.data).fee}static makeAddLiquidityInstruction(e){let{poolKeys:t,userKeys:n,baseAmountIn:i,quoteAmountIn:r,fixedSide:o}=e,{version:a}=t;if(4===a||5===a){let e=ti([e4("instruction"),e2("baseAmountIn"),e2("quoteAmountIn"),e2("fixedSide")]),s=iu.alloc(e.span);e.encode({instruction:3,baseAmountIn:eS(i),quoteAmountIn:eS(r),fixedSide:eS("base"===o?0:1)},s);let c=[z(P.H_,!1),Z(t.id,!1),z(t.authority,!1),z(t.openOrders,!1),Z(t.targetOrders,!1),Z(t.lpMint,!1),Z(t.baseVault,!1),Z(t.quoteVault,!1)];return 5===a&&c.push(Z(it,!1)),c.push(z(t.marketId,!1),Z(n.baseTokenAccount,!1),Z(n.quoteTokenAccount,!1),Z(n.lpTokenAccount,!1),z(n.owner,!0),z(t.marketEventQueue,!1)),{address:{},innerTransaction:{instructions:[new D.Sl({programId:t.programId,keys:c,data:s})],signers:[],lookupTableAddress:[t.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[4===a?g.ammV4AddLiquidity:g.ammV5AddLiquidity]}}}return il.throwArgumentError("invalid version","poolKeys.version",a)}static async makeAddLiquidityInstructionSimple(e){let{connection:t,poolKeys:n,userKeys:i,amountInA:r,amountInB:o,fixedSide:a,config:s,makeTxVersion:c,lookupTableCache:u,computeBudgetConfig:l}=e,{lpMint:m}=n,{tokenAccounts:d,owner:p,payer:S=p}=i;il.debug("amountInA:",r),il.debug("amountInB:",o),il.assertArgument(!r.isZero()&&!o.isZero(),"amounts must greater than zero","amountInA & amountInB",{amountInA:r.toFixed(),amountInB:o.toFixed()});let{bypassAssociatedCheck:g,checkCreateATAOwner:w}={bypassAssociatedCheck:!1,checkCreateATAOwner:!1,...s},A=r instanceof e_?r.token:eb.WSOL,f=o instanceof e_?o.token:eb.WSOL,y=this._selectTokenAccount({programId:P.H_,tokenAccounts:d,mint:A.mint,owner:p,config:{associatedOnly:!1}}),k=this._selectTokenAccount({programId:P.H_,tokenAccounts:d,mint:f.mint,owner:p,config:{associatedOnly:!1}});il.assertArgument(!!y||!!k,"cannot found target token accounts","tokenAccounts",d);let b=this._selectTokenAccount({programId:P.H_,tokenAccounts:d,mint:m,owner:p}),T=[A,f],I=[y,k],h=[r.raw,o.raw],[C]=this._getAmountsSide(r,o,n),L="base";if("quote"===C){if(T.reverse(),I.reverse(),h.reverse(),"a"===a)L="quote";else{if("b"!==a)return il.throwArgumentError("invalid fixedSide","fixedSide",a);L="base"}}else if("base"!==C)return il.throwArgumentError("invalid fixedSide","fixedSide",a);else if("a"===a)L="base";else{if("b"!==a)return il.throwArgumentError("invalid fixedSide","fixedSide",a);L="quote"}let[D,v]=T,[R,U]=I,[O,q]=h,V=[],B=[],E=[],_=[],x=[],M=await this._handleTokenAccount({programId:P.H_,connection:t,side:"in",amount:O,mint:D.mint,tokenAccount:R,owner:p,payer:S,frontInstructions:V,endInstructions:B,signers:x,bypassAssociatedCheck:g,frontInstructionsType:E,endInstructionsType:_,checkCreateATAOwner:w}),N=await this._handleTokenAccount({programId:P.H_,connection:t,side:"in",amount:q,mint:v.mint,tokenAccount:U,owner:p,payer:S,frontInstructions:V,endInstructions:B,signers:x,bypassAssociatedCheck:g,frontInstructionsType:E,endInstructionsType:_,checkCreateATAOwner:w}),W=await this._handleTokenAccount({programId:P.H_,connection:t,side:"out",amount:0,mint:m,tokenAccount:b,owner:p,payer:S,frontInstructions:V,endInstructions:B,signers:x,bypassAssociatedCheck:g,frontInstructionsType:E,endInstructionsType:_,checkCreateATAOwner:w}),F=this.makeAddLiquidityInstruction({poolKeys:n,userKeys:{baseTokenAccount:M,quoteTokenAccount:N,lpTokenAccount:W,owner:p},baseAmountIn:O,quoteAmountIn:q,fixedSide:L});return{address:{lpTokenAccount:W},innerTransactions:await eo({connection:t,makeTxVersion:c,computeBudgetConfig:l,payer:S,innerTransaction:[{instructionTypes:E,instructions:V,signers:x},F.innerTransaction,{instructionTypes:_,instructions:B,signers:[]}],lookupTableCache:u})}}static makeRemoveLiquidityInstruction(e){let{poolKeys:t,userKeys:n,amountIn:i}=e,{version:r}=t;if(4===r||5===r){let e=ti([e4("instruction"),e2("amountIn")]),o=iu.alloc(e.span);e.encode({instruction:4,amountIn:eS(i)},o);let a=[z(P.H_,!1),Z(t.id,!1),z(t.authority,!1),Z(t.openOrders,!1),Z(t.targetOrders,!1),Z(t.lpMint,!1),Z(t.baseVault,!1),Z(t.quoteVault,!1)];return 5===r?a.push(Z(it,!1)):(a.push(Z(t.withdrawQueue,!1)),a.push(Z(t.lpVault,!1))),a.push(z(t.marketProgramId,!1),Z(t.marketId,!1),Z(t.marketBaseVault,!1),Z(t.marketQuoteVault,!1),z(t.marketAuthority,!1),Z(n.lpTokenAccount,!1),Z(n.baseTokenAccount,!1),Z(n.quoteTokenAccount,!1),z(n.owner,!0),Z(t.marketEventQueue,!1),Z(t.marketBids,!1),Z(t.marketAsks,!1)),{address:{},innerTransaction:{instructions:[new D.Sl({programId:t.programId,keys:a,data:o})],signers:[],lookupTableAddress:[t.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[4===r?g.ammV4RemoveLiquidity:g.ammV5RemoveLiquidity]}}}return il.throwArgumentError("invalid version","poolKeys.version",r)}static async makeRemoveLiquidityInstructionSimple(e){let{connection:t,poolKeys:n,userKeys:i,amountIn:r,config:o,makeTxVersion:a,lookupTableCache:s,computeBudgetConfig:c}=e,{baseMint:u,quoteMint:l,lpMint:m}=n,{tokenAccounts:d,owner:p,payer:S=p}=i;il.debug("amountIn:",r),il.assertArgument(!r.isZero(),"amount must greater than zero","amountIn",r.toFixed()),il.assertArgument(r instanceof e_&&r.token.mint.equals(m),"amountIn's token not match lpMint","amountIn",r);let g=this._selectTokenAccount({programId:P.H_,tokenAccounts:d,mint:m,owner:p,config:{associatedOnly:!1}});if(!g)return il.throwArgumentError("cannot found lpTokenAccount","tokenAccounts",d);let w=this._selectTokenAccount({programId:P.H_,tokenAccounts:d,mint:u,owner:p}),A=this._selectTokenAccount({programId:P.H_,tokenAccounts:d,mint:l,owner:p}),{bypassAssociatedCheck:f,checkCreateATAOwner:y}={bypassAssociatedCheck:!1,checkCreateATAOwner:!1,...o},k=[],b=[],T=[],I=[],h=await this._handleTokenAccount({programId:P.H_,connection:t,side:"out",amount:0,mint:u,tokenAccount:w,owner:p,payer:S,frontInstructions:k,endInstructions:b,signers:I,bypassAssociatedCheck:f,frontInstructionsType:T,checkCreateATAOwner:y}),C=await this._handleTokenAccount({programId:P.H_,connection:t,side:"out",amount:0,mint:l,tokenAccount:A,owner:p,payer:S,frontInstructions:k,endInstructions:b,signers:I,bypassAssociatedCheck:f,frontInstructionsType:T,checkCreateATAOwner:y}),L=this.makeRemoveLiquidityInstruction({poolKeys:n,userKeys:{lpTokenAccount:g,baseTokenAccount:h,quoteTokenAccount:C,owner:p},amountIn:r.raw});return{address:{lpTokenAccount:g},innerTransactions:await eo({connection:t,makeTxVersion:a,computeBudgetConfig:c,payer:S,innerTransaction:[{instructionTypes:T,instructions:k,signers:I},L.innerTransaction,{instructionTypes:[],instructions:b,signers:[]}],lookupTableCache:s})}}static makeSwapInstruction(e){let{poolKeys:t,userKeys:n,amountIn:i,amountOut:r,fixedSide:o}=e,{version:a}=t;return 4===a||5===a?"in"===o?this.makeSwapFixedInInstruction({poolKeys:t,userKeys:n,amountIn:i,minAmountOut:r},a):"out"===o?this.makeSwapFixedOutInstruction({poolKeys:t,userKeys:n,maxAmountIn:i,amountOut:r},a):il.throwArgumentError("invalid params","params",e):il.throwArgumentError("invalid version","poolKeys.version",a)}static makeSwapFixedInInstruction({poolKeys:e,userKeys:t,amountIn:n,minAmountOut:i},r){let o=ti([e4("instruction"),e2("amountIn"),e2("minAmountOut")]),a=iu.alloc(o.span);o.encode({instruction:9,amountIn:eS(n),minAmountOut:eS(i)},a);let s=[z(P.H_,!1),Z(e.id,!1),z(e.authority,!1),Z(e.openOrders,!1)];return 4===r&&s.push(Z(e.targetOrders,!1)),s.push(Z(e.baseVault,!1),Z(e.quoteVault,!1)),5===r&&s.push(Z(it,!1)),s.push(z(e.marketProgramId,!1),Z(e.marketId,!1),Z(e.marketBids,!1),Z(e.marketAsks,!1),Z(e.marketEventQueue,!1),Z(e.marketBaseVault,!1),Z(e.marketQuoteVault,!1),z(e.marketAuthority,!1),Z(t.tokenAccountIn,!1),Z(t.tokenAccountOut,!1),z(t.owner,!0)),{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:s,data:a})],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[4===r?g.ammV4SwapBaseIn:g.ammV5SwapBaseIn]}}}static makeSwapFixedOutInstruction({poolKeys:e,userKeys:t,maxAmountIn:n,amountOut:i},r){let o=ti([e4("instruction"),e2("maxAmountIn"),e2("amountOut")]),a=iu.alloc(o.span);o.encode({instruction:11,maxAmountIn:eS(n),amountOut:eS(i)},a);let s=[z(P.H_,!1),Z(e.id,!1),z(e.authority,!1),Z(e.openOrders,!1),Z(e.targetOrders,!1),Z(e.baseVault,!1),Z(e.quoteVault,!1)];return 5===r&&s.push(Z(it,!1)),s.push(z(e.marketProgramId,!1),Z(e.marketId,!1),Z(e.marketBids,!1),Z(e.marketAsks,!1),Z(e.marketEventQueue,!1),Z(e.marketBaseVault,!1),Z(e.marketQuoteVault,!1),z(e.marketAuthority,!1),Z(t.tokenAccountIn,!1),Z(t.tokenAccountOut,!1),z(t.owner,!0)),{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:s,data:a})],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[4===r?g.ammV4SwapBaseOut:g.ammV5SwapBaseOut]}}}static async makeSwapInstructionSimple(e){let{connection:t,poolKeys:n,userKeys:i,amountIn:r,amountOut:o,fixedSide:a,config:s,makeTxVersion:c,lookupTableCache:u,computeBudgetConfig:l}=e,{tokenAccounts:m,owner:d,payer:p=d}=i;il.debug("amountIn:",r),il.debug("amountOut:",o),il.assertArgument(!r.isZero()&&!o.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:r.toFixed(),amountOut:o.toFixed()});let{bypassAssociatedCheck:S,checkCreateATAOwner:g}={bypassAssociatedCheck:!1,checkCreateATAOwner:!1,...s},w=r instanceof e_?r.token:eb.WSOL,A=o instanceof e_?o.token:eb.WSOL,f=this._selectTokenAccount({programId:P.H_,tokenAccounts:m,mint:w.mint,owner:d,config:{associatedOnly:!1}}),y=this._selectTokenAccount({programId:P.H_,tokenAccounts:m,mint:A.mint,owner:d}),[k,b]=[r.raw,o.raw],T=[],I=[],h=[],C=[],L=await this._handleTokenAccount({programId:P.H_,connection:t,side:"in",amount:k,mint:w.mint,tokenAccount:f,owner:d,payer:p,frontInstructions:T,endInstructions:I,signers:C,bypassAssociatedCheck:S,frontInstructionsType:h,checkCreateATAOwner:g}),D=await this._handleTokenAccount({programId:P.H_,connection:t,side:"out",amount:0,mint:A.mint,tokenAccount:y,owner:d,payer:p,frontInstructions:T,endInstructions:I,signers:C,bypassAssociatedCheck:S,frontInstructionsType:h,checkCreateATAOwner:g}),v=this.makeSwapInstruction({poolKeys:n,userKeys:{tokenAccountIn:L,tokenAccountOut:D,owner:d},amountIn:k,amountOut:b,fixedSide:a});return{address:{},innerTransactions:await eo({connection:t,makeTxVersion:c,computeBudgetConfig:l,payer:p,innerTransaction:[{instructionTypes:h,instructions:T,signers:C},v.innerTransaction,{instructionTypes:[],instructions:I,signers:[]}],lookupTableCache:u})}}static makeSimulatePoolInfoInstruction({poolKeys:e}){let t=ti([e4("instruction"),e4("simulateType")]),n=iu.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let i=[z(e.id,!1),z(e.authority,!1),z(e.openOrders,!1),z(e.baseVault,!1),z(e.quoteVault,!1),z(e.lpMint,!1),z(e.marketId,!1),z(e.marketEventQueue,!1)];return{address:{},innerTransaction:{instructions:[new D.Sl({programId:e.programId,keys:i,data:n})],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(D.nh.default)),instructionTypes:[4===e.version?g.ammV4SimulatePoolInfo:g.ammV5SimulatePoolInfo]}}}static isV4(e){return void 0!==e.withdrawQueue}static async makeCreatePoolV4InstructionV2Simple({connection:e,programId:t,marketInfo:n,baseMintInfo:i,quoteMintInfo:r,baseAmount:o,quoteAmount:a,startTime:s,ownerInfo:c,associatedOnly:u=!1,computeBudgetConfig:l,checkCreateATAOwner:m=!1,makeTxVersion:d,lookupTableCache:p,feeDestinationId:S}){let g=[],w=[],f=[],y=[],k=[],b=c.useSOLBalance&&i.mint.equals(eb.WSOL.mint),T=c.useSOLBalance&&r.mint.equals(eb.WSOL.mint),I=await this._selectOrCreateTokenAccount({programId:P.H_,mint:i.mint,tokenAccounts:b?[]:c.tokenAccounts,owner:c.wallet,createInfo:b?{connection:e,payer:c.feePayer,amount:o,frontInstructions:g,frontInstructionsType:f,endInstructions:b?w:[],endInstructionsType:b?y:[],signers:k}:void 0,associatedOnly:!b&&u,checkCreateATAOwner:m}),h=await this._selectOrCreateTokenAccount({programId:P.H_,mint:r.mint,tokenAccounts:T?[]:c.tokenAccounts,owner:c.wallet,createInfo:T?{connection:e,payer:c.feePayer,amount:a,frontInstructions:g,frontInstructionsType:f,endInstructions:T?w:[],endInstructionsType:T?y:[],signers:k}:void 0,associatedOnly:!T&&u,checkCreateATAOwner:m});if(void 0===I||void 0===h)throw Error("you don't has some token account");let C=A.getAssociatedPoolKeys({version:4,marketVersion:3,marketId:n.marketId,baseMint:i.mint,quoteMint:r.mint,baseDecimals:i.decimals,quoteDecimals:r.decimals,programId:t,marketProgramId:n.programId}),L=this.makeCreatePoolV4InstructionV2({programId:t,ammId:C.id,ammAuthority:C.authority,ammOpenOrders:C.openOrders,lpMint:C.lpMint,coinMint:C.baseMint,pcMint:C.quoteMint,coinVault:C.baseVault,pcVault:C.quoteVault,ammTargetOrders:C.targetOrders,marketProgramId:C.marketProgramId,marketId:C.marketId,userWallet:c.wallet,userCoinVault:I,userPcVault:h,userLpVault:td(c.wallet,C.lpMint,P.H_).publicKey,ammConfigId:C.configId,feeDestinationId:S,nonce:C.nonce,openTime:s,coinAmount:o,pcAmount:a}).innerTransaction;return{address:{programId:t,ammId:C.id,ammAuthority:C.authority,ammOpenOrders:C.openOrders,lpMint:C.lpMint,coinMint:C.baseMint,pcMint:C.quoteMint,coinVault:C.baseVault,pcVault:C.quoteVault,withdrawQueue:C.withdrawQueue,ammTargetOrders:C.targetOrders,poolTempLp:C.lpVault,marketProgramId:C.marketProgramId,marketId:C.marketId},innerTransactions:await eo({connection:e,makeTxVersion:d,computeBudgetConfig:l,payer:c.feePayer,innerTransaction:[{instructionTypes:f,instructions:g,signers:k},L,{instructionTypes:y,instructions:w,signers:[]}],lookupTableCache:p})}}static makeCreatePoolV4InstructionV2({programId:e,ammId:t,ammAuthority:n,ammOpenOrders:i,lpMint:r,coinMint:o,pcMint:a,coinVault:s,pcVault:c,ammTargetOrders:u,marketProgramId:l,marketId:m,userWallet:d,userCoinVault:p,userPcVault:S,userLpVault:w,nonce:A,openTime:f,coinAmount:y,pcAmount:k,lookupTableAddress:b,ammConfigId:T,feeDestinationId:I}){let h=ti([e4("instruction"),e4("nonce"),e2("openTime"),e2("pcAmount"),e2("coinAmount")]),C=[{pubkey:P.H_,isSigner:!1,isWritable:!1},{pubkey:P._u,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:T,isSigner:!1,isWritable:!1},{pubkey:I,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0}],L=iu.alloc(h.span);h.encode({instruction:1,nonce:A,openTime:f,coinAmount:y,pcAmount:k},L);let v=new D.Sl({keys:C,programId:e,data:L});return{address:{},innerTransaction:{instructions:[v],signers:[],lookupTableAddress:b?[b]:void 0,instructionTypes:[g.ammV4CreatePoolV2]}}}static async makeRemoveAllLpAndCreateClmmPosition({connection:e,poolKeys:t,removeLpAmount:n,userKeys:i,clmmPoolKeys:r,createPositionInfo:o,farmInfo:a,computeBudgetConfig:s,checkCreateATAOwner:c=!1,getEphemeralSigners:u,makeTxVersion:l,lookupTableCache:m}){if(!(t.baseMint.equals(r.mintA.mint)||t.baseMint.equals(r.mintB.mint))||!(t.quoteMint.equals(r.mintA.mint)||t.quoteMint.equals(r.mintB.mint)))throw Error("mint check error");let d=[],p=[],S=[],g=[],w=[],A={};for(let e of i.tokenAccounts)(void 0===A[e.accountInfo.mint.toString()]||td(i.owner,e.accountInfo.mint,P.H_).publicKey.equals(e.pubkey))&&(A[e.accountInfo.mint.toString()]=e.pubkey);let f=A[t.lpMint.toString()];if(void 0===f)throw Error("find lp account error in trade accounts");let y=n.add(a?.amount??new(U())(0)),k=t.baseMint.equals(eb.WSOL.mint),b=t.quoteMint.equals(eb.WSOL.mint),T=await this._selectOrCreateTokenAccount({programId:P.H_,mint:t.baseMint,tokenAccounts:i.tokenAccounts,owner:i.owner,createInfo:{connection:e,payer:i.payer??i.owner,frontInstructions:d,frontInstructionsType:S,endInstructions:k?p:[],endInstructionsType:k?g:[],signers:w},associatedOnly:!0,checkCreateATAOwner:c}),I=await this._selectOrCreateTokenAccount({programId:P.H_,mint:t.quoteMint,tokenAccounts:i.tokenAccounts,owner:i.owner,createInfo:{connection:e,payer:i.payer??i.owner,amount:0,frontInstructions:d,frontInstructionsType:S,endInstructions:b?p:[],endInstructionsType:b?g:[],signers:w},associatedOnly:!0,checkCreateATAOwner:c});A[t.baseMint.toString()]=T,A[t.quoteMint.toString()]=I;let h=this.makeRemoveLiquidityInstruction({poolKeys:t,userKeys:{lpTokenAccount:f,baseTokenAccount:T,quoteTokenAccount:I,owner:i.owner},amountIn:y}),[C,L]=t.baseMint.equals(r.mintA.mint)?[T,I]:[I,T],D=await n0.makeOpenPositionFromLiquidityInstructions({poolInfo:r,ownerInfo:{feePayer:i.payer??i.owner,wallet:i.owner,tokenAccountA:C,tokenAccountB:L},withMetadata:"create",...o,direction:0,getEphemeralSigners:u}),v={instructions:[],signers:[],instructionTypes:[]};if(void 0!==a){let t=[];for(let n of a.poolKeys.rewardInfos){let r=n.rewardMint.equals(eb.WSOL.mint);t.push(A[n.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:P.H_,mint:n.rewardMint,tokenAccounts:i.tokenAccounts,owner:i.owner,createInfo:{connection:e,payer:i.payer??i.owner,frontInstructions:d,frontInstructionsType:S,endInstructions:r?p:[],endInstructionsType:r?g:[],signers:w},associatedOnly:!0,checkCreateATAOwner:c}))}v=t4.makeWithdrawInstruction({poolKeys:a.poolKeys,amount:a.amount,userKeys:{ledger:t4.getAssociatedLedgerAccount({programId:a.poolKeys.programId,poolId:a.poolKeys.id,owner:i.owner,version:a.poolKeys.version}),lpTokenAccount:f,rewardTokenAccounts:t,owner:i.owner}}).innerTransaction}return{address:{...h.address,...D.address},innerTransactions:await eo({connection:e,makeTxVersion:l,computeBudgetConfig:s,payer:i.payer??i.owner,innerTransaction:[{instructionTypes:S,instructions:d,signers:w},v,h.innerTransaction,D.innerTransaction,{instructionTypes:g,instructions:p,signers:[]}],lookupTableCache:m})}}static async fetchAllPoolKeys(e,t,n){let i=(await Promise.all(Object.entries(t3).map(([n,i])=>{try{return e.getProgramAccounts(t[Number(n)],{filters:[{dataSize:i.span}]}).then(e=>e.map(e=>({id:e.pubkey,version:Number(n),programId:t[Number(n)],...i.decode(e.account.data)})))}catch(e){if(e instanceof Error)return il.throwError("failed to fetch pool info",M.errors.RPC_ERROR,{message:e.message})}}))).flat(),r=i.map(e=>e.marketId),o={};try{let t=await $(e,r,n);for(let e of t){if(null===e)continue;let t={programId:e.owner,...n3.decode(e.data)};o[t.ownAddress.toString()]=t}}catch(e){if(e instanceof Error)return il.throwError("failed to fetch markets",M.errors.RPC_ERROR,{message:e.message})}let a={};for(let[e,n]of Object.entries(t))a[e]=this.getAssociatedAuthority({programId:n}).publicKey;let s=[];for(let e of i){if(void 0===e||e.baseMint.equals(D.nh.default))continue;let t=o[e.marketId.toString()],n=t.programId;s.push({id:e.id,baseMint:e.baseMint,quoteMint:e.quoteMint,lpMint:e.lpMint,baseDecimals:e.baseDecimal.toNumber(),quoteDecimals:e.quoteDecimal.toNumber(),lpDecimals:"6kmMMacvoCKBkBrqssLEdFuEZu2wqtLdNQxh9VjtzfwT"===e.id.toString()?5:e.baseDecimal.toNumber(),version:e.version,programId:e.programId,authority:a[e.version],openOrders:e.openOrders,targetOrders:e.targetOrders,baseVault:e.baseVault,quoteVault:e.quoteVault,marketVersion:3,marketProgramId:n,marketId:t.ownAddress,marketAuthority:ie.getAssociatedAuthority({programId:n,marketId:t.ownAddress}).publicKey,marketBaseVault:t.baseVault,marketQuoteVault:t.quoteVault,marketBids:t.bids,marketAsks:t.asks,marketEventQueue:t.eventQueue,...5===e.version?{modelDataAccount:e.modelDataAccount,withdrawQueue:D.nh.default,lpVault:D.nh.default}:{withdrawQueue:e.withdrawQueue,lpVault:e.lpVault},lookupTableAccount:D.nh.default})}return s}static async fetchInfo({connection:e,poolKeys:t}){let n=await this.fetchMultipleInfo({connection:e,pools:[t]});return il.assertArgument(1===n.length,`fetchInfo failed, ${n.length} pools found`,"poolKeys.id",t.id),n[0]}static async fetchMultipleInfo({connection:e,pools:t,config:n}){await id(e);let i=t.map(e=>this.makeSimulatePoolInfoInstruction({poolKeys:e})),r=await en(e,i.map(e=>e.innerTransaction.instructions).flat(),"GetPoolData"),o=r.map(e=>{let t=function(e,t){let n=e.match(/{["\w:,]+}/g);return n&&1===n.length?n[0]:J.throwArgumentError("simulate log fail to match json","keyword",t)}(e,"GetPoolData"),n=new(U())(ei(t,"status")),i=Number(ei(t,"coin_decimals")),r=Number(ei(t,"pc_decimals")),o=Number(ei(t,"lp_decimals")),a=new(U())(ei(t,"pool_coin_amount")),s=new(U())(ei(t,"pool_pc_amount")),c=new(U())(ei(t,"pool_lp_supply")),u="0";try{u=ei(t,"pool_open_time")}catch(e){}return{status:n,baseDecimals:i,quoteDecimals:r,lpDecimals:o,baseReserve:a,quoteReserve:s,lpSupply:c,startTime:new(U())(u)}});return o}static getEnabledFeatures(e){let{status:t}=e,n=t.toNumber();if(n===f.Uninitialized)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};if(n===f.Initialized)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n===f.Disabled)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};{if(n===f.RemoveLiquidityOnly)return{swap:!1,addLiquidity:!1,removeLiquidity:!0};if(n===f.LiquidityOnly||n===f.OrderBook)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};if(n===f.Swap)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n!==f.WaitingForStart)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};let{startTime:t}=e;return Date.now()/1e3<t.toNumber()?{swap:!1,addLiquidity:!0,removeLiquidity:!0}:{swap:!0,addLiquidity:!0,removeLiquidity:!0}}}static includesToken(e,t){let{baseMint:n,quoteMint:i}=t;return e.mint.equals(n)||e.mint.equals(i)}static _getTokenSide(e,t){let{baseMint:n,quoteMint:i}=t;return e.mint.equals(n)?"base":e.mint.equals(i)?"quote":il.throwArgumentError("token not match with pool","params",{token:e.mint,baseMint:n,quoteMint:i})}static _getTokensSide(e,t,n){let{baseMint:i,quoteMint:r}=n,o=this._getTokenSide(e,n),a=this._getTokenSide(t,n);return il.assertArgument(o!==a,"tokens not match with pool","params",{tokenA:e.mint,tokenB:t.mint,baseMint:i,quoteMint:r}),[o,a]}static _getAmountSide(e,t){let n=e instanceof e_?e.token:eb.WSOL;return this._getTokenSide(n,t)}static _getAmountsSide(e,t,n){let i=e instanceof e_?e.token:eb.WSOL,r=t instanceof e_?t.token:eb.WSOL;return this._getTokensSide(i,r,n)}static computeAnotherAmount({poolKeys:e,poolInfo:t,amount:n,anotherCurrency:i,slippage:r}){let{baseReserve:o,quoteReserve:a}=t;il.debug("baseReserve:",o.toString()),il.debug("quoteReserve:",a.toString());let s=n instanceof e_?n.token:n.currency;il.debug("currencyIn:",s),il.debug("amount:",n.toFixed()),il.debug("anotherCurrency:",i),il.debug("slippage:",`${r.toSignificant()}%`);let c=this._getAmountSide(n,e);il.debug("input side:",c);let u=eu;n.isZero()||(u="base"===c?eg(n.raw.mul(a),o):eg(n.raw.mul(o),a));let l=eg(n.raw.mul(t.lpSupply),"base"===c?t.baseReserve:t.quoteReserve),m=new eM(el).add(r),d=m.mul(u).quotient,p=i instanceof eb?new e_(i,u):new eE(i,u),S=i instanceof eb?new e_(i,d):new eE(i,d);return il.debug("anotheAmount:",p.toFixed()),il.debug("maxAnotheAmount:",S.toFixed()),{anotherAmount:p,maxAnotherAmount:S,liquidity:l}}static _computePriceImpact(e,t,n){let i=e.raw.mul(t),r=i.sub(n).div(i);return new eM(r.numerator,r.denominator)}static getRate(e){let{baseReserve:t,quoteReserve:n,baseDecimals:i,quoteDecimals:r}=e,o=new eW(new ek(i),t,new ek(r),n);return o}static computeAmountIn({poolKeys:e,poolInfo:t,amountOut:n,currencyIn:i,slippage:r}){let{baseReserve:o,quoteReserve:a}=t;il.debug("baseReserve:",o.toString()),il.debug("quoteReserve:",a.toString());let s=n instanceof e_?n.token:n.currency;il.debug("currencyOut:",s),il.debug("amountOut:",n.toFixed()),il.debug("currencyIn:",i),il.debug("slippage:",`${r.toSignificant()}%`);let c=[o,a],u=this._getAmountSide(n,e);"base"===u&&c.reverse(),il.debug("output side:",u);let[l,m]=c,d=new eW(i,l,s,m);il.debug("currentPrice:",`1 ${i.symbol} ≈ ${d.toFixed()} ${s.symbol}`),il.debug("currentPrice invert:",`1 ${s.symbol} ≈ ${d.invert().toFixed()} ${i.symbol}`);let p=eu,S=n.raw;if(!S.isZero()){S.gt(m)&&(S=m.sub(el));let e=m.sub(S),t=l.mul(S).div(e);p=t.mul(iS).div(iS.sub(ip))}let g=new eM(el).add(r),w=g.mul(p).quotient,A=i instanceof eb?new e_(i,p):new eE(i,p),f=i instanceof eb?new e_(i,w):new eE(i,w);il.debug("amountIn:",A.toFixed()),il.debug("maxAmountIn:",f.toFixed());let y=null;p.isZero()||S.isZero()||(y=new eW(i,p,s,S),il.debug("executionPrice:",`1 ${i.symbol} ≈ ${y.toFixed()} ${s.symbol}`),il.debug("executionPrice invert:",`1 ${s.symbol} ≈ ${y.invert().toFixed()} ${i.symbol}`));let k=this._computePriceImpact(d,p,S);return il.debug("priceImpact:",`${k.toSignificant()}%`),{amountIn:A,maxAmountIn:f,currentPrice:d,executionPrice:y,priceImpact:k}}}A=ig,ig.computeAmountOut=({poolKeys:e,poolInfo:t,amountIn:n,currencyOut:i,slippage:r})=>{let o;let a=n instanceof e_?n.token:eb.WSOL,s=i instanceof eb?i:eb.WSOL;il.assertArgument(A.includesToken(a,e)&&A.includesToken(s,e),"token not match with pool","poolKeys",{poolKeys:e,tokenIn:a,tokenOut:s});let{baseReserve:c,quoteReserve:u}=t;il.debug("baseReserve:",c.toString()),il.debug("quoteReserve:",u.toString());let l=n instanceof e_?n.token:n.currency;il.debug("currencyIn:",l),il.debug("amountIn:",n.toFixed()),il.debug("currencyOut:",i),il.debug("slippage:",`${r.toSignificant()}%`);let m=[c,u],d=A._getAmountSide(n,e);"quote"===d&&m.reverse(),il.debug("input side:",d);let[p,S]=m;if(4===e.version)o=new eW(l,p,i,S);else{let e=function(e,t,n,i){let r=function(e,t){let n=ic(e,t,0,!1);return n[3]?n[0]:0}(e,ia(e,t,io(e,t,n)))/e.multiplier;return i?r:1/r}(im,c.toNumber(),u.toNumber(),!1);o="quote"===d?new eW(l,new(U())(1e6*e),i,new(U())(1e6)):new eW(l,new(U())(1e6),i,new(U())(1e6*e))}il.debug("currentPrice:",`1 ${l.symbol} ≈ ${o.toFixed()} ${i.symbol}`),il.debug("currentPrice invert:",`1 ${i.symbol} ≈ ${o.invert().toFixed()} ${l.symbol}`);let g=n.raw,w=eu,f=eu;if(!g.isZero()){if(4===e.version){f=th(g.mul(ip),iS);let e=g.sub(f),t=p.add(e);w=S.mul(e).div(t)}else{f=g.mul(new(U())(2)).div(new(U())(1e4));let e=g.sub(f);w=new(U())("quote"===d?function(e,t,n,i){let r=io(e,t,n),o=ia(e,t,r),a=ia(e,n,r),s=ia(e,i,r),[c,u,l,m]=ic(e,o,s,!0);if(!m)return 0;if(l){let t=i*e.multiplier/c;return t}{let t=is(e,a-u,r);return t}}(im,u.toNumber(),c.toNumber(),e.toNumber()):function(e,t,n,i){let r=io(e,t,n),o=ia(e,t,r),a=ia(e,n,r),s=ia(e,i,r),[c,u,l,m]=function(e,t,n,i){let r=i?t-n:t+n,[o,a,s]=function(e,t){let[n,i]=[0,49998],r=n,o=i,a=0;for(;r<=o&&!((a=Math.floor((o+r)/2))<=0)&&!(a>=49998);){let n=e.DataElement[a].y,i=e.DataElement[a-1].y,s=e.DataElement[a+1].y;if(t===n)return[a,a,!0];if(t===i)return[a-1,a-1,!0];if(t===s)return[a+1,a+1,!0];if(t<s)r=a+1;else{if(t<i&&t>n)return[a-1,a,!0];if(t<n&&t>s)return[a,a+1,!0];o=a-1}}return[a,a,!1]}(e,r);if(!s)return[0,0,!1,s];if(o===a)return[e.DataElement[a].price,e.DataElement[a].x,!1,s];{let n=e.DataElement[o].x,c=e.DataElement[a].x,u=e.DataElement[o].price,l=e.DataElement[a].price,m=e.DataElement[o].y,d=e.DataElement[a].y;if(t>=d&&t<=m)return i?[l,c,!0,s]:[u,n,!0,s];{let o,a;return i?(o=u+(l-u)*(m-t)/(m-d),a=n+l*(m-r)/e.multiplier):(o=u+(l-u)*(m-t)/(m-d),a=c-u*(r-d)/e.multiplier),[o,a,!1,s]}}}(e,a,s,!1);if(!m)return 0;if(l){let t=i*c/e.multiplier;return t}{let t=is(e,o-u,r);return t}}(im,u.toNumber(),c.toNumber(),e.toNumber()))}}let y=new eM(el).add(r),k=y.invert().mul(w).quotient,b=i instanceof eb?new e_(i,w):new eE(i,w),T=i instanceof eb?new e_(i,k):new eE(i,k);il.debug("amountOut:",b.toFixed()),il.debug("minAmountOut:",T.toFixed());let I=new eW(l,g.sub(f),i,w);g.isZero()||w.isZero()||(I=new eW(l,g.sub(f),i,w),il.debug("executionPrice:",`1 ${l.symbol} ≈ ${I.toFixed()} ${i.symbol}`),il.debug("executionPrice invert:",`1 ${i.symbol} ≈ ${I.invert().toFixed()} ${l.symbol}`));let h=I.denominator.mul(o.numerator),C=I.numerator.mul(o.denominator).sub(h).abs(),P=new eM(C,h);il.debug("priceImpact:",`${P.toSignificant()}%`);let L=l instanceof eb?new e_(l,f):new eE(l,f);return{amountOut:b,minAmountOut:T,currentPrice:o,executionPrice:I,priceImpact:P,fee:L}},new D.nh("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),new D.nh("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),new D.nh("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),new D.nh("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),new D.nh("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),new D.nh("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),new D.nh("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),new D.nh("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),new D.nh("GHpwXWcfwLUDhzaSK6Tgn2FrsEfE8azL4VSuG3sqFNgD"),new D.nh("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),D.nh.default,new D.nh("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),D.nh.default,new D.nh("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),new D.nh("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),new D.nh("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),new D.nh("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),new D.nh("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),new D.nh("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),new D.nh("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),n(37407).Buffer,n(37407).Buffer,ti([ej(5),function(e="accountFlags"){let t=new e0(e);return t.addBoolean("initialized"),t.addBoolean("market"),t.addBoolean("openOrders"),t.addBoolean("requestQueue"),t.addBoolean("eventQueue"),t.addBoolean("bids"),t.addBoolean("asks"),t}("accountFlags"),e9("ownAddress"),e2("vaultSignerNonce"),e9("baseMint"),e9("quoteMint"),e9("baseVault"),e2("baseDepositsTotal"),e2("baseFeesAccrued"),e9("quoteVault"),e2("quoteDepositsTotal"),e2("quoteFeesAccrued"),e2("quoteDustThreshold"),e9("requestQueue"),e9("eventQueue"),e9("bids"),e9("asks"),e2("baseLotSize"),e2("quoteLotSize"),e2("feeRateBps"),e2("referrerRebatesAccrued"),ej(7)]);var iw=n(37407).Buffer;class iA extends tw{static getPdaPoolId(e,t){return G([this.SEED_CONFIG.pool.id,t.toBuffer()],e)}static getPdaOwnerId(e,t,n,i){return G([this.SEED_CONFIG.owner.id,t.toBuffer(),n.toBuffer(),iw.from(new(U())(i).toArray())],e)}static async getAllInfo({connection:e,programId:t,poolIds:n,wallet:i,chainTime:r}){if(0===n.length)return[];let o=n.map(e=>this.getPdaPoolId(t,e).publicKey),a=[];for(let e=0;e<this.VERSION_PROJECT.length;e++)a.push(...o.map(n=>this.getPdaOwnerId(t,n,i,e).publicKey));let s=await $(e,[...o,...a]),c=[];for(let e=0;e<s.length;e++){let i=Math.floor(e/n.length),u=e%n.length,l=o[u],m=a[e],d=s[u],p=s[n.length+e];if(!(d&&p)||d.data.length!==this.POOL_LAYOUT.span||p.data.length!==this.OWNER_LAYOUT.span)continue;let S=this.POOL_LAYOUT.decode(d.data),g=this.OWNER_LAYOUT.decode(p.data),w=S.openTime.toNumber(),A=S.endTime.toNumber(),f=3!==g.tokenInfo.map(e=>e.debtAmount.gt(new(U())(0))).filter(e=>!e).length,y=r>w&&r<A&&1===S.status,k=f&&y;c.push({programId:t,poolId:l,ammId:S.ammId,ownerAccountId:m,snapshotLpAmount:g.lpAmount,project:this.VERSION_PROJECT[i],openTime:w,endTime:A,canClaim:k,canClaimErrorType:f?y?void 0:"outOfOperationalTime":"alreadyClaimIt",tokenInfo:S.tokenInfo.map((e,t)=>({programId:P.H_,mintAddress:e.mintAddress,mintVault:e.mintVault,mintDecimals:e.mintDecimals,perLpLoss:e.perLpLoss,debtAmount:g.tokenInfo[t].debtAmount.add(g.tokenInfo[t].claimedAmount)}))})}return c}static async makeClaimInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,makeTxVersion:i,lookupTableCache:r}){let o=[],a=[],s=[],c=[],u=[],l=[],m=[],d=[];for(let i of t.tokenInfo)d.push(await this._selectOrCreateTokenAccount({programId:i.programId,mint:i.mintAddress,tokenAccounts:i.mintAddress.equals(eb.WSOL.mint)?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:i.mintAddress.equals(eb.WSOL.mint)?s:[],frontInstructionsType:a,endInstructionsType:c,signers:m},associatedOnly:!i.mintAddress.equals(eb.WSOL.mint)&&n.associatedOnly,checkCreateATAOwner:n.checkCreateATAOwner}));return u.push(this.makeClaimInstruction({programId:t.programId,poolInfo:t,ownerInfo:{wallet:n.wallet,ownerPda:t.ownerAccountId,claimAddress:d}})),l.push(g.util1216OwnerClaim),{address:{},innerTransactions:await eo({connection:e,makeTxVersion:i,computeBudgetConfig:void 0,payer:n.wallet,innerTransaction:[{instructionTypes:a,instructions:o,signers:m},{instructionTypes:l,instructions:u,signers:[]},{instructionTypes:c,instructions:s,signers:[]}],lookupTableCache:r})}}static async makeClaimAllInstructionSimple({connection:e,poolInfos:t,ownerInfo:n,makeTxVersion:i,lookupTableCache:r}){let o=[],a=[],s=[],c=[],u=[],l=[],m=[],d={};for(let i of t){let t=[];for(let r of i.tokenInfo){let i=d[r.mintAddress.toString()]??await this._selectOrCreateTokenAccount({programId:r.programId,mint:r.mintAddress,tokenAccounts:r.mintAddress.equals(eb.WSOL.mint)?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:r.mintAddress.equals(eb.WSOL.mint)?s:[],frontInstructionsType:a,endInstructionsType:c,signers:m},associatedOnly:!r.mintAddress.equals(eb.WSOL.mint)&&n.associatedOnly,checkCreateATAOwner:n.checkCreateATAOwner});d[r.mintAddress.toString()]=i,t.push(i)}u.push(this.makeClaimInstruction({programId:i.programId,poolInfo:i,ownerInfo:{wallet:n.wallet,ownerPda:i.ownerAccountId,claimAddress:t}})),l.push(g.util1216OwnerClaim)}return{address:{},innerTransactions:await eo({connection:e,makeTxVersion:i,computeBudgetConfig:void 0,payer:n.wallet,innerTransaction:[{instructionTypes:a,instructions:o,signers:m},{instructionTypes:l,instructions:u,signers:[]},{instructionTypes:c,instructions:s,signers:[]}],lookupTableCache:r})}}static makeClaimInstruction({programId:e,poolInfo:t,ownerInfo:n}){let i=ti([]),r=[{pubkey:n.wallet,isSigner:!0,isWritable:!0},{pubkey:t.poolId,isSigner:!1,isWritable:!0},{pubkey:n.ownerPda,isSigner:!1,isWritable:!0},...n.claimAddress.map(e=>({pubkey:e,isSigner:!1,isWritable:!0})),...t.tokenInfo.map(({mintVault:e})=>({pubkey:e,isSigner:!1,isWritable:!0})),{pubkey:P.H_,isSigner:!1,isWritable:!1}],o=iw.alloc(i.span);i.encode({},o);let a=iw.from([10,66,208,184,161,6,191,98,...o]);return new D.Sl({keys:r,programId:e,data:a})}}iA.CLAIMED_NUM=3,iA.POOL_LAYOUT=ti([ej(8),e4("bump"),e4("status"),e2("openTime"),e2("endTime"),e9("ammId"),tr(ti([e4("mintDecimals"),e9("mintAddress"),e9("mintVault"),e2("perLpLoss"),e2("totalClaimedAmount")]),iA.CLAIMED_NUM,"tokenInfo"),tr(e2(),10,"padding")]),iA.OWNER_LAYOUT=ti([ej(8),e4("bump"),e4("version"),e9("poolId"),e9("owner"),e2("lpAmount"),tr(ti([e9("mintAddress"),e2("debtAmount"),e2("claimedAmount")]),iA.CLAIMED_NUM,"tokenInfo"),tr(e2(),4,"padding")]),iA.DEFAULT_POOL_ID=["58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2","6UmmUiYoBjSrhakAobJw8BvkmJtDVxaeBtbt7rxWo1mg","AVs9TA4nWDzfPJE9gGVNJMVhcQy3V9PGazuz33BfG2RA","DVa7Qmb5ct9RCpaU7UTpSaf3GVMYz17vNVU67XpdCRut","7XawhbbxtsRcQA8KTkHT9f9nc6d69UwqCDh6U5EEbEmX","6a1CsrpeZubDjEJE9s1CMVheB6HWM5d7m1cj2jkhyXhj","EoNrn8iUhwgJySD1pHu8Qxm5gSQqLK3za4m8xzD2RuEb","AceAyRTWt4PyB2pHqf2qhDgNZDtKVNaxgL8Ru3V4aN1P","6tmFJbMk5yVHFcFy7X2K8RwHjKLr6KVFLYXpgpBNeAxB"].map(e=>new D.nh(e)),iA.SEED_CONFIG={pool:{id:iw.from("pool_seed","utf8")},owner:{id:iw.from("user_claim_seed","utf8")}},iA.VERSION_PROJECT=[void 0,"Francium","Tulip","Larix"];var iy=n(96662),ik=n(94355),ib=n(14200),iT=n(55469),iI=n(42186),ih=n(475),iC=n(61813),iP=n(94678);async function iL(){let e,{currentAmmPool:t=iP.ZP.getState().currentAmmPool,coin1:n=iP.ZP.getState().coin1,coin2:i=iP.ZP.getState().coin2,coin1Amount:r=iP.ZP.getState().coin1Amount,coin2Amount:o=iP.ZP.getState().coin2Amount,coin1SlippageAmount:a=iP.ZP.getState().coin1SlippageAmount,coin2SlippageAmount:s=iP.ZP.getState().coin2SlippageAmount,priceLower:c=iP.ZP.getState().priceLower,priceUpper:u=iP.ZP.getState().priceUpper,priceLowerTick:l=iP.ZP.getState().priceLowerTick,priceUpperTick:m=iP.ZP.getState().priceUpperTick,direction:d=iP.ZP.getState().direction,liquidity:p=iP.ZP.getState().liquidity,onSuccess:S}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=(0,T.n)(n,null==r?void 0:r.toString(),{alreadyDecimaled:!0}),w=(0,T.n)(i,null==o?void 0:o.toString(),{alreadyDecimaled:!0}),A=[n,i].some(e=>(0,ib.W)(e));if(A){let{hasConfirmed:r}=(0,iT.e)({amount:[(0,ib.W)(n)?g:void 0,(0,ib.W)(i)?w:void 0],groupInfo:t&&c&&u?{ammPool:t,priceLower:c,priceUpper:u}:void 0,caseName:"openPosition"});e=await r}else e=!0;if(!e){ik.Z.getState().logError("Canceled by User","The operation is canceled by user");return}return(0,y.ZP)(async e=>{var g,w;let{transactionCollector:A}=e,{innerTransactions:f,nftAddress:y}=await iD({currentAmmPool:t,coin1:n,coin2:i,coin1Amount:r,coin2Amount:o,coin1SlippageAmount:a,coin2SlippageAmount:s,liquidity:p,priceLower:c,priceUpper:u,priceLowerTick:l,priceUpperTick:m,direction:d});A.add(f,{onTxAllSuccess(){null==S||S({nftAddress:y})},txHistoryInfo:{title:"Deposited",description:"Added ".concat((0,h.B)(r)," ").concat(null!==(g=null==n?void 0:n.symbol)&&void 0!==g?g:"--"," and ").concat((0,h.B)(o)," ").concat(null!==(w=null==i?void 0:i.symbol)&&void 0!==w?w:"--")}})})}async function iD(){let{priceLower:e=iP.ZP.getState().priceLower,priceUpper:t=iP.ZP.getState().priceUpper,coin1:n=iP.ZP.getState().coin1,coin2:i=iP.ZP.getState().coin2,coin1Amount:r=iP.ZP.getState().coin1Amount,coin2Amount:o=iP.ZP.getState().coin2Amount,coin1SlippageAmount:a=iP.ZP.getState().coin1SlippageAmount,coin2SlippageAmount:s=iP.ZP.getState().coin2SlippageAmount,liquidity:c=iP.ZP.getState().liquidity,liquidityMin:u=iP.ZP.getState().liquidityMin,priceLowerTick:l=iP.ZP.getState().priceLowerTick,priceUpperTick:m=iP.ZP.getState().priceUpperTick,currentAmmPool:d=iP.ZP.getState().currentAmmPool,direction:p=iP.ZP.getState().direction}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iP.ZP.getState(),{tokenAccountRawInfos:S,txVersion:g}=k.Z.getState(),{connection:w}=iy.ZP.getState(),{owner:A}=k.Z.getState();(0,b.Z)(w,"no rpc connection"),(0,b.Z)(A,"wallet not connected"),(0,b.Z)(d,"not seleted amm pool"),(0,b.Z)(void 0!==m,"not set priceUpperTick"),(0,b.Z)(void 0!==l,"not set priceLowerTick"),(0,b.Z)(t,"not set priceUpper"),(0,b.Z)(e,"not set priceLower"),(0,b.Z)(n,"not set coin1"),(0,b.Z)(a,"not set coin1Amount"),(0,b.Z)(i,"not set coin2"),(0,b.Z)(s,"not set coin2Amount"),(0,b.Z)(c,"not set liquidity"),(0,b.Z)(u,"not set liquidity");let f=(0,iI.Dn)(n)||(0,iI.Dn)(i),T=d.state.mintA.mint.equals(n.mint),h=(0,I.Z)(r.toString(),n.decimals.toString(),"up"),C=(0,I.Z)(o.toString(),i.decimals.toString(),"up");console.log("coin1Amount",h.toString()),console.log("coin2Amount",C.toString()),console.log("coin1Amount",h.toString()),console.log("coin2Amount",C.toString());let{innerTransactions:P,address:L}=await n0.makeOpenPositionFromLiquidityInstructionSimple({connection:w,liquidity:u,poolInfo:d.state,ownerInfo:{feePayer:A,wallet:A,tokenAccounts:S,useSOLBalance:f},tickLower:Math.min(l,m),tickUpper:Math.max(l,m),amountMaxA:T?h:C,amountMaxB:T?C:h,computeBudgetConfig:await (0,ih.u)(),checkCreateATAOwner:!0,makeTxVersion:g,lookupTableCache:y.eq,direction:p,getEphemeralSigners:await (0,iC.u)()});return{innerTransactions:P,nftAddress:String(L.nftMint)}}},52784:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(67294),r=n(3363),o=n(4465),a=n(94678);function s(e){let t=(0,a.ZP)(e=>e.coin1),n=(0,a.ZP)(e=>e.coin2),s=(0,a.ZP)(e=>e.hydratedAmmPools),c=(0,a.ZP)(e=>e.currentAmmPool),u=(0,i.useCallback)(e=>{let t=void 0!==c&&1===e.filter(e=>(0,r.ZP)(e.state.id)===c.idString).length;return t},[c]);(0,i.useEffect)(()=>{if(!s.length||!t||!n){a.ZP.setState({selectableAmmPools:void 0,currentAmmPool:void 0});return}let i=s.filter(e=>(0,o.aT)(e.state.mintA.mint,t.mint)&&(0,o.aT)(e.state.mintB.mint,n.mint)||(0,o.aT)(e.state.mintA.mint,n.mint)&&(0,o.aT)(e.state.mintB.mint,t.mint)),r=u(i);a.ZP.setState(e||r?{selectableAmmPools:i}:{selectableAmmPools:i,currentAmmPool:i[0]})},[t,n,s,e])}},76961:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(97042),r=n(13550),o=n.n(r),a=n(67294),s=n(91371),c=n(3363),u=n(62952),l=n(4465),m=n(81451),d=n(51523),p=n(71375),S=n(72573),g=n(92867),w=n(79162),A=n(94678),f=n(14200);function y(){let e=(0,s.ZP)(e=>e.slippageTolerance),t=(0,A.ZP)(e=>e.coin1),n=(0,A.ZP)(e=>e.coin1Amount),r=(0,A.ZP)(e=>e.priceUpperTick),y=(0,A.ZP)(e=>e.coin2),b=(0,A.ZP)(e=>e.coin2Amount),T=(0,A.ZP)(e=>e.priceLowerTick),I=(0,A.ZP)(e=>e.userCursorSide),h=(0,A.ZP)(e=>e.isRemoveDialogOpen),C=(0,A.ZP)(e=>e.currentAmmPool),P=(0,A.ZP)(e=>e.targetUserPositionAccount),L=(0,A.ZP)(e=>e.isInput);(0,a.useMemo)(()=>h?0:e,[h,e]);let D=(0,a.useMemo)(()=>{if(C&&P){var e;return null===(e=C.positionAccount)||void 0===e?void 0:e.find(e=>(0,c.ZP)(e.nftMint)===(0,c.ZP)(P.nftMint))}},[C,P]),v=(0,a.useCallback)(async()=>{if(!C||!t||!y||null==r||null==T||h&&!1===L)return;let a="coin1"===I,s=(0,l.aT)(t.mint,C.state.mintA.mint),S=a?n:b,v=(0,c.ZP)(a?t.mint:y.mint),R=(0,c.ZP)(a?y.mint:t.mint),U=void 0!==S&&""!==S,O=a?(0,p.Z)((0,d.dC)(null!=n?n:0,10**t.decimals)):(0,p.Z)((0,d.dC)(null!=b?b:0,10**y.decimals)),[q,V]=await Promise.all([(0,w.b)({mints:[t.mint,y.mint].filter(f.W)}),(0,g.$)()]);try{let{liquidity:c,amountSlippageA:l,amountSlippageB:S}=h&&C&&D&&P&&P.amountA&&P.amountB&&(0,m.$u)(D.liquidity)?await k({inputAmountBN:O,maxLiquidity:D.liquidity,inputMint:v,outputMint:R,amountA:(0,p.Z)(D.amountA),amountB:(0,p.Z)(D.amountB),isFocus1:a,epochInfo:V}):i.jsJ.getLiquidityAmountOutFromAmountIn({poolInfo:C.state,slippage:0,inputA:a&&s||!s&&!a,tickUpper:Math.max(r,T),tickLower:Math.min(T,r),amount:O,add:!h,epochInfo:V,token2022Infos:q,amountHasFee:!0}),g=s?l:S,w=s?S:l,f=(0,u.n)(t,g.amount),I=(0,u.n)(y,w.amount),L=g.expirationTime,B=w.expirationTime,E=w.fee&&(0,u.n)(y,w.fee),_=g.fee&&(0,u.n)(t,g.fee),x={coin1Amount:a?n:U?f:void 0,coin1SlippageAmount:a?(0,d.dC)(f,(0,d.IH)(1,e)):U?(0,d.dC)(f,(0,d.IH)(1,e)):void 0,coin2Amount:a?U?I:void 0:b,coin2SlippageAmount:a?U?(0,d.dC)(I,(0,d.IH)(1,e)):void 0:(0,d.dC)(I,(0,d.IH)(1,e)),coin1AmountFee:_,coin1ExpirationTime:U?L:void 0,coin2AmountFee:E,coin2ExpirationTime:U?B:void 0,liquidity:c,liquidityMin:new(o())((0,d.dC)(c,(0,d.lu)(1,e)).toFixed(0))};A.ZP.setState(x)}catch(e){}},[t,(0,S.B)("coin1"===I?n:b),r,y,T,I,C,h,L,P,D]);(0,a.useEffect)(()=>{try{v()}catch(e){console.log("still can't calc amount",e instanceof Error?e.message:e)}},[v])}async function k(e){let{inputAmountBN:t,maxLiquidity:n,inputMint:r,outputMint:o,amountA:a,amountB:s,epochInfo:c,isFocus1:u}=e,l=(0,d.hi)(t,u?a:s),m=(0,p.Z)(u?(0,d.dC)(s,l):(0,d.dC)(a,l)),S=await (0,w.b)({mints:[r,o]}),g=S[r],A=S[o];return{liquidity:(0,p.Z)((0,d.dC)(n,l)),amountA:(0,i.bfS)(u?t:m,(u?g:A).feeConfig,c,!1),amountB:(0,i.bfS)(u?m:t,(u?A:g).feeConfig,c,!1),amountSlippageA:(0,i.bfS)(u?t:m,(u?g:A).feeConfig,c,!1),amountSlippageB:(0,i.bfS)(u?m:t,(u?A:g).feeConfig,c,!1)}}},61813:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var i=n(53002);async function r(){let{adapter:e}=i.Z.getState();return e&&"standard"in e&&"fuse:getEphemeralSigners"in e.wallet.features&&e.wallet.features["fuse:getEphemeralSigners"].getEphemeralSigners}},48678:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(81451),r=n(72573);function o(e){if(null==e||e.toString().includes("Infinity")||isNaN(e))return"";let t=e?(0,r.B)(e):"";return(0,i.eq)(t,0)?"":t}},7931:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var i=n(67294),r=n(12839);function o(e,t,n){var o;let a="all .4s cubic-bezier(0.4, 0, 0.2, 1)",[s,c]=(0,i.useState)(null!==(o=null==n?void 0:n.defaultHasWrapped)&&void 0!==o&&o);(0,i.useEffect)(function(){if(r.N9||!(null==n?void 0:n.defaultHasWrapped))return;let i=e.current,o=t.current;if(!i||!o)return;let a=i.getBoundingClientRect(),s=o.getBoundingClientRect(),c=s.top-a.top,u=a.top<s.top?1:-1;i.style.setProperty("transition",""),o.style.setProperty("transition",""),i.style.setProperty("transform","translateY(".concat(c*u,"px)")),o.style.setProperty("transform","translateY(".concat(-c*u,"px)"))},[]);let u=(0,i.useCallback)(()=>{let n=e.current,i=t.current;if(!n||!i)return;let r=n.getBoundingClientRect(),o=i.getBoundingClientRect(),u=o.top-r.top,l=r.top<o.top?1:-1;n.style.setProperty("transition",a),i.style.setProperty("transition",a),s?(n.style.setProperty("transform","translateY(0px)"),i.style.setProperty("transform","translateY(0px)"),c(!1)):(n.style.setProperty("transform","translateY(".concat(u*l,"px)")),i.style.setProperty("transform","translateY(".concat(-u*l,"px)")),c(!0))},[s,e,t]),l=(0,i.useCallback)(()=>{let n=e.current,i=t.current;n&&i&&(n.style.setProperty("transition",a),i.style.setProperty("transition",a),n.style.setProperty("transform","translateY(0px)"),i.style.setProperty("transform","translateY(0px)"))},[s,e,t]);return(0,i.useEffect)(()=>{let n=e.current,i=t.current,r=()=>{null==n||n.style.setProperty("pointerEvents","none")},o=()=>{null==n||n.style.setProperty("pointerEvents","")};return null==n||n.addEventListener("transitionstart",r),null==n||n.addEventListener("transitionend",o),null==i||i.addEventListener("transitionstart",r),null==i||i.addEventListener("transitionend",o),()=>{null==n||n.removeEventListener("transitionstart",r),null==n||n.removeEventListener("transitionend",o),null==i||i.removeEventListener("transitionstart",r),null==i||i.removeEventListener("transitionend",o)}},[e,t]),[s,{toggleSwap:u,resetSwapPosition:l}]}},51488:function(e,t,n){"use strict";n.d(t,{I:function(){return w}});var i=n(85893),r=n(32260),o=n(81451),a=n(3363),s=n(14200),c=n(51523);async function u(e,t){let n=(0,a.ZP)(e);if(!(0,s.W)(n))return!0;let i=(0,r.U7)(n),u=i.then(e=>!!e&&({isTransferable:!((0,o.$u)(t)&&(0,o.eg)(e.transferFeePercent,1)&&(0,o.lt)(t,(0,c.hi)(e.maximumFee,1)))}).isTransferable);return u}var l=n(28948),m=n(74239),d=n(51800),p=n(72573),S=n(99111),g=n(67294);function w(e){let t=(0,g.useMemo)(()=>e.map(e=>{var t;return(0,a.ZP)(null===(t=e.token)||void 0===t?void 0:t.mint)}),[e]),n=(0,g.useMemo)(()=>e.map(e=>(0,p.B)(e.amount)),[e]),r=(0,S.Z)(async()=>{for(let{token:t,amount:n}of e)if(t){let e=await u(t.mint,n);if(!e)return t}},t.concat(n),void 0),o=!!r,s=e=>{let{className:t}=e;return(0,i.jsx)(A,{className:t,needOpen:o,badToken:r})};return{isWarningChipOpen:o,badToken:r,Token2022FeeTooHighWarningChip:s}}function A(e){let{className:t,needOpen:n,badToken:r}=e;return(0,i.jsx)(l.Z,{show:n,children:(0,i.jsx)("div",{className:t,children:(0,i.jsxs)(d.Z,{className:"bg-[#da2eef1a] text-[#da2eef] rounded-xl py-3 px-3 mobile:px-2 items-center",children:[(0,i.jsx)(m.Z,{className:"mr-1",heroIconName:"exclamation-circle",size:"smi"}),(0,i.jsx)("div",{className:"text-xs mobile:text-2xs",children:"Transfer fee at 100%, transaction will fail."})]})})})}},58625:function(e,t,n){"use strict";n.d(t,{a:function(){return S}});var i=n(85893),r=n(53002),o=n(51523),a=n(81451),s=n(42186),c=n(72573),u=n(74239),l=n(28948),m=n(51800),d=n(92618),p=n(66180);function S(e){let{solLeastBalance:t,className:n,tooltipText:S}=e,g=(0,r.Z)(e=>e.solBalance),w=(0,o.hi)(g,10**s.Bk);return(0,i.jsx)(l.U,{children:w&&(0,a.lt)(w,null!=t?t:s.kn)&&(0,a.eg)(w,0)&&(0,i.jsxs)(m.Z,{className:(0,p.m)("text-sm mt-2 text-[#D8CB39] items-center justify-center",n),children:["SOL balance: ",(0,c.B)(w)," ",(0,i.jsxs)(d.Z,{placement:"bottom-right",children:[(0,i.jsx)(u.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,i.jsx)(d.Z.Panel,{children:(0,i.jsx)("p",{className:"w-80",children:null!=S?S:"SOL is needed for Solana network fees. A minimum balance of ".concat(null!=t?t:s.kn," SOL is\n                recommended to avoid failed transactions. This swap will leave you with less than \n                ").concat(null!=t?t:s.kn," SOL.")})})]})]})})}},99023:function(e,t,n){"use strict";n.d(t,{Mn:function(){return s},dO:function(){return c}});var i=n(81451),r=n(51523),o=n(84207),a=n(72616);function s(e){return e.map(e=>{let{liquidity:t,price:n}=e;return{x:Number(n),y:Number(t)}})}function c(e){let{coin1Amount:t,coin2Amount:n,currentPrice:s,coin1InputDisabled:c,coin2InputDisabled:u}=e,[l,m]=[(c?"0":t)||"0",u?"0":n],[d,p]=[(0,i.gt)(l,0),(0,i.gt)(m,0)],S=(0,o.Z)(m||"0"),g=s?d?(0,r.dC)(l,s).add(S):p?S:(0,o.Z)(1):(0,o.Z)(1);try{let e=s?(0,r.hi)((0,r.dC)(l,s),g):(0,a.y)(0),t=s?(0,r.hi)(S,g):(0,a.y)(0);return{ratio1:e,ratio2:t}}catch(e){return{}}}},20476:function(){},93242:function(){},53576:function(){}}]);