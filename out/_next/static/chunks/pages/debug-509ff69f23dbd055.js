(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3094],{60467:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug",function(){return i(96049)}])},96049:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Z}});var n,s,a=i(85893),o=i(91371),r=i(97042),l=i(14358),c=i(58467),u=i(48764).Buffer,d=i(39386),f=i(1871);function m(e,t,i){if(i.length)for(let n of(e.push({pubkey:t,isSigner:!1,isWritable:!1}),i))e.push({pubkey:n instanceof l.nh?n:n.publicKey,isSigner:!0,isWritable:!1});else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}(n=s||(s={}))[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension";var x=i(48764).Buffer;let b=(0,d.n_)([(0,d.u8)("instruction"),(0,f.AW)("amount")]);var h=i(48764).Buffer;let p=(0,d.n_)([(0,d.u8)("instruction")]);var g=i(79938),A=i(53002),y=i(59277),v=i(31166),T=i(99522),k=i(43067),S=i(76104),I=i(70745),j=i(54592),C=i(60421),N=i(73881),w=i(51800),M=i(72573),z=i(99779),E=i(67294),P=i(14674);function Z(){return(0,a.jsxs)(N.Z,{mobileBarTitle:"Debug",metaTitle:"Debug - Raydium",children:[(0,a.jsx)("div",{className:"title text-3xl mobile:text-xl mobile:hidden font-semibold justify-self-start text-white mb-12 mobile:mb-4",children:"Debug"}),(0,a.jsxs)("div",{className:"space-y-20 mobile:space-y-10",children:[(0,a.jsx)(_,{}),(0,a.jsx)(D,{})]})]})}function _(){let[e,t]=(0,E.useState)(!1),i=(0,o.ZP)(e=>e.isApprovePanelShown);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"title text-xl mobile:text-base font-semibold justify-self-start text-white mb-4",children:"Migrate to PDA"}),(0,a.jsx)("div",{className:"text-[#abc4ff] mb-4",children:"Migrate Old Account To PDA And Harvest Reward"}),(0,a.jsx)(k.Z,{className:"frosted-glass-teal",isLoading:e||i,onClick:()=>{t(!0),(function(){let{onInnerTransitionsEmpty:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,g.ZP)(async e=>{let{transactionCollector:t,baseUtils:{connection:i,owner:n}}=e,{programIds:s}=y.ZP.getState(),{tokenAccountRawInfos:a,txVersion:o}=A.Z.getState(),{innerTransactions:l,address:c}=await r.l6j.makeV1InfoToV2PdaAndHarvestSimple({connection:i,wallet:n,programIdV3:s.FarmV3,programIdV5:s.FarmV5,tokenAccounts:a,lookupTableCache:g.eq,makeTxVersion:o});if(!l.length)throw Error("No account needs to be migrate");t.add(l,{txHistoryInfo:{title:"PDA Migrate",description:"Migrate PDA from V1 to V2 and harvest"}})})})().finally(()=>{t(!1)})},children:"Migrate"})]})}function D(){let e=(0,o.ZP)(e=>e.isMobile),t=(0,o.ZP)(e=>e.isApprovePanelShown),i=(0,A.Z)(e=>e.connected),n=(0,v.ZP)(e=>e.toRealSymbol),d=(0,P.Z)(),f="grid-cols-[.1fr,1fr,1fr,1fr,1fr,1fr] mobile:grid-cols-[.1fr,2fr,2fr,2fr,2fr] gap-4 mobile:gap-2 px-3 mobile:px-2",y=(0,A.Z)(e=>e.allTokenAccounts),[N,Z]=(0,E.useState)([]);(0,z.P)((e,t)=>{let[i=0]=e,[n]=t;i>=n&&Z([])},[y.length]);let _=N.length>0;return(0,a.jsxs)(j.Z,{children:[(0,a.jsxs)("div",{className:"mb-2 text-lg mobile:text-sm",children:[(0,a.jsx)("div",{className:"title text-xl mobile:text-base font-semibold justify-self-start text-white mb-4",children:"Migrate to ATA Token"}),(0,a.jsxs)(C.Z,{className:"".concat(f),children:[(0,a.jsx)("div",{children:(0,a.jsx)(S.X,{checked:d.size>=1&&N.length===d.size,onChange:e=>{e?Z([...d.keys()]):Z([])}})}),(0,a.jsx)("div",{className:"text-[#abc4ff80]",children:"Token"}),(0,a.jsx)("div",{className:"text-[#abc4ff80]",children:"Amount"}),(0,a.jsx)("div",{className:"text-[#abc4ff80]",children:"Mint"}),(0,a.jsx)("div",{className:"text-[#abc4ff80]",children:"Account"}),!e&&(0,a.jsx)("div",{className:"text-[#abc4ff80]",children:"ATA account"})]})]}),d.size>0?[...d.entries()].map(t=>{let[i,{token:s,tokenAccount:o,ataToken:r,ataTokenAccount:l,tokenAmount:c}]=t;return(0,a.jsxs)(C.Z,{className:"".concat(f," rounded-lg items-center py-3 odd:bg-[#abc4ff1a] text-[#abc4ff]"),children:[(0,a.jsx)("div",{children:(0,a.jsx)(S.X,{checked:N.includes(i),onChange:e=>{e?Z(e=>[...e,i]):Z(e=>e.filter(e=>e!==i))}})}),(0,a.jsxs)(w.Z,{className:"items-center mobile:flex-col gap-2 mobile:gap-0 mobile:items-start",children:[(0,a.jsx)(I.Z,{token:s,size:e?"sm":"md"}),(0,a.jsx)("div",{className:e?"text-sm":void 0,children:n(s)})]}),(0,a.jsx)("div",{className:"text-lg mobile:text-base text-[#fff]",children:(0,M.B)(c)}),(0,a.jsx)("div",{className:"justify-self-start",children:(0,a.jsx)(T.U,{iconSize:e?"xs":void 0,textClassName:"text-md mobile:text-xs text-[#abc4ff]",showDigitCount:e?3:5,canCopy:!0,showCopyIcon:!e,children:o.mint})}),(0,a.jsx)("div",{className:"justify-self-start",children:(0,a.jsx)(T.U,{iconSize:e?"xs":void 0,textClassName:"text-md mobile:text-xs text-[#abc4ff]",showDigitCount:e?3:4,canCopy:!0,showCopyIcon:!e,canExternalLink:!0,children:o.publicKey})}),!e&&(0,a.jsx)("div",{className:"justify-self-start",children:r?(0,a.jsx)(T.U,{iconSize:e?"xs":void 0,textClassName:"text-md mobile:text-xs text-[#abc4ff]",showDigitCount:e?3:4,canCopy:!0,showCopyIcon:!e,canExternalLink:!0,children:null==l?void 0:l.publicKey}):null})]},i)}):null,(0,a.jsx)(k.Z,{size:"lg",className:"mx-auto w-[40em] mobile:w-full frosted-glass-teal mt-5",isLoading:t,validators:[{should:i,forceActive:!0,fallbackProps:{onClick:()=>o.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:_,fallbackProps:{children:"Select accounts to migrate"}}],onClick:()=>{var e;e={},(0,g.ZP)(async t=>{let{transactionCollector:i,baseUtils:{owner:n,connection:a}}=t,{allTokenAccounts:o}=A.Z.getState(),d={},f={};for(let e of o)e.isAssociated&&(d[e.mint.toString()]=e.publicKey),void 0!==e.publicKey&&(f[e.publicKey.toString()]=e);let g=[];for(let e of N){let t=f[e],i=d[t.mint.toString()],a={instructionTypes:[],instructions:[],signers:[]};if(void 0===i){let e=r.RGo.getAssociatedTokenAccount({mint:t.mint,owner:n,programId:t.programId});d[t.mint.toString()]=e,i=e,a.instructions.push(function(e,t,i,n,s=c.H_,a=c._u){return function(e,t,i,n,s,a=c.H_,o=c._u){let r=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:l.yc.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new l.Sl({keys:r,programId:o,data:s})}(e,t,i,n,u.alloc(0),s,a)}(n,e,n,t.mint,t.programId)),a.instructionTypes.push(r.p01.createATA)}t.amount.isZero()||a.instructions.push(function(e,t,i,n,a=[],o=c.H_){let r=m([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],i,a),u=x.alloc(b.span);return b.encode({instruction:s.Transfer,amount:BigInt(n)},u),new l.Sl({keys:r,programId:o,data:u})}(new l.nh(e),i,n,BigInt(t.amount.toString()),[],t.programId)),a.instructionTypes.push(r.p01.transferAmount),a.instructions.push(function(e,t,i,n=[],a=c.H_){let o=m([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],i,n),r=h.alloc(p.span);return p.encode({instruction:s.CloseAccount},r),new l.Sl({keys:o,programId:a,data:r})}(new l.nh(e),n,n,[],t.programId)),a.instructionTypes.push(r.p01.closeAccount),g.push(a)}if(!g.length)throw Error("No account needs to be migrate");i.add(await (0,r.q7f)({connection:a,makeTxVersion:r.eVA.LEGACY,payer:n,innerTransaction:g}),{txHistoryInfo:{title:"Migrate to ATA",description:"Migrate to ATA"},onTxSuccess(){var t;null==e||null===(t=e.onTxSuccess)||void 0===t||t.call(e)}})})},children:"Migrate to ATA"})]})}}},function(e){e.O(0,[3577,3881,2820,9774,2888,179],function(){return e(e.s=60467)}),_N_E=e.O()}]);