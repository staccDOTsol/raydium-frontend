(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5009],{10073:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/create-position",function(){return i(58987)}])},58987:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return eS}});var l=i(85893),s=i(67294),n=i(90482),o=i(66180),r=i(91371),c=i(6262),a=i(17607),d=i(94678),m=i(52784),u=i(76961),x=i(31166),p=i(11163),f=i(94355),h=i(56603),b=i(4465),v=i(16938),j=i(26842),g=i(99779),Z=i(96662),N=i(25222),y=i(80582);function k(e){var t,i;let l={ammId:String(null!==(i=null!==(t=e.ammId)&&void 0!==t?t:e.ammid)&&void 0!==i?i:"")};return(0,v.dI)(l)}var P=i(31555),w=i(83496),S=i(14200),C=i(27713),T=i(53002),A=i(6547),F=i(11601),L=i(43067),E=i(70745),I=i(97664),B=i(54592),M=i(88132),R=i(28948),D=i(60421),U=i(74239),z=i(73881),q=i(33674),_=i(51800),W=i(92618),$=i(18074),O=i(62952),H=i(95865),V=i(81451),X=i(8951),Q=i(14209),J=i(51523),K=i(71375),Y=i(84207),G=i(72573),ee=i(32825),et=i(47857),ei=i(7931),el=i(92224),es=i(51488),en=i(99023),eo=i(40816),er=i(54531);let ec="mobile:justify-center mobile:w-1/2";function ea(e){let{coin1:t,coin2:i,fee:n,focusSide:o,onChangeFocus:r}=e,c=(0,s.useMemo)(()=>{let e=[];return t&&e.push({label:"".concat(t.symbol||"Unknown"," price"),value:t.id,className:ec}),i&&e.push({label:"".concat(i.symbol||"Unknown"," price"),value:i.id,className:ec}),e},[t,i]),a=(0,s.useCallback)(e=>{r(e.value===i.id?"coin2":"coin1")},[i]);return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[27px] mobile:flex-col mobile:items-baseline mobile:mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center mobile:mb-2",children:[(0,l.jsx)(er.Z,{size:"lg",token1:t,token2:i}),(0,l.jsxs)("span",{className:"ml-2 text-xl font-medium mobile:text-lg text-white",children:[(null==t?void 0:t.symbol)||"-"," / ",(null==i?void 0:i.symbol)||"-"]}),(0,l.jsxs)("div",{className:"px-2.5 py-1 ml-2 rounded-lg text-sm text-secondary-title bg-active-tab-bg",children:["Pool Fee ",n||"-"]})]}),(0,l.jsx)("div",{className:"flex items-center mobile:w-full",children:t&&i&&(0,l.jsx)(eo.Z,{classNames:"ml-4 mobile:w-full mobile:ml-0",tabs:c,selectedValue:"coin1"===o?t.id:null==i?void 0:i.id,onChange:a})})]})}var ed=i(58625),em=i(54103),eu=i(67858),ex=i(96256);function ep(){return(0,l.jsxs)("div",{className:"absolute text-sm flex flex-col border-1.5 border-[#abc4ff40] text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,l.jsx)(U.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}var ef=i(71122),eh=i(97042),eb=i(99522),ev=i(6994),ej=i(65927),eg=i(40471),eZ=i(48678);function eN(e){var t,i;let{open:n,haveEnoughCoin1:c,haveEnoughCoin2:a,coin1:d,coin2:m,coin1Amount:u,coin1AmountFee:x,coin2Amount:p,coin2AmountFee:f,decimals:h,currentPrice:b,position:v,gettedNFTAddress:j,totalDeposit:g,feeRate:Z,inRange:N,onBackToAllMyPools:y,onConfirm:k,onClose:P,onRefreshSnapshot:w,isSnapshotDataFresh:S}=e,C=(0,s.useRef)(!1),T=Math.min(null!=h?h:6,6),A=(0,r.ZP)(e=>e.isApprovePanelShown),F=(0,s.useCallback)(e=>{null==k||k(e),C.current=!0},[P]),I=!!j,M=(0,s.useCallback)(()=>{P()},[P]);return(0,l.jsx)(ej.Z,{open:n,onClose:M,children:e=>{let{close:s}=e;return(0,l.jsx)(ev.Z,{className:(0,o.m)("p-6 mobile:py-4 mobile:px-2 rounded-3xl w-[min(480px,95vw)] mx-8 border-1.5 border-[rgba(171,196,255,0.2)]  bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:I?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(_.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsx)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:"Deposit Confirmed"}),(0,l.jsx)(U.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:s})]}),(0,l.jsxs)("div",{className:"my-4 mx-4 space-y-4",children:[(0,l.jsx)("div",{className:"text-sm text-[#ABC4FF] font-medium",children:"A new NFT representing your Concentrated Liquidity position is now in your wallet."}),(0,l.jsxs)(B.Z,{className:"gap-2 items-center",children:[(0,l.jsx)(eg.Z,{src:"https://cloudflare-ipfs.com/ipfs/Qme9ErqmQaznzpfDACncEW48NyXJPFP7HgzfoNdto9xQ9P/02.jpg",className:"h-44 w-44"}),(0,l.jsxs)(_.Z,{className:"text-sm text-[#ABC4FF] font-medium gap-2",children:[(0,l.jsx)("div",{children:"NFT Mint:"}),(0,l.jsx)(eb.U,{canCopy:!0,canExternalLink:!0,addressType:"token",children:j})]})]}),(0,l.jsxs)("div",{className:"text-sm text-[#ABC4FF] font-medium",children:[(0,l.jsx)("strong",{className:"text-base",children:"DO NOT"})," burn this NFT or you will be unable to remove liquidity! If you send the NFT to another wallet, only the new wallet will be able to remove liquidity."]})]}),(0,l.jsx)(B.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(B.Z,{children:(0,l.jsx)(L.Z,{className:"frosted-glass-teal",onClick:y,children:"View My Pools"})})})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(_.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:["Preview Deposit to ",null==d?void 0:d.symbol," / ",null==m?void 0:m.symbol]}),(0,l.jsx)(U.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:s})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"My Position"}),(0,l.jsxs)("div",{className:"text-sm flex leading-[18px] flex-col pt-2.5",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2.5",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(E.Z,{className:"inline-block mr-1",size:"sm",token:d}),null==d?void 0:d.symbol]}),(0,l.jsxs)(B.Z,{className:"items-end",children:[(0,l.jsxs)("span",{children:[(0,G.B)(u)," ",null==d?void 0:d.symbol]}),(0,V.$u)(x)&&(0,l.jsxs)(_.Z,{className:"text-xs text-[#abc4ff80] gap-0.5 items-center",children:[(0,l.jsxs)("span",{children:["Position: ",(0,G.B)((0,J.h9)(u,x))," + "]}),(0,l.jsxs)(_.Z,{className:"text-[#D8CB39] font-medium gap-0.5 items-center",children:[(0,l.jsx)("span",{children:"Fee"}),(0,l.jsxs)(W.Z,{children:[(0,l.jsx)(U.Z,{size:"xs",heroIconName:"information-circle"}),(0,l.jsx)(W.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:"This token uses the Token-2022 program and includes a transfer fee set by the token creator. These are the final deposit amounts for the position and the transfer fee."})})]}),(0,l.jsxs)("span",{children:[": ",(0,G.B)(x)]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(E.Z,{className:"inline-block mr-1",size:"sm",token:m}),null==m?void 0:m.symbol]}),(0,l.jsxs)(B.Z,{className:"items-end",children:[(0,l.jsxs)("span",{children:[(0,G.B)(p)," ",null==m?void 0:m.symbol]}),(0,V.$u)(f)&&(0,l.jsxs)(_.Z,{className:"text-xs text-[#abc4ff80] gap-0.5 items-center",children:[(0,l.jsxs)("span",{children:["Position: ",(0,G.B)((0,J.h9)(p,f))," + "]}),(0,l.jsxs)(_.Z,{className:"text-[#D8CB39] font-medium gap-0.5 items-center",children:[(0,l.jsx)("span",{children:"Fee"}),(0,l.jsxs)(W.Z,{children:[(0,l.jsx)(U.Z,{size:"xs",heroIconName:"information-circle"}),(0,l.jsx)(W.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:"This token uses the Token-2022 program and includes a transfer fee set by the token creator. These are the final deposit amounts for the position and the transfer fee."})})]}),(0,l.jsxs)("span",{children:[": ",(0,G.B)(f)]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-2 pl-1",children:[(0,l.jsx)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:"Fee tier"}),(0,l.jsx)("span",{children:(0,$.Z)((Z||0)/1e6)})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"text-sm flex justify-between items-end leading-[18px] font-medium mb-2 mobile:text-xs",children:[(0,l.jsx)("span",{className:"flex text-sm text-secondary-title leading-[18px] mr-2",children:"Current Price"}),b?(0,eZ.C)((0,G.B)(b,{decimalLength:T})):"0"," ",null==m?void 0:m.symbol," per ",null==d?void 0:d.symbol]}),(0,l.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Selected Range"}),(0,l.jsx)("span",{children:N?(0,l.jsxs)(_.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,l.jsx)(U.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,l.jsxs)(_.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,l.jsx)(U.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Min Price"}),(0,l.jsx)("div",{className:"text-xl my-3",children:(0,G.B)(null==v?void 0:v.min,{decimalLength:T})}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==m?void 0:m.symbol," per ",null==d?void 0:d.symbol]})]}),(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Max Price"}),(0,l.jsx)("div",{className:"text-xl my-3",children:(0,G.B)(null==v?void 0:v.max,{decimalLength:T})}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==m?void 0:m.symbol," per ",null==d?void 0:d.symbol]})]})]})]}),(0,l.jsx)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg",children:g})]})}),(0,l.jsx)(B.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(B.Z,{children:(0,l.jsx)(L.Z,{className:"frosted-glass-teal",isLoading:A,validators:[{should:S,forceActive:!0,fallbackProps:{onClick:()=>{w()},children:"Refresh Position"}},{should:c,fallbackProps:{children:"Insufficient ".concat(null!==(t=null==d?void 0:d.symbol)&&void 0!==t?t:""," balance")}},{should:a,fallbackProps:{children:"Insufficient ".concat(null!==(i=null==m?void 0:m.symbol)&&void 0!==i?i:""," balance")}}],onClick:()=>F(s),children:"Confirm Deposit"})})})})]})})}})}var ey=i(74365),ek=i(63675);let{ContextProvider:eP,useStore:ew}=(0,ee.Z)({hasAcceptedPriceChange:!1,coinInputBox1ComponentRef:(0,s.createRef)(),coinInputBox2ComponentRef:(0,s.createRef)(),liquidityButtonComponentRef:(0,s.createRef)()});function eS(){return(0,l.jsxs)(eP,{children:[(0,l.jsx)(eA,{}),(0,l.jsxs)(z.Z,{mobileBarTitle:"Concentrated",metaTitle:"Concentrated - Raydium",children:[(0,l.jsx)(eC,{}),(0,l.jsx)(eF,{})]})]})}function eC(){return(0,l.jsx)(_.Z,{className:(0,o.m)("-mt-4 mobile:mt-0.5 mb-8 mobile:mb-2 sticky z-auto -top-4 mobile:top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] mobile:hidden items-center justify-between"),children:(0,l.jsx)(L.Z,{type:"text",className:"text-sm text-[#ABC4FF] opacity-50 px-0",prefix:(0,l.jsx)(U.Z,{heroIconName:"chevron-left",size:"sm"}),onClick:()=>{(0,P.ES)("/clmm/pools")},children:"Back to all pools"})})}function eT(){return(0,l.jsx)(_.Z,{className:(0,o.m)("-mt-4 mobile:mt-0.5 mb-8 mobile:mb-2 sticky z-10 -top-4 mobile:top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] items-center justify-between"),children:(0,l.jsx)(L.Z,{type:"text",className:"text-sm text-[#ABC4FF] px-0",prefix:(0,l.jsx)(U.Z,{heroIconName:"chevron-left"}),onClick:()=>{(0,P.ES)("/clmm/pools")}})})}function eA(){return!function(){let{query:e,pathname:t,replace:i}=(0,p.useRouter)(),l=(0,d.ZP)(e=>e.hydratedAmmPools),n=(0,d.ZP)(e=>e.currentAmmPool),o=(0,Z.ZP)(e=>e.connection),c=(0,x.ZP)(e=>e.getToken),a=(0,r.ZP)(e=>e.inCleanUrlMode),[m,u]=(0,s.useState)(!1),P=(0,s.useCallback)(e=>l.find(t=>t.idString===e),[l]);(0,s.useEffect)(()=>{t.includes("/clmm/create-position")||u(!1)},[t]),(0,s.useEffect)(()=>{let e=()=>u(!1);return null==globalThis||globalThis.addEventListener("beforeunload",e),()=>null==globalThis?void 0:globalThis.removeEventListener("beforeunload",e)},[]),(0,j.Z)(async()=>{if(!t.includes("/clmm/create-position")||!o||m)return;let{logWarning:i}=f.Z.getState(),{ammId:s}=k(e);if(s&&l.length>0){let e=s?P(s):void 0,t=(0,N.w)(e);e&&t?d.ZP.setState({currentAmmPool:e,coin1:e.base,coin2:e.quote}):(d.ZP.setState({coin1:c(y.PD),coin2:c(y.LA)}),l.length>0&&i("Pool not found. Check the URL link or search manually."))}l.length>0&&u(!0)},[m,o,t,e,l,P]);let w=(0,s.useCallback)((0,h.P)((e,t)=>{i({pathname:e,query:t},void 0,{shallow:!0})},{delay:500}),[i]);(0,g.P)(()=>{if(!t.includes("/clmm/create-position")||!m||a)return;let i=k(e),l=(0,v.dI)({ammId:null==n?void 0:n.idString}),s=!(0,b.Ek)(i,l);s&&w(t,l)},[m,a,n,e,t])}(),(0,m.Z)(),(0,u.Z)(),!function(){(0,x.ZP)(e=>e.getToken);let e=(0,x.ZP)(e=>e.tokens);(0,s.useEffect)(()=>{let{coin1:t,coin2:i,currentAmmPool:l}=d.ZP.getState();!t&&!i&&Object.keys(e).length&&l&&d.ZP.setState({coin1:l.base,coin2:l.quote})},[e])}(),null}function eF(){var e,t,i,o,m,u,p;let f=(0,T.Z)(e=>e.getBalance),h=(0,T.Z)(e=>e.balances),[v,j,Z]=(0,d.ZP)(e=>[e.chartPoints,e.loadChartPointsAct,e.lazyLoadChart]),N=(0,T.Z)(e=>e.connected),y=(0,T.Z)(e=>e.connecting),[k,{off:z,on:ee}]=(0,el.ZP)(!1),eo=(0,r.ZP)(e=>e.isApprovePanelShown),er=(0,T.Z)(e=>e.checkWalletHasEnoughBalance),ec=(0,d.ZP)(e=>e.timeBasis),em=(0,d.ZP)(e=>e.coin1),eu=(0,d.ZP)(e=>e.coin1Amount);(0,d.ZP)(e=>e.coin1SlippageAmount);let ex=(0,d.ZP)(e=>e.coin1AmountFee),ef=(0,d.ZP)(e=>e.coin2),eb=(0,d.ZP)(e=>e.coin2Amount),ev=(0,d.ZP)(e=>e.coin2AmountFee);(0,d.ZP)(e=>e.coin2SlippageAmount);let ej=(0,d.ZP)(e=>e.focusSide),eg="coin1"===ej,eZ=(0,d.ZP)(e=>e.liquidity),eP=(0,d.ZP)(e=>e.currentAmmPool),eS=(0,d.ZP)(e=>e.hydratedAmmPools),eC=(0,d.ZP)(e=>e.priceUpper),eA=(0,d.ZP)(e=>e.priceLower),eF=(0,d.ZP)(e=>e.priceUpperTick),eE=(0,d.ZP)(e=>e.priceLowerTick),eI=(0,d.ZP)(e=>e.refreshConcentrated),eB=(0,x.ZP)(e=>e.refreshTokenPrice),[eM,eR]=(0,s.useState)({}),eD="".concat(null==eP?void 0:eP.idString,"-").concat(ej),eU=function(e){let t=(0,s.useRef)();return(0,s.useEffect)(()=>{t.current=e},[e]),t.current}(eD),ez=(0,s.useRef)(),eq=(0,s.useRef)({lower:void 0,upper:void 0}),e_=em||ef?Math.max(null!==(i=null==em?void 0:em.decimals)&&void 0!==i?i:0,null!==(o=null==ef?void 0:ef.decimals)&&void 0!==o?o:0):6,eW=(0,b.aT)(null==eP?void 0:eP.state.mintA.mint,em),e$=eg&&eW||!eW&&!eg,eO=(0,s.useMemo)(()=>{let e=v?(0,en.Mn)(v):void 0;return e$?e:e?e.map(e=>({x:1/e.x,y:e.y})).reverse():void 0},[v,e$]),eH=(0,s.useMemo)(()=>Math.pow(-1,eW?eg?0:1:eg?1:0),[eW,eg]),eV=eP?[eP.state[d.v$[ec]].priceMin,eP.state[d.v$[ec]].priceMax]:[void 0,void 0];e$||(eV.reverse(),eV[0]=eV[0]?1/eV[0]:eV[0],eV[1]=eV[1]?1/eV[1]:eV[1]);let{coinInputBox1ComponentRef:eX,coinInputBox2ComponentRef:eQ,liquidityButtonComponentRef:eJ}=ew(),eK=(0,s.useRef)(null),eY=(0,s.useRef)(null),[,{toggleSwap:eG}]=(0,ei.H)(eK,eY);(0,g.P)(e=>{let[t]=e;t&&t!==ej&&eG()},[ej]);let e0=(0,s.useMemo)(()=>eP?(0,C.eZ)(e$?eP.state.currentPrice:new n.Z(1).div(eP.state.currentPrice)):void 0,[null==eP?void 0:eP.state.currentPrice.toFixed(),ej]);eP&&(0,C.eZ)(eP.state.currentPrice);let e1=eP&&e0&&void 0!==eA&&void 0!==eC?[(0,K.Z)(eC||0,e_).lt((0,K.Z)(e0||0,e_)),(0,K.Z)(eA||0,e_).gt((0,K.Z)(e0||0,e_))]:[!1,!1];eg||e1.reverse();let[e2,e4]=e1;(0,s.useEffect)(()=>{Z&&eP&&j(eP.idString)},[null==eP?void 0:eP.idString,j,Z]),(0,s.useEffect)(()=>{e2&&d.ZP.setState({coin1Amount:"0"}),e4&&d.ZP.setState({coin2Amount:"0"})},[e2,e4]),(0,s.useEffect)(()=>()=>d.ZP.setState({lazyLoadChart:!1,focusSide:"coin1",userCursorSide:"coin1"}),[]);let e5=em&&(!(0,V.$u)(eu)||er((0,O.n)(em,eu,{alreadyDecimaled:!0}))),e8=ef&&(!(0,V.$u)(eb)||er((0,O.n)(ef,eb,{alreadyDecimaled:!0}))),e3=(0,s.useRef)(null);(0,s.useEffect)(()=>{d.ZP.setState({scrollToInputBox:()=>{var e;return null===(e=e3.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"center"})}})},[e3]);let e6=(0,Q.db)((null===(e=null==eP?void 0:eP.state.currentPrice)||void 0===e?void 0:e.toFixed(20))||"")+2,e9=(0,s.useMemo)(()=>(0,c.vt)({coin1:em,coin2:ef,ammPool:eP,reverse:!e$,maxDecimals:Math.max(e_,e6)}),[em,ef,eP,e$,e_,e6]);(0,s.useEffect)(()=>{eD!==eU&&e9&&(d.ZP.setState(e9),eq.current.lower=e9.priceLowerTick,eq.current.upper=e9.priceUpperTick)},[e9,eD,eU]);let[e7,te]=(0,s.useState)([]),tt=(0,s.useCallback)(e=>te(t=>[null==e?void 0:e.toExact(),t[1]]),[]),ti=(0,s.useCallback)(e=>te(t=>[t[0],null==e?void 0:e.toExact()]),[]),tl=e7.filter(e=>!!e).reduce((e,t)=>e.add((0,Y.Z)(t)),(0,Y.Z)(0)),ts=(0,s.useMemo)(()=>em&&eu&&(0,S.W)(em)?(0,w.w)({amount:(0,O.n)(em,eu,{alreadyDecimaled:!0})}):void 0,[em,eu]),tn=(0,s.useMemo)(()=>ef&&eb&&(0,S.W)(ef)?(0,w.w)({amount:(0,O.n)(ef,eb,{alreadyDecimaled:!0})}):void 0,[ef,eb]),to=(0,S.W)(em)||(0,S.W)(ef),tr=(0,et.z)(e=>{let t={price:e.min,tick:eq.current.lower};if(!eP)return t;if(e[ek.e6.Min]>=e[ek.e6.Max]){let e=eg?em:ef,t=eq.current.upper-eP.state.tickSpacing*eH,{price:i,tick:l}=(0,c.Ek)({poolInfo:eP.state,baseIn:(0,b.aT)(eP.state.mintA.mint,null==e?void 0:e.mint),tick:t});return eq.current.lower=l,d.ZP.setState({priceLowerTick:l,priceLower:i}),{price:(0,X.V)({val:i.toFixed(10)}),tick:l}}return t}),tc=(0,s.useCallback)(e=>{let{side:t,userInput:i,...l}=e;if(!eP||!em||!ef||isNaN(l.min)||isNaN(l.max))return;let s=(0,c.TL)({...l,coin1:em,coin2:ef,ammPool:eP,reverse:!eg,maxDecimals:Math.max(e_,e6)}),n=t===ek.e6.Min,o=n?"priceLowerTick":"priceUpperTick";if(i&&t)eq.current[n?"lower":"upper"]=s[o],n&&d.ZP.setState({priceLowerTick:s[o],priceLower:s.priceLower}),n||d.ZP.setState({priceUpperTick:s[o],priceUpper:s.priceUpper});else{let e=d.ZP.getState(),i=void 0!==e.priceLowerTick&&void 0!==e.priceUpperTick&&void 0!==e.priceLower&&void 0!==e.priceUpper,l=i?{priceLowerTick:e.priceLowerTick,priceLower:e.priceLower,priceUpperTick:e.priceUpperTick,priceUpper:e.priceUpper}:void 0;if(s.priceLowerTick===s.priceUpperTick||eg&&t&&(n&&s.priceLowerTick>=eq.current.upper||!n&&s.priceUpperTick<=eq.current.lower)||!eg&&t&&(n&&s.priceLowerTick-eq.current.upper<=0||!n&&s.priceUpperTick-eq.current.lower>=0))return l;eq.current={lower:s.priceLowerTick,upper:s.priceUpperTick},d.ZP.setState(s)}return s},[null==em?void 0:em.mintString,null==ef?void 0:ef.mintString,null==eP?void 0:eP.idString,eg,e6,e_]),ta=(0,s.useCallback)(e=>{let{p:t,isMin:i,isIncrease:l}=e;if(!eP||!em||!ef)return;let s=eg?em:ef,n=i?"lower":"upper",o=eq.current[n]+(l?eP.state.tickSpacing:-1*eP.state.tickSpacing)*eH,{price:r}=(0,c.Ek)({poolInfo:eP.state,baseIn:(0,b.aT)(eP.state.mintA.mint,null==s?void 0:s.mint),tick:o});return eg&&(i&&o>=eq.current.upper||!i&&o<=eq.current.lower)||!eg&&(i&&o-eq.current.upper<=0||!i&&o-eq.current.lower>=0)||i&&(0,V.eg)(r.toFixed(20),ez.current.getPosition().max.toFixed(20))||!i&&(0,V.G)(r.toFixed(20),ez.current.getPosition().min.toFixed(20))?(0,Y.Z)(t):(eq.current[n]=o,i&&d.ZP.setState({priceLower:r,priceLowerTick:o}),i||d.ZP.setState({priceUpper:r,priceUpperTick:o}),r)},[null==em?void 0:em.mint,null==ef?void 0:ef.mint,null==eP?void 0:eP.idString,eH,e_,eg]),td=(0,et.z)(()=>{eR({...d.ZP.getState(),coin1:em,coin2:ef,coin1Amount:eu,coin2Amount:eb,coin1AmountFee:ex,coin2AmountFee:ev,decimals:e_,totalDeposit:(0,H.Z)(tl),feeRate:null==eP?void 0:eP.ammConfig.tradeFeeRate,inRange:!e1.some(e=>e),currentPrice:eP?(0,C.eZ)(eW?eP.state.currentPrice:new n.Z(1).div(eP.state.currentPrice)):void 0,currentAmmPool:eP})}),tm=(0,s.useMemo)(()=>(0,V.eq)(eM.coin1Amount,eu)&&(0,V.eq)(eM.coin2Amount,eb),[eu,eb,eM]),tu=(0,s.useCallback)(()=>{td(),ee()},[ee,em,ef,eu,eb,e_,tl,eP,e1]),tx=(0,s.useMemo)(()=>({isStable:(null==eP?void 0:eP.ammConfig.tradeFeeRate)===100,baseIn:e$,points:eO||[],initMinBoundaryX:null==e9?void 0:e9.priceLower,initMaxBoundaryX:null==e9?void 0:e9.priceUpper}),[eO,e9,null==eP?void 0:eP.ammConfig.tradeFeeRate,e$]),[tp,tf]=(0,s.useState)(),{Token2022FeeTooHighWarningChip:th,isWarningChipOpen:tb}=(0,es.I)([{token:em,amount:eu},{token:ef,amount:eb}]),tv=(0,s.useMemo)(()=>em&&f(em)?(0,O.n)(em,(0,J.dC)(f(em),.985),{alreadyDecimaled:!0}):void 0,[em,f,h]),tj=(0,s.useMemo)(()=>ef&&f(ef)?(0,O.n)(ef,(0,J.dC)(f(ef),.985),{alreadyDecimaled:!0}):void 0,[ef,f,h]),[tg,tZ]=(0,s.useState)(!1);(0,s.useEffect)(()=>()=>tZ(!1),[null==em?void 0:em.mintString]);let[tN,ty]=(0,s.useState)(!1);return(0,s.useEffect)(()=>()=>ty(!1),[null==ef?void 0:ef.mintString]),(0,l.jsxs)(M.Z,{domRef:e3,wrapperClassName:"w-[min(912px,100%)] self-center cyberpunk-bg-light",className:"p-6 mobile:py-5 mobile:px-3",children:[(0,l.jsx)("div",{className:"absolute -left-8 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,l.jsx)(eT,{})}),(0,l.jsx)(ea,{coin1:em,coin2:ef,fee:(0,$.Z)(null==eP?void 0:eP.tradeFeeRate,{exact:!0}),focusSide:ej,onChangeFocus:e=>d.ZP.setState({focusSide:e})}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row flex-gap-1 gap-3 mb-3",children:[(0,l.jsxs)(B.Z,{className:"gap-5 bg-dark-blue rounded-xl flex flex-col w-full sm:w-1/2 px-3 py-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between align-top mb-3",children:[(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title ",children:"Deposit Amount"}),(0,l.jsx)(q.Z,{disabled:k,refreshKey:"clmm-pools",freshFunction:()=>{eB(),eI()}})]}),(0,l.jsxs)("div",{ref:eK,className:"relative",children:[e2&&(0,l.jsx)(ep,{}),(0,l.jsx)(I.Z,{hideTransferFee:!0,className:"mb-4 py-2 mobile:py-1 px-3 mobile:px-2 border-1.5 border-[#abc4ff40]",disabled:eo,disabledInput:!eP||e2,noDisableStyle:!0,componentRef:eX,value:eP?(0,G.B)(eu):void 0,haveHalfButton:!0,HTMLTitleTooltip:null==em?void 0:em.mintString,topLeftLabel:em?"".concat(em.mintString.slice(0,5),"...").concat(em.mintString.slice(-5)):void 0,haveCoinIcon:!0,maxValue:tv,onPriceChange:tt,disableTokenSelect:!0,onUserInput:e=>{d.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},onEnter:e=>{var t,i,l,s;e&&(ef||null===(t=eQ.current)||void 0===t||null===(i=t.selectToken)||void 0===i||i.call(t),ef&&eb&&(null===(l=eJ.current)||void 0===l||null===(s=l.click)||void 0===s||s.call(l)))},token:em})]}),(0,l.jsxs)("div",{ref:eY,className:"relative",children:[e4&&(0,l.jsx)(ep,{}),(0,l.jsx)(I.Z,{hideTransferFee:!0,className:"py-2 mobile:py-1 px-3 mobile:px-2 border-1.5 border-[#abc4ff40]",componentRef:eQ,disabled:eo,disabledInput:!eP||e4,noDisableStyle:!0,value:eP?(0,G.B)(eb):void 0,HTMLTitleTooltip:null==ef?void 0:ef.mintString,topLeftLabel:ef?"".concat(ef.mintString.slice(0,5),"...").concat(ef.mintString.slice(-5)):void 0,haveHalfButton:!0,haveCoinIcon:!0,maxValue:tj,onPriceChange:ti,disableTokenSelect:!0,onEnter:e=>{var t,i,l,s;e&&(em||null===(t=eX.current)||void 0===t||null===(i=t.selectToken)||void 0===i||i.call(t),em&&eu&&(null===(l=eJ.current)||void 0===l||null===(s=l.click)||void 0===s||s.call(l)))},onUserInput:e=>{d.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},token:ef})]}),th({className:"pt-2"})]}),(0,l.jsxs)(B.Z,{className:"gap-4 border-1.5 border-[#abc4ff40]  rounded-xl p-3",children:[(0,l.jsxs)(B.Z,{className:"justify-between",children:[to?(0,l.jsxs)(D.Z,{className:"mb-1 grid-cols-[2.5fr,2fr,2fr] items-center text-xs text-[#abc4ff]",children:[(0,l.jsx)("div",{}),(0,l.jsxs)(_.Z,{className:"justify-self-end items-center",children:[(0,l.jsx)("div",{children:"Token2022 Fee"}),(0,l.jsxs)(W.Z,{children:[(0,l.jsx)(U.Z,{iconClassName:"ml-1",size:"xs",heroIconName:"question-mark-circle"}),(0,l.jsx)(W.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[200px] space-y-1.5 text-[#abc4ff]",children:"Tokens with a transfer fee below use the Token2022 program and have programmed a fee on all token interactions."})})]})]}),(0,l.jsx)("div",{className:"justify-self-end",children:"Final Deposit"})]}):void 0,(0,l.jsx)(B.Z,{className:"gap-1",children:[{side:"1",isToken2022:(0,S.W)(em),token:em,disabled:e2,info:ts,rawAmount:eu},{side:"2",isToken2022:(0,S.W)(ef),token:ef,disabled:e4,info:tn,rawAmount:eb}].map(e=>{let{isToken2022:t,token:i,disabled:s,info:n,rawAmount:o,side:r}=e;return s||!i?void 0:(0,l.jsxs)(D.Z,{className:"grid-cols-[2.5fr,2fr,2fr] items-center",children:[(0,l.jsxs)(_.Z,{className:"items-center gap-1 overflow-hidden",children:[(0,l.jsx)("div",{className:"font-medium text-white",children:null==i?void 0:i.symbol}),(0,l.jsx)(E.Z,{size:"sm",token:i}),t&&(0,l.jsx)(F.I,{})]}),(0,l.jsx)("div",{className:"justify-self-end font-medium text-xs text-[#abc4ff] ",children:to?t?(0,l.jsx)(A.j,{promise:n,fallback:"--",children:e=>(null==e?void 0:e.fee)?(0,l.jsx)("div",{children:(0,G.B)(e.fee)}):"-"}):"-":""}),(0,l.jsx)("div",{className:"justify-self-end font-medium text-white overflow-hidden",children:t&&(0,V.$u)(o)?(0,l.jsx)(A.j,{promise:n,fallback:"--",onFullfilled:()=>{"1"===r?tZ(!0):ty(!0)},children:e=>(null==e?void 0:e.pure)?(0,l.jsx)("div",{children:(0,G.B)(e.pure,{decimalLength:i?"auto ".concat(i.decimals):void 0})}):void 0}):(0,l.jsx)("div",{children:(0,G.B)(o,{decimalLength:i?"auto ".concat(i.decimals):void 0})})})]},null==i?void 0:i.mintString)})})]}),(0,l.jsxs)(_.Z,{className:"justify-between",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg leading-[18px]",children:eP&&((0,V.$u)(eu)||(0,V.$u)(eb))?(0,H.Z)(tl):"--"})]})]}),e2||e4?(0,l.jsx)(R.U,{children:(0,l.jsxs)("div",{className:"flex items-center p-3 bg-[#2C2B57] rounded-xl text-sm text-[#D6CC56]",children:[(0,l.jsx)(U.Z,{size:"sm",className:"mr-1.5",heroIconName:"exclamation-circle"}),"Your position will not trade or earn fees until price moves into your range."]})}):"",(0,l.jsx)(L.Z,{className:"frosted-glass-teal w-full mt-auto",componentRef:eJ,isLoading:eo,validators:[{should:N,forceActive:!0,fallbackProps:{onClick:y?void 0:()=>r.ZP.setState({isWalletSelectorShown:!0}),children:y?"Connecting":"Connect Wallet"}},{should:eP,fallbackProps:{children:"Pool Not Found"}},{should:!(0,V.eq)((0,J.lu)(eF,eE),0),fallbackProps:{children:"Range too small"}},{should:em&&ef,fallbackProps:{children:"Select a token"}},{not:tb},{should:(0,V.$u)(eu)||(0,V.$u)(eb),fallbackProps:{children:"Enter an amount"}},{should:(!(0,S.W)(em)||tg)&&(!(0,S.W)(ef)||tN),fallbackProps:{children:"Loading Token 2022 Info..."}},{not:null==eZ?void 0:eZ.eq(eh.xEJ),fallbackProps:{children:"Token Amount Fail to Create Position"}},{should:e5,fallbackProps:{children:"Insufficient ".concat(null!==(m=null==em?void 0:em.symbol)&&void 0!==m?m:""," balance")}},{should:e8,fallbackProps:{children:"Insufficient ".concat(null!==(u=null==ef?void 0:ef.symbol)&&void 0!==u?u:""," balance")}}],onClick:()=>{tu()},children:"Preview"}),(0,l.jsx)(ed.a,{})]}),(0,l.jsxs)("div",{className:"relative bg-dark-blue min-h-[180px] rounded-xl w-full sm:w-1/2 px-3 py-4 ".concat(eP?"":"pointer-events-none select-none"),children:[!eP&&(0,l.jsx)("div",{className:"absolute inset-0 z-10 grid grid-child-center backdrop-blur-md text-[#abc4ff]",children:eS.length?"Pool Not Found":"Loading..."}),(0,l.jsx)(ey.Z,{clmmPool:eP,poolFocusKey:eD,title:(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title mb-3",children:"Set Price Range"}),ref:ez,chartOptions:tx,currentPrice:e0,priceMin:eV[0],priceMax:eV[1],priceLabel:eg?"".concat(null==ef?void 0:ef.symbol," per ").concat(null==em?void 0:em.symbol):"".concat(null==em?void 0:em.symbol," per ").concat(null==ef?void 0:ef.symbol),timeBasis:ec,decimals:e_,onPositionChange:tc,onInDecrease:ta,onAdjustMin:tr,showZoom:!0,height:200}),(0,l.jsx)(eL,{})]})]}),(0,l.jsx)(eN,{onRefreshSnapshot:td,isSnapshotDataFresh:tm,haveEnoughCoin1:e5,haveEnoughCoin2:e8,open:k,coin1:eM.coin1,coin2:eM.coin2,coin1Amount:eM.coin1Amount,coin1AmountFee:eM.coin1AmountFee,coin2Amount:eM.coin2Amount,coin2AmountFee:eM.coin2AmountFee,decimals:eM.decimals,position:null===(t=ez.current)||void 0===t?void 0:t.getPosition(),totalDeposit:null!==(p=eM.totalDeposit)&&void 0!==p?p:(0,H.Z)(0),feeRate:eM.feeRate,inRange:eM.inRange,currentPrice:eM.currentPrice,gettedNFTAddress:tp,onConfirm:e=>(0,a.Z)({...eM,onSuccess(e){let{nftAddress:t}=e;tf(t)}}),onBackToAllMyPools:()=>{eI(),(0,P.Eh)("/clmm/pools",{queryProps:{currentTab:d.u0.MY_POOLS}})},onClose:()=>{z(),tf(void 0)}})]})}function eL(e){let{className:t}=e,i=(0,d.ZP)(e=>e.currentAmmPool),s=(0,ef.HU)({ammPool:i}),n=(0,r.ZP)(e=>e.isMobile);return(0,l.jsxs)(B.Z,{className:(0,o.m)("bg-[#141041] py-3 my-1 rounded-xl gap-2",t),children:[(0,l.jsxs)(_.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title",children:"Estimated APR"}),(0,l.jsx)(eu.T,{}),(0,l.jsx)("div",{className:"font-medium text-base mobile:text-sm text-white",children:(0,$.Z)(null==s?void 0:s.apr)}),(0,l.jsx)(ex.n,{className:"ml-auto"})]}),i&&(0,l.jsx)(D.Z,{className:"border-1.5 border-[#abc4ff40] py-3 px-4 rounded-xl",children:(0,l.jsx)(em.E,{type:"poolTickInfo",colCount:n?1:2,poolInfo:i})})]})}}},function(e){e.O(0,[5431,3577,9916,7439,3881,2820,7664,4109,5469,6069,2504,9774,2888,179],function(){return e(e.s=10073)}),_N_E=e.O()}]);