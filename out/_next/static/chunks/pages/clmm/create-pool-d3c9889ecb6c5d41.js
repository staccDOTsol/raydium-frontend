(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5355],{71716:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/create-pool",function(){return n(7199)}])},475:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var i=n(62512),s=n(91371),l=n(42186),a=n(17097);async function o(){let e=s.ZP.getState().transactionPriority;if((0,a.hj)(e))return{units:6e5,microLamports:Math.ceil(e*10**l.kE.decimals*1e6/6e5)};{var t;let e=await (0,i.Z)("https://solanacompass.com/api/fees",{cacheFreshTime:3e5}),{avg:n}=null!==(t=null==e?void 0:e[15])&&void 0!==t?t:{};if(!n)return;return{units:6e5,microLamports:Math.min(Math.ceil(1e6*n/6e5),25e3)}}}},54531:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(85893);n(67294);var s=n(66180),l=n(70745),a=n(51800);function o(e){let{token1:t,token2:n,size:o,className:c,CoinAvatar1:r,CoinAvatar2:d}=e;return(0,i.jsxs)(a.Z,{className:(0,s.m)("-space-x-1",c),children:[(0,i.jsx)(l.Z,{size:o,token:t,...r}),(0,i.jsx)(l.Z,{size:o,token:n,...d})]})}},40816:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(85893),s=n(67294),l=n(66180);function a(e){let{classNames:t,tabs:n,selectedValue:a,onChange:o,tabClassName:c}=e,r=(0,s.useCallback)(e=>{null==o||o(n.find(t=>t.value===e.currentTarget.dataset.val))},[o,n]);return(0,i.jsx)("div",{className:(0,l.m)("flex rounded-lg p-1 bg-dark-blue",t),children:n.map(e=>{let t=a===e.value;return(0,i.jsx)("div",{onClick:t?void 0:r,"data-val":e.value,className:(0,l.m)("flex text-xs text-[#39D0D8] ".concat(t?"bg-active-tab-bg cursor-default":"cursor-pointer opacity-50"),e.className),children:(0,i.jsx)("div",{className:"py-1 px-2.5",children:e.label})},e.value)})})}},18074:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(81451),s=n(51523),l=n(84207),a=n(72573),o=n(99881);function c(e,t){try{var n,c;let r=(0,l.Z)(null!=e?e:0),d=r.mul((null==t?void 0:t.alreadyPercented)?1:100).toFixed(null!==(n=null==t?void 0:t.fixed)&&void 0!==n?n:2);if((0,i.eq)(r,0))return"0%";if(!(null==t?void 0:t.exact)&&d===0..toFixed(null!==(c=null==t?void 0:t.fixed)&&void 0!==c?c:2))return(null==t?void 0:t.alwaysSigned)?"<+0.01%":"<0.01%";return(null==t?void 0:t.alwaysSigned)?"".concat((0,i.gt)(d,0)?"+":"-").concat((0,o.Z)((0,i.gt)(d,0)?(0,a.B)(d):(0,a.B)((0,s.dC)(d,-1))),"%"):"".concat((0,o.Z)(d,{fractionLength:null==t?void 0:t.fixed}),"%")}catch(e){return"0%"}}},7199:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eA}});var i,s,l=n(85893),a=n(91371),o=n(62512),c=n(72616),r=n(51523),d=n(26842),m=n(94678),u=n(59277);function x(){let e=(0,m.ZP)(e=>e.availableAmmConfigFeeOptions),t=(0,a.ZP)(e=>e.inDev),n=(0,u.ZP)(e=>e.apiUrls.clmmConfigs);(0,d.Z)(async()=>{if(null==e?void 0:e.length)return;let i=await (0,o.Z)(n),s=t?{AjUvAGNuLJiXXGRQ1uiH4v6fBUJm1zwjBwyfK1qe27Ce:{id:"AjUvAGNuLJiXXGRQ1uiH4v6fBUJm1zwjBwyfK1qe27Ce",index:0,protocolFeeRate:12e3,tradeFeeRate:100,fundFeeRate:100,fundOwner:"",tickSpacing:1,description:"Dev"},ABPi23j9qDjCeK5WwutWn6XG8sMRV7AiG1Z5bP8cViuz:{id:"ABPi23j9qDjCeK5WwutWn6XG8sMRV7AiG1Z5bP8cViuz",index:0,protocolFeeRate:12e3,tradeFeeRate:2500,fundFeeRate:2500,fundOwner:"",tickSpacing:60,description:"Dev"},"85JxuepKfJsmb29ZKThuod3yeBS4dXmsCQUbeo1utpeX":{id:"85JxuepKfJsmb29ZKThuod3yeBS4dXmsCQUbeo1utpeX",index:0,protocolFeeRate:12e3,tradeFeeRate:100,fundFeeRate:100,fundOwner:"",tickSpacing:10,description:"Dev"}}:null==i?void 0:i.data;s&&m.ZP.setState({availableAmmConfigFeeOptions:Object.values(s).map(e=>({...e,original:e,protocolFeeRate:(0,c.y)((0,r.hi)(e.protocolFeeRate,1e4),{alreadyDecimaled:!0}),tradeFeeRate:(0,c.y)((0,r.hi)(e.tradeFeeRate,1e4),{alreadyDecimaled:!0})}))})},[t,n])}var p=n(76961),f=n(31555),h=n(43067),b=n(54592),v=n(74239),j=n(73881),g=n(51800),Z=n(67294),N=n(90482),P=n(66180),y=n(6262),w=n(34003),S=n(79938),k=n(17607),C=n(94355);async function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.ZP.getState();return console.log(e),(0,S.ZP)(async t=>{let{transactionCollector:n}=t,{tempDataCache:i}=m.ZP.getState();(0,w.Z)(i,"should create pool first");let{innerTransactions:s}=await (0,k.B)(e);n.add(i,{txHistoryInfo:{title:"Create pool",description:"create clmm pool"}}),n.add(s,{txHistoryInfo:{title:"Open pool position",description:"Open clmm pool position"}})})}var T=n(81451),A=n(71375),I=n(84207),B=n(72573),R=n(97042),L=n(14358),D=n(96662),U=n(14200),M=n(27713),z=n(475),O=n(53002),E=n(1684);async function X(e){var t;let{timestamp:n}=e,{coin1:i,coin2:s,userSelectedAmmConfigFeeOption:l,userSettedCurrentPrice:a,focusSide:o,ammPoolStartTime:c}=m.ZP.getState(),{connection:d}=D.ZP.getState(),{owner:x,txVersion:p}=O.Z.getState(),{programIds:f}=u.ZP.getState();(0,w.Z)(d,"connection is not ready"),(0,w.Z)(i,"not set coin1"),(0,w.Z)(s,"not set coin2"),(0,w.Z)(l,"not set userSelectedAmmConfigFeeOption"),(0,w.Z)(a,"not set userSettedCurrentPrice");let h=(0,T.$u)(a)?"coin1"===o?(0,I.Z)(a):(0,r.hi)(1,a):(0,I.Z)(0),b=(0,A.Z)((null!==(t=null==c?void 0:c.getTime())&&void 0!==t?t:0)/1e3),v=(0,U.D)(i.mint),j=(0,U.D)(s.mint),{innerTransactions:g,address:Z}=await R.jsJ.makeCreatePoolInstructionSimple({connection:d,programId:f.CLMM,mint1:{programId:v,mint:i.mint,decimals:i.decimals},mint2:{programId:j,mint:s.mint,decimals:s.decimals},ammConfig:{id:new L.nh("F7JaRQaKZt25nBCqpXQvVwwUWKofrXqJiuRb1nCSiAGW"),index:0,protocolFeeRate:30,tradeFeeRate:30,tickSpacing:64,fundFeeRate:30,fundOwner:"7ihN8QaTfNoDTRTQGULCzbUT3PHwPDTu5Brcu4iT2paP",description:"hehe"},initialPrice:(0,M.I2)(h,15),owner:null!=x?x:L.nh.default,payer:null!=x?x:L.nh.default,computeBudgetConfig:await (0,z.u)(),startTime:b,lookupTableCache:S.eq,makeTxVersion:p}),N=R.jsJ.makeMockPoolInfo({ammConfig:{id:new L.nh("F7JaRQaKZt25nBCqpXQvVwwUWKofrXqJiuRb1nCSiAGW"),index:0,protocolFeeRate:30,tradeFeeRate:30,tickSpacing:64,fundFeeRate:30,fundOwner:"7ihN8QaTfNoDTRTQGULCzbUT3PHwPDTu5Brcu4iT2paP",description:"hehe"},mint1:{programId:v,mint:i.mint,decimals:i.decimals},mint2:{programId:j,mint:s.mint,decimals:s.decimals},owner:null!=x?x:L.nh.default,programId:f.CLMM,createPoolInstructionSimpleAddress:Z,initialPrice:(0,M.I2)(h,15),startTime:b});return{mockedPoolInfo:N,makePoolInstruction:g}}var q=n(6994),J=n(70745),K=n(54531),Q=n(97664),V=n(25194),_=n(28948),G=n(60421),H=n(72259),W=n(18074),$=n(62952),Y=n(95865),ee=n(4465),et=n(14209),en=n(22305),ei=n(47857),es=n(99779),el=n(7931),ea=n(92224),eo=n(51488),ec=n(99023),er=n(58625),ed=n(87980),em=n(52784),eu=n(3363),ex=n(92618);function ep(e){let{className:t}=e,n=(0,m.ZP)(e=>e.selectableAmmPools),i=null==n?void 0:n.map(e=>(0,eu.ZP)(e.ammConfig.id)),s=(0,m.ZP)(e=>e.userSelectedAmmConfigFeeOption),a=(0,m.ZP)(e=>e.availableAmmConfigFeeOptions);return x(),(0,em.Z)(!0),!function(){let e=(0,m.ZP)(e=>e.coin1),t=(0,m.ZP)(e=>e.coin2),n=(0,m.ZP)(e=>e.selectableAmmPools),i=null==n?void 0:n.map(e=>(0,eu.ZP)(e.ammConfig.id)),s=(0,m.ZP)(e=>e.availableAmmConfigFeeOptions),l=null==s?void 0:s.filter(e=>!(null==i?void 0:i.includes(e.id))),a=null==l?void 0:l.map(e=>e.id).join("_");(0,Z.useEffect)(()=>{if(l&&e&&t){let e=l.find(e=>(0,T.eq)(e.tradeFeeRate,.0025));m.ZP.setState({userSelectedAmmConfigFeeOption:e})}else m.ZP.setState({userSelectedAmmConfigFeeOption:void 0})},[a,e,t])}(),(0,l.jsx)(ef,{configs:a,current:s,existIds:i,className:t})}function ef(e){let{configs:t,current:n,existIds:i,className:s}=e,a=(0,m.ZP)(e=>e.coin1),o=(0,m.ZP)(e=>e.coin2);return(0,l.jsx)(g.Z,{className:(0,P.m)("gap-2 grid grid-cols-3 item-grow items-stretch",s),children:null==t?void 0:t.map(e=>{let t=e.id===(null==n?void 0:n.id),i=a&&o&&!0;return(0,l.jsxs)(ex.Z,{className:"grow",disable:!0,children:[(0,l.jsxs)("div",{className:"relative grow  items-stretch px-1.5 py-2 ".concat(t?"ring-inset ring-1.5 ring-[#abc4ff]":"ring-inset ring-1.5 ring-[#abc4ff60]"," rounded-xl ").concat(i?"clickable-no-transform select-none":"opacity-30 cursor-not-allowed"),onClick:()=>{i&&m.ZP.setState({userSelectedAmmConfigFeeOption:e})},children:[t?(0,l.jsx)("div",{className:"absolute p-0.5 rounded-full right-1 top-1 -translate-y-1/2 translate-x-1/2 z-10 text-[#abc4ff] bg-[#18225d]",children:(0,l.jsx)(v.Z,{heroIconName:"check-circle",size:"smi"})}):null,(0,l.jsxs)(g.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-white font-medium text-sm mb-1",children:(0,W.Z)(e.tradeFeeRate,{fixed:4})}),(0,l.jsxs)(g.Z,{className:"text-[#abc4ff80] text-xs mb-1",children:["spacing: ",e.tickSpacing]})]}),(0,l.jsx)("div",{className:"text-[#abc4ff80] text-xs",children:e.description})]}),(0,l.jsx)(ex.Z.Panel,{children:"Already created"})]},e.id)})})}var eh=n(65927),eb=n(48678),ev=n(56419);let ej=e=>Math.min(e+2,15);function eg(e){var t,n,i,s;let{startTime:a,open:o,coin1:c,coin2:d,coin1Amount:m,coin2Amount:u,coin1AmountFee:x,coin2AmountFee:p,focusSide:f,decimals:j,currentPrice:N,position:y,totalDeposit:w,inRange:S,feeRate:k,onConfirm:C,onClose:F}=e,A=Z.useRef(!1),I=Math.min(j,6),R=Z.useCallback(e=>{null==C||C(e),A.current=!0},[F]),L=Z.useCallback(()=>{F()},[F]),D=(0,B.B)(null==y?void 0:y.min,{decimalLength:15,maxSignificantCount:ej(I)}),U=(0,B.B)(null==y?void 0:y.max,{decimalLength:15,maxSignificantCount:ej(I)}),M=(null!==(i=null===(t=(0,en.Z)(D).dec)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>10,z=(null!==(s=null===(n=(0,en.Z)(U).dec)||void 0===n?void 0:n.length)&&void 0!==s?s:0)>10;return(0,l.jsx)(eh.Z,{open:o,onClose:L,children:e=>{var t,n;let{close:i}=e;return(0,l.jsxs)(q.Z,{className:(0,P.m)("p-6 mobile:py-4 mobile:px-2 rounded-3xl w-[min(480px,95vw)] mx-8 border-1.5 border-[rgba(171,196,255,0.2)]  bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:[(0,l.jsxs)(g.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:["Preview Deposit to ",null==c?void 0:c.symbol," / ",null==d?void 0:d.symbol]}),(0,l.jsx)(v.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:i})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"My Position"}),(0,l.jsxs)("div",{className:"text-sm flex leading-[18px] flex-col pt-2.5",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2.5",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(J.Z,{className:"inline-block mr-1",size:"sm",token:c}),null==c?void 0:c.symbol]}),(0,l.jsxs)(b.Z,{className:"items-end",children:[(0,l.jsxs)("span",{children:[(0,B.B)(m)," ",null==c?void 0:c.symbol]}),(0,T.$u)(x)&&(0,l.jsxs)(g.Z,{className:"text-xs text-[#abc4ff80] gap-0.5 items-center",children:[(0,l.jsxs)("span",{children:["Position: ",(0,B.B)((0,r.h9)(m,x))," + "]}),(0,l.jsxs)(g.Z,{className:"text-[#D8CB39] font-medium gap-0.5 items-center",children:[(0,l.jsx)("span",{children:"Fee"}),(0,l.jsxs)(ex.Z,{children:[(0,l.jsx)(v.Z,{size:"xs",heroIconName:"information-circle"}),(0,l.jsx)(ex.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:"This token uses the Token-2022 program and includes a transfer fee set by the token creator. These are the final deposit amounts for the position and the transfer fee."})})]}),(0,l.jsxs)("span",{children:[": ",(0,B.B)(x)]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(J.Z,{className:"inline-block mr-1",size:"sm",token:d}),null==d?void 0:d.symbol]}),(0,l.jsxs)(b.Z,{className:"items-end",children:[(0,l.jsxs)("span",{children:[(0,B.B)(u)," ",null==d?void 0:d.symbol]}),(0,T.$u)(p)&&(0,l.jsxs)(g.Z,{className:"text-xs text-[#abc4ff80] gap-0.5 items-center",children:[(0,l.jsxs)("span",{children:["Position: ",(0,B.B)((0,r.h9)(u,p))," + "]}),(0,l.jsxs)(g.Z,{className:"text-[#D8CB39] font-medium gap-0.5 items-center",children:[(0,l.jsx)("span",{children:"Fee"}),(0,l.jsxs)(ex.Z,{children:[(0,l.jsx)(v.Z,{size:"xs",heroIconName:"information-circle"}),(0,l.jsx)(ex.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:"This token uses the Token-2022 program and includes a transfer fee set by the token creator. These are the final deposit amounts for the position and the transfer fee."})})]}),(0,l.jsxs)("span",{children:[": ",(0,B.B)(p)]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-2 pl-1",children:[(0,l.jsx)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:"Fee tier"}),(0,l.jsx)("span",{children:k})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"text-sm flex justify-between leading-[18px] mb-2 font-medium mobile:text-xs",children:[(0,l.jsx)("span",{className:"flex text-sm leading-[18px] text-secondary-title mr-2",children:"Current Price"}),N?(0,eb.C)((0,B.B)(N,{decimalLength:15})):"0"," ",null===(t="coin1"===f?d:c)||void 0===t?void 0:t.symbol," per ",null===(n="coin1"===f?c:d)||void 0===n?void 0:n.symbol]}),(0,l.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Selected Range"}),(0,l.jsx)("span",{children:S?(0,l.jsxs)(g.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,l.jsx)(v.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,l.jsxs)(g.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,l.jsx)(v.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Min Price"}),(0,l.jsx)("div",{className:"my-3 ".concat(M?"text-lg mobile:text-sm":"text-xl mobile:text-base"),children:D}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==d?void 0:d.symbol," per ",null==c?void 0:c.symbol]})]}),(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Max Price"}),(0,l.jsx)("div",{className:"my-3 ".concat(z?"text-lg mobile:text-sm":"text-xl mobile:text-base"),children:U}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==d?void 0:d.symbol," per ",null==c?void 0:c.symbol]})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg",children:w})]}),a&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Start Time"}),(0,l.jsx)("span",{className:"",children:(0,ev.xn)(a)})]})]}),(0,l.jsx)(b.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(b.Z,{children:(0,l.jsx)(h.Z,{className:"frosted-glass-teal",onClick:()=>R(i),children:"Create Pool and Deposit"})})})})]})}})}function eZ(){return(0,l.jsx)("div",{className:"flex mb-4 px-5 h-[91px] mobile:h-[75px] items-center text-secondary-title opacity-50 bg-dark-blue rounded-xl",children:"Select Token"})}function eN(){return(0,l.jsxs)("div",{className:"absolute text-sm flex flex-col text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,l.jsx)(v.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}function eP(e){let{decimals:t,minValue:n,maxValue:i,onPriceChange:a,onInDecrease:o,onBlur:c}=e;return(0,l.jsxs)("div",{className:"flex gap-2.5",children:[(0,l.jsx)(H.Z,{className:"grow",label:"Min Price",decimalMode:!0,showPlusMinusControls:!0,decimalCount:t,value:n,maxN:i?Number(i):void 0,onBlur:()=>null==c?void 0:c({side:s.Low,val:n}),increaseFn:()=>o({val:n,side:s.Low,isIncrease:!0}),decreaseFn:()=>o({val:n,side:s.Low,isIncrease:!1}),onUserInput:(e,t)=>{let{triggerBy:n}=t;e&&"increase-decrease"!==n&&a({val:e,side:s.Low})}}),(0,l.jsx)(H.Z,{className:"grow",label:"Max Price",decimalMode:!0,showPlusMinusControls:!0,decimalCount:t,value:i,minN:n?Number(n):void 0,onBlur:()=>null==c?void 0:c({side:s.Upper,val:i}),increaseFn:()=>o({val:i,side:s.Upper,isIncrease:!0}),decreaseFn:()=>o({val:i,side:s.Upper,isIncrease:!1}),onUserInput:(e,t)=>{let{triggerBy:n}=t;e&&"increase-decrease"!==n&&a({val:e,side:s.Upper})}})]})}(i=s||(s={})).Low="priceLower",i.Upper="priceUpper";var ey=n(40816);let ew="mobile:justify-center mobile:w-1/2";function eS(e){let{coin1:t,coin2:n,focusSide:i,onChangeFocus:s}=e,a=(0,Z.useMemo)(()=>{let e=[];return t&&e.push({label:"".concat(t.symbol||"Unknown"," price"),value:t.id,className:ew}),n&&e.push({label:"".concat(n.symbol||"Unknown"," price"),value:n.id,className:ew}),e},[t,n]),o=(0,Z.useCallback)(e=>{s(e.value===n.id?"coin2":"coin1")},[n]);return(0,l.jsx)("div",{className:"flex justify-between items-center mobile:flex-col mobile:items-baseline mobile:mb-3",children:t&&n&&(0,l.jsx)(ey.Z,{classNames:"ml-4 mobile:w-full mobile:ml-0",tabs:a,selectedValue:"coin1"===i?t.id:null==n?void 0:n.id,onChange:o})})}let ek=e=>{let{side:t,price:n,tick:i}=e;return t===s.Low?{[t]:n,priceLowerTick:i}:{[t]:n,priceUpperTick:i}};function eC(){var e,t,n,i,o,c,d,u,x;!function(){let{coin1:e,coin2:t,userSelectedAmmConfigFeeOption:n,userSettedCurrentPrice:i,ammPoolStartTime:s}=(0,m.ZP)(),l=(0,D.ZP)(e=>e.connection),a=(0,O.Z)(e=>e.owner),o=(0,Z.useRef)(-1);(0,Z.useEffect)(()=>{if(l&&e&&t&&i&&n){let e=globalThis.performance.now();o.current=Math.max(e,o.current),X({timestamp:globalThis.performance.now()}).then(t=>{let{mockedPoolInfo:n,makePoolInstruction:i}=t;o.current<=e&&m.ZP.setState({tempDataCache:i,currentAmmPool:(0,E.Z)({state:n})})}).catch(()=>{m.ZP.setState({tempDataCache:void 0,currentAmmPool:void 0})})}},[(0,B.B)(i),e,t,n,i,s,a,l])}();let[p,{off:j,on:w}]=(0,ea.ZP)(!1),S=(0,a.ZP)(e=>e.isMobile),k=(0,O.Z)(e=>e.connected),L=(0,O.Z)(e=>e.checkWalletHasEnoughBalance),U=(0,C.Z)(e=>e.popConfirm),M=(0,a.ZP)(e=>e.isApprovePanelShown),z=(0,m.ZP)(e=>e.currentAmmPool);console.log(z);let J=(0,m.ZP)(e=>e.coin1),ed=(0,m.ZP)(e=>e.coin2),em=(0,m.ZP)(e=>e.coin1Amount),eu=(0,m.ZP)(e=>e.coin2Amount);(0,m.ZP)(e=>e.coin1AmountFee),(0,m.ZP)(e=>e.coin2AmountFee);let ex=(0,m.ZP)(e=>e.liquidity),ef=(0,m.ZP)(e=>e.focusSide),eh="coin1"===ef,eb=(0,m.ZP)(e=>e.priceLower),ev=(0,m.ZP)(e=>e.priceUpper),ej=(0,m.ZP)(e=>e.ammPoolStartTime),ey=(0,m.ZP)(e=>e.userSettedCurrentPrice),ew=(0,m.ZP)(e=>e.userSelectedAmmConfigFeeOption),eC=(null===(e=(0,en.Z)((0,et.Lu)((null==ey?void 0:ey.toString())||"")).dec)||void 0===e?void 0:e.length)||0,eT=(0,Z.useRef)({[s.Low]:void 0,[s.Upper]:void 0}),eA=(0,Z.useRef)(),eI=(0,Z.useRef)(),[eB,eR]=(0,Z.useState)([]),[eL,eD]=(0,Z.useState)({[s.Low]:void 0,[s.Upper]:void 0}),eU=(0,Z.useCallback)(e=>eR(t=>[new N.Z((null==e?void 0:e.numerator.toString())||0).div((null==e?void 0:e.denominator.toString())||1).toFixed(20),t[1]]),[]),eM=(0,Z.useCallback)(e=>eR(t=>[t[0],new N.Z((null==e?void 0:e.numerator.toString())||0).div((null==e?void 0:e.denominator.toString())||1).toFixed(20)]),[]),ez="".concat(null==z?void 0:z.idString,"-").concat(ef),eO=(0,Z.useMemo)(()=>eB.filter(e=>!!e).reduce((e,t)=>e.add((0,I.Z)(t)),(0,I.Z)(0)),[eB]),eE=J||ed?Math.max(null!==(n=null==J?void 0:J.decimals)&&void 0!==n?n:0,null!==(i=null==ed?void 0:ed.decimals)&&void 0!==i?i:0):6,eX=(0,ee.aT)(null==z?void 0:z.state.mintA.mint,J),eq=(0,Z.useMemo)(()=>Math.pow(-1,eX?eh?0:1:eh?1:0),[eX,eh]),[eJ,eK]=(0,Z.useState)({}),eQ=(0,ei.z)(()=>{eK({...m.ZP.getState()}),w()});(0,Z.useEffect)(()=>{z&&(eI.current=z)},[z]),(0,Z.useEffect)(()=>()=>{m.ZP.getState().userSettedCurrentPrice&&m.ZP.setState({userSettedCurrentPrice:(0,r.hi)(1,m.ZP.getState().userSettedCurrentPrice)})},[ef]);let eV=z&&void 0!==ey&&void 0!==eb&&void 0!==ev?[(0,A.Z)(ev||0,eE).lt((0,A.Z)(ey||0,eE)),(0,A.Z)(eb||0,eE).gt((0,A.Z)(ey||0,eE))]:[!1,!1];eh||eV.reverse();let[e_,eG]=[!1,!1],eH=(0,Z.useRef)(null),eW=(0,Z.useRef)(null),[,{toggleSwap:e$}]=(0,el.H)(eH,eW);(0,es.P)(e=>{let[t]=e;t&&t!==ef&&e$()},[ef]);let eY=(0,Z.useCallback)(e=>Number((0,I.Z)(e).toFixed(Math.max(eE+2,eC))),[eC,eE]);(0,Z.useEffect)(()=>()=>m.ZP.setState({focusSide:"coin1",userCursorSide:"coin1",totalDeposit:void 0}),[]),(0,Z.useEffect)(()=>m.ZP.setState({totalDeposit:eO}),[eO]);let e0=(0,Z.useRef)(!1),e1=!J||!ed,e2=(0,Z.useCallback)(e=>m.ZP.setState({focusSide:e}),[]),e5=(0,Z.useCallback)((e,t)=>m.ZP.setState({[t]:e}),[]),e4=(0,ei.z)(e=>{let{side:t,val:n}=e;if(console.log(J,ed),e1)return;let i=(0,y.yc)({p:n,coin1:J,coin2:ed,reverse:!eh,ammPool:z});i&&(eT.current[t]=i.tick,eD(e=>({...e,[t]:eY(n)})),e0.current=!0)});(0,Z.useEffect)(()=>{var e,t;if(!ey){eD({[s.Low]:void 0,[s.Upper]:void 0});return}e3({side:s.Upper,val:null===(e=(0,r.dC)(ey,1.5))||void 0===e?void 0:e.toFixed(20),skipCheck:!0,noTimeOut:!0}),e3({side:s.Low,val:null===(t=(0,r.dC)(ey,.5))||void 0===t?void 0:t.toFixed(20),skipCheck:!0})},[ey,e4,ez,eE]);let e8=(0,ei.z)(()=>{if(z&&void 0!==eL[s.Low]&&void 0!==eL[s.Upper]&&eL[s.Low]>=eL[s.Upper]){let e=eh?J:ed,t=eT.current[s.Upper]-z.state.tickSpacing*eq,{price:n,tick:i}=(0,y.Ek)({poolInfo:z.state,baseIn:(0,ee.aT)(z.state.mintA.mint,null==e?void 0:e.mint),tick:t});eT.current[s.Low]=i,m.ZP.setState({priceLowerTick:i,priceLower:n}),eD(e=>({...e,[s.Low]:eY(n)}))}}),e3=(0,Z.useCallback)(e=>{let{side:t,val:n,skipCheck:i,noTimeOut:s}=e;if(!z||!J||!ed||!n)return;let l=()=>{if(e0.current||i){let e=(0,y.yc)({p:n,coin1:J,coin2:ed,reverse:!eh,ammPool:z});if(!e)return;eT.current[t]=e.tick,eD(n=>({...n,[t]:eY(e.price)})),m.ZP.setState(ek({side:t,price:e.price,tick:e.tick}))}e0.current=!1,i||e8()};eA.current=s?l():window.setTimeout(l,200)},[J,ed,null==z?void 0:z.idString,eh,eY]),e7=(0,ei.z)(e=>{let{val:t,side:n,isIncrease:i}=e;if(console.log(J,ed,z,t,n,i),!z||!J||!ed||!t)return 0;eA&&clearTimeout(eA.current),e0.current=!1;let l=eh?J:ed,a=eT.current[n]+(i?z.state.tickSpacing:-1*z.state.tickSpacing)*Math.pow(-1,eX?eh?0:1:eh?1:0),{price:o}=(0,y.Ek)({poolInfo:z.state,baseIn:(0,ee.aT)(z.state.mintA.mint,null==l?void 0:l.mint),tick:a}),c=Number(o);return n===s.Low&&c>=eL[s.Upper]?Number(t):(eT.current[n]=a,m.ZP.setState(ek({side:n,price:o,tick:a})),eD(e=>({...e,[n]:c})),c)}),{ratio1:e6,ratio2:e9}=(0,ec.dO)({currentPrice:null!=ey?(0,I.Z)(ey):ey,coin1InputDisabled:e_,coin2InputDisabled:eG,coin1Amount:em,coin2Amount:eu}),te=J&&L((0,$.n)(J,em,{alreadyDecimaled:!0})),tt=ed&&L((0,$.n)(ed,eu,{alreadyDecimaled:!0})),{Token2022FeeTooHighWarningChip:tn,isWarningChipOpen:ti}=(0,eo.I)([{token:J,amount:em},{token:ed,amount:eu}]);return(0,l.jsxs)(q.Z,{className:(0,P.m)("flex mobile:flex-col gap-4 p-6 mobile:py-4 mobile:px-2 rounded-3xl w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:[(0,l.jsxs)(b.Z,{className:"gap-6 w-1/2 mobile:w-full border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] mb-2",children:"Select Tokens"}),(0,l.jsxs)(G.Z,{className:"grid-cols-2 gap-4",children:[(0,l.jsx)(eF,{title:"Base Token",turnOnTokenVerification:!0,tokenKey:"coin1",onSelectToken:e5,token:J,disableTokens:ed?[ed]:void 0}),(0,l.jsx)(eF,{title:"Quote Token",turnOnTokenVerification:!0,tokenKey:"coin2",onSelectToken:e5,token:ed,disableTokens:J?[J]:void 0})]}),tn({className:"pt-4"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] mb-2",children:"Select Fee & Tick Spacing"}),(0,l.jsx)(ep,{})]}),(0,l.jsxs)(b.Z,{className:"gap-4",children:[(0,l.jsxs)(g.Z,{className:"mb-1 justify-between",children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] my-1",children:"Set Starting Price"}),(0,l.jsx)(eS,{coin1:J,coin2:ed,focusSide:ef,onChangeFocus:e2})]}),(0,l.jsx)("div",{className:"text-xs bg-[#abc4ff14] p-3 rounded-xl text-[#abc4ff] leading-5",children:"To initialize and create the pool, first set the starting price. Then, enter your price range and deposit amounts."}),(0,l.jsx)(H.Z,{decimalMode:!0,inputClassName:"text-right",prefix:(0,l.jsxs)("span",{className:"text-base text-secondary-title opacity-50",children:["Current ",eh?null==J?void 0:J.symbol:null==ed?void 0:ed.symbol," Price"]}),suffix:(0,l.jsx)("span",{className:"text-xs text-secondary-title opacity-50",children:eh?null==ed?void 0:ed.symbol:null==J?void 0:J.symbol}),value:ey,decimalCount:15,onUserInput:e=>{m.ZP.setState({userSettedCurrentPrice:e})}})]}),(0,l.jsxs)("div",{className:z?"":"opacity-50",children:[(0,l.jsx)("div",{className:"text-secondary-title font-medium mb-2",children:"Set Price Range"}),(0,l.jsx)(eP,{decimals:Math.max(null!==(o=null===(t=(0,en.Z)(ey).dec)||void 0===t?void 0:t.length)&&void 0!==o?o:4,eE),minValue:(0,B.B)(eL[s.Low]),maxValue:(0,B.B)(eL[s.Upper]),onBlur:e3,onPriceChange:e4,onInDecrease:e7})]}),(e_||eG)&&(0,l.jsx)(_.U,{children:(0,l.jsxs)("div",{className:"flex items-center p-3 bg-[#2C2B57] rounded-lg text-xs text-[#D6CC56]",children:[(0,l.jsx)(v.Z,{size:"sm",className:"mr-1.5",heroIconName:"exclamation-circle"}),"Your position will not trade or earn fees until price moves into your range."]})})]}),(0,l.jsxs)(b.Z,{className:"gap-4 w-1/2 mobile:w-full border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:z?"":"opacity-50 pointer-events-none",children:[(0,l.jsx)(g.Z,{className:"text-secondary-title justify-between mb-2",children:(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] my-1",children:"Deposit Amount"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative",ref:eH,children:[e_&&(0,l.jsx)(eN,{}),J?(0,l.jsx)(Q.Z,{hideTransferFee:!0,className:"mb-4 mobile:mt-0 py-2 mobile:py-1 px-3 mobile:px-2",disabled:M,disabledInput:!z,noDisableStyle:!0,value:z?(0,B.B)(em):void 0,haveHalfButton:!0,haveCoinIcon:!0,onPriceChange:eU,onUserInput:e=>{m.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},token:J,onCalculateTransferFee:e=>{m.ZP.setState({coin1AmountFee:e})}}):(0,l.jsx)(eZ,{})]}),(0,l.jsxs)("div",{className:"relative",ref:eW,children:[eG&&(0,l.jsx)(eN,{}),ed?(0,l.jsx)(Q.Z,{hideTransferFee:!0,className:"py-2 mobile:py-1 px-3 mobile:px-2",disabled:M,noDisableStyle:!0,value:z?(0,B.B)(eu):void 0,haveHalfButton:!0,haveCoinIcon:!0,onPriceChange:eM,onUserInput:e=>{m.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},token:ed,onCalculateTransferFee:e=>{m.ZP.setState({coin2AmountFee:e})}}):(0,l.jsx)(eZ,{})]})]})]}),(0,l.jsxs)("div",{className:"".concat(z?"":"opacity-50 pointer-events-none"," border-1.5 border-[#abc4ff80]  rounded-xl px-3 py-4"),children:[(0,l.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg leading-[18px]",children:z&&((0,T.$u)(em)||(0,T.$u)(eu))?(0,Y.Z)(eO):"--"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Deposit Ratio"}),(0,l.jsxs)("span",{className:"text-lg flex leading-[18px]",children:[z&&(0,l.jsx)(K.Z,{size:"sm",token1:J,token2:ed}),z&&((0,T.$u)(em)||(0,T.$u)(eu))?"".concat(null!==(c=(0,W.Z)(e6))&&void 0!==c?c:"--"," / ").concat(null!==(d=(0,W.Z)(e9))&&void 0!==d?d:"--"):"--"]})]})]}),(0,l.jsx)(V.Z,{className:"".concat(z?"":"opacity-50 pointer-events-none"," mb-8"),label:"Start time (Optional):",disableDateBeforeCurrent:!0,canEditSeconds:!0,onDateChange:e=>m.ZP.setState({ammPoolStartTime:e}),showTime:{format:"HH:mm:ss"}}),(0,l.jsxs)(b.Z,{className:"gap-4 mt-auto",children:[(0,l.jsxs)("div",{className:"flex items-center text-xs p-[12px] rounded-lg text-secondary-title bg-[rgba(171,196,255,0.08)] mt-auto",children:[(0,l.jsx)(v.Z,{size:"sm",heroIconName:"information-circle"}),(0,l.jsxs)("div",{className:"ml-2.5",children:[(0,l.jsx)("span",{className:"font-medium",children:"SOL network fee"}),": Estimated transaction fee for creating a pool is approximately 0.3 SOL, but may vary depending on transaction size."]})]}),(0,l.jsx)(h.Z,{className:"frosted-glass-teal mobile:w-full",size:S?"sm":"lg",validators:[{should:k,forceActive:!0,fallbackProps:{onClick:()=>a.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:J&&ed},{not:ti},{should:z,fallbackProps:{children:"Fail to find this pool"}},{should:(0,T.$u)(ey),fallbackProps:{children:"Input Price"}},{should:ew,fallbackProps:{children:"Select a fee option"}},{should:(0,T.$u)(em)||(0,T.$u)(eu),fallbackProps:{children:"Input Token Amount"}},{not:(0,T.$u)(eh?em:eu)&&ex&&ex.eq(R.xEJ),fallbackProps:{children:"Token Amount Fail to Create Pool"}},{should:e_||te,fallbackProps:{children:"Insufficient ".concat(null!==(u=null==J?void 0:J.symbol)&&void 0!==u?u:""," balance")}},{should:eG||tt,fallbackProps:{children:"Insufficient ".concat(null!==(x=null==ed?void 0:ed.symbol)&&void 0!==x?x:""," balance")}}],onClick:()=>{eQ()},children:"Preview Pool"}),(0,l.jsx)(er.a,{tooltipText:"SOL is needed for Solana network fees. A minimum balance of 1 SOL is recommended when creating a pool to avoid failed transactions.",solLeastBalance:1,className:"my-0"})]})]}),(0,l.jsx)(eg,{open:p,coin1:eJ.coin1,coin2:eJ.coin2,coin1Amount:eJ.coin1Amount,coin2Amount:eJ.coin2Amount,coin1AmountFee:eJ.coin1AmountFee,coin2AmountFee:eJ.coin2AmountFee,focusSide:ef,decimals:eE,currentPrice:(0,I.Z)(ey),startTime:ej,position:{min:(0,I.Z)(eJ.priceLower).toFixed(eE),max:(0,I.Z)(eJ.priceUpper).toFixed(eE)},totalDeposit:(0,Y.Z)(eO),onClose:j,inRange:!eV.find(e=>e),feeRate:(0,W.Z)(null==ew?void 0:ew.tradeFeeRate),onConfirm:()=>{F(eJ).then(e=>{j(),(null==e?void 0:e.allSuccess)&&(m.ZP.getState().refreshConcentrated(),U({type:"success",title:"Pool created successfully!",description:"Do you want to create a farm based on this pool?",confirmButtonIsMainButton:!0,confirmButtonText:"Create Farm",cancelButtonText:"Not Now",onConfirm(){var e,t,n;m.ZP.setState({coin1:null===(e=eI.current)||void 0===e?void 0:e.base,coin2:null===(t=eI.current)||void 0===t?void 0:t.quote,chartPoints:[],lazyLoadChart:!0,currentAmmPool:eI.current}),(0,f.Eh)("/clmm/edit-farm",{queryProps:{farmId:null===(n=eI.current)||void 0===n?void 0:n.idString}})},onCancel(){setTimeout(()=>{m.ZP.setState({coin1:void 0,coin2:void 0,coin1Amount:void 0,coin2Amount:void 0,focusSide:"coin1",userCursorSide:"coin1"}),m.ZP.getState().refreshConcentrated()},400)}}))})}})]})}function eF(e){var t;let{tokenKey:n,title:i,token:s,disableTokens:a,turnOnTokenVerification:o,onSelectToken:c}=e,[r,d]=(0,Z.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.Z,{className:"grid items-center bg-[#141041] rounded-xl py-2 cursor-pointer px-3",onClick:()=>d(!0),children:s?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs text-[#abc4ff80] mb-1",children:i}),(0,l.jsxs)(g.Z,{className:"items-center gap-2",children:[(0,l.jsx)(J.Z,{token:s}),(0,l.jsx)("div",{className:"text-[#abc4ff] font-medium text-lg",children:null!==(t=s.symbol)&&void 0!==t?t:""}),(0,l.jsx)(v.Z,{size:"sm",className:"text-[#abc4ff]",heroIconName:"chevron-down"})]})]}):(0,l.jsxs)(g.Z,{className:"text-[#abc4ff80] text-center gap-1.5 items-center px-3 py-2",children:[(0,l.jsx)("div",{children:i}),(0,l.jsx)(v.Z,{size:"sm",className:"text-[#abc4ff80]",heroIconName:"chevron-down"})]})}),(0,l.jsx)(ed.Z,{open:r,onClose:()=>{d(!1)},turnOnTokenVerification:o,canSelectIfInWhiteList:!0,disableTokens:a,onSelectToken:e=>{null==c||c(e,n)}})]})}function eT(e){let{className:t}=e;return(0,l.jsx)(g.Z,{className:(0,P.m)("items-center justify-between",t),children:(0,l.jsx)(h.Z,{type:"text",className:"text-sm text-[#ABC4FF] opacity-50 px-0",prefix:(0,l.jsx)(v.Z,{heroIconName:"chevron-left",size:"sm"}),onClick:()=>{(0,f.ES)("/clmm/pools")},children:"Back to Concentrated pools"})})}function eA(){x(),(0,p.Z)();let e=(0,a.ZP)(e=>e.isMobile);return(0,l.jsxs)(j.Z,{metaTitle:"Create CLMM Pool - Raydium",mobileBarTitle:"Create CLMM Pool",children:[(0,l.jsx)(eT,{className:"mb-8 mobile:mb-2 sticky z-10 top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] mobile:hidden"}),(0,l.jsxs)("div",{className:"pb-10 self-center transition-all duration-500 w-[min(950px,70vw)] mobile:w-[90vw] z-20",children:[!e&&(0,l.jsx)("div",{className:"pb-8 text-2xl mobile:text-lg font-semibold justify-self-start text-white",children:"Create Pool"}),(0,l.jsx)(eC,{}),(0,l.jsx)(b.Z,{className:"items-center my-8"})]})]})}}},function(e){e.O(0,[5431,3577,7439,3881,2820,7664,7980,5194,5469,6069,9774,2888,179],function(){return e(e.s=71716)}),_N_E=e.O()}]);